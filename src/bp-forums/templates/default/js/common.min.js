jQuery(document).ready(function(r){var e=jQuery("body").find(".bbp_topic_tags_dropdown"),u=[];e.length&&e.each(function(e,i){0<jQuery(i).parents(".elementor-location-popup").length||(jQuery(i).select2({dropdownParent:jQuery(i).closest("form").parent(),placeholder:jQuery(i).attr("placeholder"),minimumInputLength:1,closeOnSelect:!0,tags:!0,language:{errorLoading:function(){return bp_select2.i18n.errorLoading},inputTooLong:function(e){e=e.input.length-e.maximum;return bp_select2.i18n.inputTooLong.replace("%%",e)},inputTooShort:function(e){return bp_select2.i18n.inputTooShort.replace("%%",e.minimum-e.input.length)},loadingMore:function(){return bp_select2.i18n.loadingMore},maximumSelected:function(e){return bp_select2.i18n.maximumSelected.replace("%%",e.maximum)},noResults:function(){return bp_select2.i18n.noResults},searching:function(){return bp_select2.i18n.searching},removeAllItems:function(){return bp_select2.i18n.removeAllItems}},dropdownCssClass:"bb-select-dropdown bb-tag-list-dropdown",containerCssClass:"bb-select-container",tokenSeparators:[","],ajax:{url:bbpCommonJsData.ajax_url,dataType:"json",delay:1e3,data:function(e){return jQuery.extend({},e,{_wpnonce:bbpCommonJsData.nonce,action:"search_tags"})},cache:!0,processResults:function(n){return!1===jQuery.isEmptyObject(u)&&jQuery.each(u,function(e,t){for(var o=0;o<n.data.results.length;o++)n.data.results[o].id===t&&n.data.results.splice(o,1)}),{results:n&&n.success?n.data.results:[]}}}}),jQuery(i).on("select2:select",function(e){var t=jQuery(i).closest("form"),o=t.find("#bbp_topic_tags"),n=o.val(),n=n&&0<n.length?n.split(","):[],e=e.params.data;n.includes(e.text)||n.push(e.text);n=n.join(",");o.val(n);var r=[];jQuery(i).find("option").each(function(){var e=jQuery(this).attr("value");r.includes(e)?jQuery(this).remove():r.push(e)}),t.find(".select2-search__field").trigger("click")}),jQuery(i).on("select2:unselect",function(e){var t=jQuery(i).closest("form"),o=e.params.data;t.find('.bbp_topic_tags_dropdown option[value="'+o.id+'"]').remove();e=t.find("#bbp_topic_tags").val(),e=(u=(u=e&&0<e.length?e.split(","):[]).filter(function(e){return jQuery.trim(e)!==o.text})).join(",");t.find("#bbp_topic_tags").val(e),0===e.length&&jQuery(window).scrollTop(jQuery(window).scrollTop()+1)}))}),jQuery("body").on("click",".js-modal-close",function(){e.val(""),e.trigger("change"),jQuery("body").removeClass("popup-modal-reply"),jQuery(".medium-editor-toolbar").removeClass("active medium-editor-toolbar-active"),jQuery("#show-toolbar-button").removeClass("active"),jQuery("medium-editor-action").removeClass("medium-editor-button-active"),jQuery(".medium-editor-toolbar-actions").show(),jQuery(".medium-editor-toolbar-form").removeClass("medium-editor-toolbar-form-active"),jQuery("#whats-new-attachments .bb-url-scrapper-container").remove()}),window.addEventListener("unload",function(){var e=jQuery(".bbp-topic-form form");0<e.length&&e[0].reset()});var t=jQuery("body .bbp-topic-reply-link");t.length&&t.click(function(){jQuery("body").addClass("popup-modal-reply"),e.val(""),e.trigger("change")}),"undefined"!=typeof BP_Nouveau&&void 0!==BP_Nouveau.media&&void 0!==BP_Nouveau.media.emoji&&jQuery(".bbp-the-content").length&&void 0!==jQuery.prototype.emojioneArea&&jQuery(".bbp-the-content").each(function(e,t){var o=jQuery(t).attr("id"),n=jQuery(t).data("key");jQuery("#"+o).emojioneArea({standalone:!0,hideSource:!1,container:jQuery("#"+o).closest("form").find("#whats-new-toolbar > .post-emoji"),autocomplete:!1,pickerPosition:"bottom",hidePickerOnBlur:!0,useInternalCDN:!1,events:{ready:function(){void 0!==window.forums_medium_topic_editor&&void 0!==window.forums_medium_topic_editor[n]&&window.forums_medium_topic_editor[n].resetContent(),void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[n]&&window.forums_medium_reply_editor[n].resetContent(),void 0!==window.forums_medium_forum_editor&&void 0!==window.forums_medium_forum_editor[n]&&window.forums_medium_forum_editor[n].resetContent()},emojibtn_click:function(){void 0!==window.forums_medium_topic_editor&&void 0!==window.forums_medium_topic_editor[n]&&window.forums_medium_topic_editor[n].checkContentChanged(),void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[n]&&window.forums_medium_reply_editor[n].checkContentChanged(),void 0!==window.forums_medium_forum_editor&&void 0!==window.forums_medium_forum_editor[n]&&window.forums_medium_forum_editor[n].checkContentChanged(),void 0===window.forums_medium_topic_editor&&r("#bbpress-forums .bbp-the-content").keyup(),jQuery("#"+o)[0].emojioneArea.hidePicker()},search_keypress:function(){var e=this.search.val().toLowerCase();this.search.val(e)},picker_show:function(){r(this.button[0]).closest(".post-emoji").addClass("active")},picker_hide:function(){r(this.button[0]).closest(".post-emoji").removeClass("active")}}})}),window.elementorFrontend&&jQuery(document).on("elementor/popup/show",function(){var e=jQuery("body").find("div.elementor-location-popup").find(".bbp_topic_tags_dropdown");e.length&&e.each(function(e,r){jQuery(r).select2({placeholder:jQuery(r).attr("placeholder"),dropdownParent:jQuery(r).closest("form").parent(),minimumInputLength:1,closeOnSelect:!0,tags:!0,language:{errorLoading:function(){return bp_select2.i18n.errorLoading},inputTooLong:function(e){e=e.input.length-e.maximum;return bp_select2.i18n.inputTooLong.replace("%%",e)},inputTooShort:function(e){return bp_select2.i18n.inputTooShort.replace("%%",e.minimum-e.input.length)},loadingMore:function(){return bp_select2.i18n.loadingMore},maximumSelected:function(e){return bp_select2.i18n.maximumSelected.replace("%%",e.maximum)},noResults:function(){return bp_select2.i18n.noResults},searching:function(){return bp_select2.i18n.searching},removeAllItems:function(){return bp_select2.i18n.removeAllItems}},dropdownCssClass:"bb-select-dropdown bb-tag-list-dropdown",containerCssClass:"bb-select-container",tokenSeparators:[","],ajax:{url:bbpCommonJsData.ajax_url,dataType:"json",delay:1e3,data:function(e){return jQuery.extend({},e,{_wpnonce:bbpCommonJsData.nonce,action:"search_tags"})},cache:!0,processResults:function(n){return!1===jQuery.isEmptyObject(u)&&jQuery.each(u,function(e,t){for(var o=0;o<n.data.results.length;o++)n.data.results[o].id===t&&n.data.results.splice(o,1)}),{results:n&&n.success?n.data.results:[]}}}}),jQuery(r).on("select2:select",function(e){var t=e.params.data,o=jQuery(r).closest("form"),e=o.find("#bbp_topic_tags").val();(u=e&&0<e.length?e.split(","):[]).includes(t.text)||u.push(t.text);t=u.join(",");o.find("#bbp_topic_tags").val(t);var n=[];jQuery(r).find("option").each(function(){var e=jQuery(this).attr("value");n.includes(e)?jQuery(this).remove():n.push(e)}),o.find(".select2-search__field").trigger("click")}),jQuery(r).on("select2:unselect",function(e){var t=e.params.data,o=jQuery(r).closest("form"),e=o.find("#bbp_topic_tags").val();o.find('.bbp_topic_tags_dropdown option[value="'+t.id+'"]').remove();e=(u=(u=e&&0<e.length?e.split(","):[]).filter(function(e){return e!==t.text})).join(",");o.find("#bbp_topic_tags").val(e),0===e.length&&jQuery(window).scrollTop(jQuery(window).scrollTop()+1)})})}),jQuery(document).on("input","#bbp_topic_title",function(e){""!==jQuery(e.currentTarget).val().trim()?jQuery(e.currentTarget).closest("form").addClass("has-title"):jQuery(e.currentTarget).closest("form").removeClass("has-title")}),0!==jQuery("textarea#bbp_topic_content").length&&jQuery("#bbp_topic_content").on("keyup",function(){""!==jQuery("#bbp_topic_content").val().trim()?jQuery(this).closest("form").addClass("has-content"):jQuery(this).closest("form").removeClass("has-content")}),0!==jQuery("textarea#bbp_reply_content").length&&jQuery("#bbp_reply_content").on("keyup",function(){""!==jQuery("#bbp_reply_content").val().trim()?jQuery(this).closest("form").addClass("has-content"):jQuery(this).closest("form").removeClass("has-content")}),jQuery(document).on("input",".bbp_editor_topic_content",function(e){e=jQuery(e.currentTarget)[0];""===e.innerHTML.replace(/<p>/gi,"").replace(/<\/p>/gi,"").replace(/<br>/gi,"")&&(e.innerHTML="",jQuery("#bbp_topic_content").val(""))}),jQuery(document).on("input",".bbp_editor_reply_content",function(e){e=jQuery(e.currentTarget)[0];""===e.innerHTML.replace(/<p>/gi,"").replace(/<\/p>/gi,"").replace(/<br>/gi,"")&&(e.innerHTML="",jQuery("#bbp_reply_content").val(""))})});