jQuery(document).ready(function(){var n=jQuery("body .layout-wrap #profile-details-section #signup_profile_field_ids"),e=jQuery('<input type="hidden" class="onloadfields" value="" />'),r=jQuery('<input type="hidden" name="signup_profile_field_ids" id="signup_profile_field_ids" value="" />'),a=jQuery('<input type="hidden" name="signup_profile_field_id_prev" id="signup_profile_field_id_prev" value="" />');jQuery("body").append(e),jQuery("body").append(a);var o=0,s=jQuery("body .onloadfields"),u=0;s.val(n.val()),void 0!==window.tinymce&&window.tinymce.remove("textarea");var i,t,l=jQuery("body #buddypress #register-page #signup-form .layout-wrap #profile-details-section .editfield fieldset select#"+BP_Register.field_id);void 0!==l.val()&&l.val().length&&(1===u&&(jQuery("body .ajax_added").remove(),n.val(jQuery(".onloadfields").val()),a.val(l.val())),i=n.val(),e=l.val(),t=jQuery(".register-section.extended-profile"),l=s.val(),e={action:"xprofile_get_field",_wpnonce:BP_Register.nonce,fields:i,fixedIds:l,tinymce:o,type:e},jQuery.ajax({type:"GET",url:BP_Register.ajaxurl,data:e,success:function(e){var i;e.success&&(u=1,!0===parseInt(e.data.field_html)&&(o=1),n.val(""),n.val(e.data.field_ids),t.append(e.data.field_html),(i=jQuery("body .layout-wrap #profile-details-section > .editfield")).sort(function(e,i){return jQuery(e).data("index")-jQuery(i).data("index")}),jQuery(".layout-wrap #profile-details-section").html(i),jQuery("body .layout-wrap #profile-details-section").append(r),r.val(e.data.field_ids),void 0!==window.tinymce&&(window.tinymce.remove("textarea"),window.tinymce.init({selector:"textarea.wp-editor-area",branding:!1,menubar:!1,statusbar:!1,plugins:"lists fullscreen link",toolbar:" bold italic underline blockquote strikethrough bullist numlist alignleft aligncenter alignright undo redo link fullscreen"}),window.tinymce.execCommand("mceRepaint")))}})),jQuery(document).on("change","body #buddypress #register-page #signup-form .layout-wrap #profile-details-section .editfield fieldset select#"+BP_Register.field_id,function(){var l=jQuery("body #buddypress #register-page #signup-form .submit #signup_submit");l.prop("disabled",!0),1===u&&n.val(jQuery(".onloadfields").val());var e=n.val(),i=this.value,d=jQuery(".register-section.extended-profile"),t=s.val(),i={action:"xprofile_get_field",_wpnonce:BP_Register.nonce,fields:e,fixedIds:t,tinymce:o,type:i,prevId:a.val()};a.val(this.value),jQuery.ajax({type:"GET",url:BP_Register.ajaxurl,data:i,success:function(e){var i,t,a;e.success?(a=[],r.val()&&(a=r.val().split(",")),i=e.data.field_ids.split(","),t=[],a&&(jQuery.grep(a,function(e){-1==jQuery.inArray(e,i)&&t.push(e)}),0!==t.length&&jQuery.each(t,function(e,i){d.find(".field_"+i).remove()})),l.prop("disabled",!1),u=1,!0===parseInt(e.data.field_html)&&(o=1),n.val(""),n.val(e.data.field_ids),d.append(e.data.field_html),(a=jQuery("body .layout-wrap #profile-details-section > .editfield")).sort(function(e,i){return jQuery(e).data("index")-jQuery(i).data("index")}),jQuery(".layout-wrap #profile-details-section").html(a),jQuery("body .layout-wrap #profile-details-section").append(r),r.val(e.data.field_ids),void 0!==window.tinymce&&(window.tinymce.remove("textarea"),window.tinymce.init({selector:"textarea.wp-editor-area",branding:!1,menubar:!1,statusbar:!1,plugins:"lists fullscreen link",toolbar:" bold italic underline blockquote strikethrough bullist numlist alignleft aligncenter alignright undo redo link fullscreen"}),window.tinymce.on("init",function(){window.tinymce.inline&&window.tinymce.execCommand("mceRepaint")}))):l.prop("disabled",!1)}})})});