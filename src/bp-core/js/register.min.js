jQuery(document).ready(function(){var e=jQuery("body #profile-details-section #signup_profile_field_ids"),i=jQuery('<input type="hidden" class="onloadfields" value="" />'),t=jQuery('<input type="hidden" name="signup_profile_field_ids" id="signup_profile_field_ids" value="" />'),a=jQuery('<input type="hidden" name="signup_profile_field_id_prev" id="signup_profile_field_id_prev" value="" />');jQuery("body").append(i),jQuery("body").append(a);var l=0,n=jQuery("body .onloadfields"),d=0;n.val(e.val()),void 0!==window.tinymce&&window.tinymce.remove("textarea");var r=jQuery("body #buddypress #register-page #signup-form .layout-wrap #profile-details-section .editfield fieldset select#"+BP_Register.field_id);if(r.val().length){1===d&&(jQuery("body .ajax_added").remove(),e.val(jQuery(".onloadfields").val()),a.val(r.val()));var s=e.val(),o=r.val(),u=jQuery(".register-section.extended-profile"),p=n.val(),f={action:"xprofile_get_field",_wpnonce:BP_Register.nonce,fields:s,fixedIds:p,tinymce:l,type:o};jQuery.ajax({type:"GET",url:BP_Register.ajaxurl,data:f,success:function(i){if(i.success){d=1,!0===parseInt(i.data.field_html)&&(l=1),e.val(""),e.val(i.data.field_ids),u.append(i.data.field_html);var a=jQuery("body #profile-details-section > .editfield");a.sort(function(e,i){return jQuery(e).data("index")-jQuery(i).data("index")}),jQuery("#profile-details-section").html(a),jQuery("body #profile-details-section").append(t),t.val(i.data.field_ids),void 0!==window.tinymce&&(window.tinymce.remove("textarea"),window.tinymce.init({selector:"textarea",branding:!1,menubar:!1,statusbar:!1,plugins:"lists fullscreen link",toolbar:" bold italic underline blockquote strikethrough bullist numlist alignleft aligncenter alignright undo redo link fullscreen"}),window.tinymce.execCommand("mceRepaint"))}}})}jQuery(document).on("change","body #buddypress #register-page #signup-form .layout-wrap #profile-details-section .editfield fieldset select#"+BP_Register.field_id,function(){var i=jQuery("body #buddypress #register-page #signup-form .submit #signup_submit");i.prop("disabled",!0),1===d&&e.val(jQuery(".onloadfields").val());var r=e.val(),s=this.value,o=jQuery(".register-section.extended-profile"),u=n.val(),p={action:"xprofile_get_field",_wpnonce:BP_Register.nonce,fields:r,fixedIds:u,tinymce:l,type:s,prevId:a.val()};a.val(this.value),jQuery.ajax({type:"GET",url:BP_Register.ajaxurl,data:p,success:function(a){if(a.success){var n=[];t.val()&&(n=t.val().split(","));var r=a.data.field_ids.split(","),s=[];n&&(jQuery.grep(n,function(e){-1==jQuery.inArray(e,r)&&s.push(e)}),0!==s.length&&jQuery.each(s,function(e,i){o.find(".field_"+i).remove()})),i.prop("disabled",!1),d=1,!0===parseInt(a.data.field_html)&&(l=1),e.val(""),e.val(a.data.field_ids),o.append(a.data.field_html);var u=jQuery("body #profile-details-section > .editfield");u.sort(function(e,i){return jQuery(e).data("index")-jQuery(i).data("index")}),jQuery("#profile-details-section").html(u),jQuery("body #profile-details-section").append(t),t.val(a.data.field_ids),void 0!==window.tinymce&&(window.tinymce.remove("textarea"),window.tinymce.init({selector:"textarea",branding:!1,menubar:!1,statusbar:!1,plugins:"lists fullscreen link",toolbar:" bold italic underline blockquote strikethrough bullist numlist alignleft aligncenter alignright undo redo link fullscreen"}),window.tinymce.execCommand("mceRepaint"))}else i.prop("disabled",!1)}})}),jQuery(document).on("click","body #buddypress #register-page #signup-form #signup_submit",function(e){jQuery(".required-field").each(function(e){var i='<div class="bp-messages bp-feedback error">';if(i+='<span class="bp-icon" aria-hidden="true"></span>',i+="<p>"+BP_Register.required_field+"</p>",i+="</div>",jQuery(this).find('input[type="text"]').length&&""==jQuery(this).find('input[type="text"] ').val())0>=jQuery(this).find("legend .error").length&&jQuery(this).find("legend").after().append(i);else if(jQuery(this).find("textarea").length&&""==jQuery(this).find("textarea").val())0>=jQuery(this).find("legend .error").length&&jQuery(this).find("legend").after().append(i);else if(jQuery(this).find("select").length&&""==jQuery(this).find("select").val())0>=jQuery(this).find("legend .error").length&&jQuery(this).find("legend").after().append(i);else if(jQuery(this).find('input[type="checkbox"]').length){if(0>=jQuery(this).find("legend .error").length){var t=0;jQuery(this).find('input[type="checkbox"]').each(function(){1==jQuery(this).prop("checked")&&t++}),0>=t&&jQuery(this).find("legend").after().append(i)}}else;})});var y,c,g;(y=jQuery("#signup_email")).length&&y.on("focusout",function(){var e=y.val(),i=c.val(),t=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;(g=jQuery("#email-strength-result")).removeClass("show mismatch bad"),""===e&&""===i&&t.test(e)?g.html(""):(g.html(""),""===e&&""===i||t.test(e)?""!==i&&e!==i&&c.length&&g.addClass("show mismatch").html(BP_Register.mismatch_email):g.addClass("show bad").html(BP_Register.valid_email))}),(c=jQuery("#signup_email_confirm")).length&&c.on("keyup change",function(){if(9!==window.event.keyCode){var e=y.val(),i=c.val(),t=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;(g=jQuery("#email-strength-result")).removeClass("show mismatch bad"),""===e&&""===i||""===i||t.test(i)&&t.test(e)&&e===i?g.html(""):e===i||g.addClass("show mismatch").html(BP_Register.mismatch_email)}})});