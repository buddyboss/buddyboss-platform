jQuery(document).ready(function(i){i(document).on("click",".bp-hide-request",function(n){n.preventDefault();var r=i(this),o=r.attr("data-action");if("hide"===o){if(!confirm(Bp_Moderation.strings.confirm_msg))return!1}else if("unhide"===o&&!confirm(Bp_Moderation.strings.unhide_confirm_msg))return!1;i(".bp-moderation-ajax-msg p").text("").parent().addClass("hidden"),r.addClass("disabled");var e=r.attr("data-id"),a=r.attr("data-type"),t=r.attr("data-nonce"),s={action:"bp_moderation_content_actions_request",id:e,type:a,sub_action:o,nonce:t};i(n.currentTarget).append(' <i class="bb-icon bb-icon-loader animate-spin"></i>'),i.post(ajaxurl,s,function(e){var a,t="",s=window.location.href;!0===e.success?("hide"===o?(r.attr("data-action","unhide"),r.attr("title",Bp_Moderation.strings.unhide_label),r.text(Bp_Moderation.strings.unhide_label),t="hidden"):"unhide"===o&&(r.attr("data-action","hide"),r.attr("title",Bp_Moderation.strings.hide_label),r.text(Bp_Moderation.strings.hide_label),t="unhide"),-1<s.indexOf("?")?s+="&"+t+"=1":s+="?"+t+"=1",window.location.href=s):(a="",e.data.message.errors.bp_moderation_missing_data?a=e.data.message.errors.bp_moderation_missing_data:e.data.message.errors.bp_moderation_content_actions_request?a=e.data.message.errors.bp_moderation_content_actions_request:e.data.message.errors.bp_moderation_invalid_access&&(a=e.data.message.errors.bp_moderation_invalid_access),i(".bp-moderation-ajax-msg").removeClass("notice-success").addClass("notice-error"),i(".bp-moderation-ajax-msg p").text(a).parent().removeClass("hidden"),i(n.currentTarget).find(".bb-icon-loader").remove()),r.removeClass("disabled")})}),i(document).on("click",".bp-block-user",function(n){n.preventDefault();var r=i(this),o=r.attr("data-action");if("suspend"===o){if(!confirm(BP_ADMIN.moderation.suspend_confirm_message))return!1}else if("unsuspend"===o&&!confirm(BP_ADMIN.moderation.unsuspend_confirm_message))return!1;i(".bp-moderation-ajax-msg p").text("").parent().addClass("hidden"),r.addClass("disabled");var e=r.attr("data-id"),a=r.attr("data-type"),t=r.attr("data-nonce"),s={action:"bp_moderation_user_actions_request",id:e,type:a,sub_action:o,nonce:t};i(n.currentTarget).append(' <i class="bb-icon bb-icon-loader animate-spin"></i>'),i.post(ajaxurl,s,function(e){var a,t,s="";!0===e.success?(a=window.location.href,"suspend"===o?(r.attr("data-action","unsuspend"),r.hasClass("content-author")?(r.text(Bp_Moderation.strings.unsuspend_author_label),r.attr("title",Bp_Moderation.strings.unsuspend_author_label)):(r.text(Bp_Moderation.strings.unsuspend_label),r.attr("title",Bp_Moderation.strings.unsuspend_label)),s="suspended"):"unsuspend"===o&&(r.attr("data-action","suspend"),r.hasClass("content-author")?(r.text(Bp_Moderation.strings.suspend_author_label),r.attr("title",Bp_Moderation.strings.suspend_author_label)):(r.text(Bp_Moderation.strings.suspend_label),r.attr("title",Bp_Moderation.strings.suspend_label)),s="unsuspended"),-1<a.indexOf("?")?a+="&"+s+"=1":a+="?"+s+"=1",window.location.href=a):(t="",e.data.message.errors.bp_moderation_user_missing_data?t=e.data.message.errors.bp_moderation_user_missing_data:e.data.message.errors.bp_moderation_invalid_access&&(t=e.data.message.errors.bp_moderation_invalid_access),i(".bp-moderation-ajax-msg").removeClass("notice-success").addClass("notice-error"),i(".bp-moderation-ajax-msg p").text(t).parent().removeClass("hidden"),i(n.currentTarget).find(".bb-icon-loader").remove()),r.removeClass("disabled")})})});