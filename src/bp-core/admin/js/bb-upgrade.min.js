window.bp=window.bp||{},function(){var c="https://www.buddyboss.com/",r=null;function e(){var n={previewParent:jQuery(".bb-integrations-section-listing"),data:null,collections:null,categoriesArr:null,categoriesObj:null,searchQuery:"",collectionId:"",categoryId:"all",page:1,per_page:20,categoryHeadings:!1,totalpages:1},e=null;function i(a){var e={per_page:n.per_page,page:n.page,orderby:"category_name",order:"asc",exclude:"390262"};n.searchQuery&&(e.search=n.searchQuery),n.collectionId&&"all"!==n.collectionId?e.integrations_collection=n.collectionId:n.categoryHeadings=!0,n.categoryId&&"all"!==n.categoryId&&(e.integrations_category=n.categoryId),r&&r.abort(),r=jQuery.ajax({method:"GET",url:c+"wp-json/wp/v2/integrations",data:e,success:function(e,t,o){n.data=a?n.data.concat(e):e,n.totalpages=parseInt(o.getResponseHeader("X-WP-TotalPages")),s(n),r=null},error:function(e){console.log("Error fetching integrations"),e&&400===e.status?jQuery(".bb-integrations_loadmore").remove():r=null}})}function s(e){var t=jQuery("#tmpl-bb-integrations").html(),t=_.template(t)(e);e.previewParent&&e.previewParent.html(t)}s(n),function(){function r(){return(new Date).getTime()}var e=localStorage.getItem("bb-integrations-collections"),t=localStorage.getItem("bb-integrations-categories-obj"),o=localStorage.getItem("bb-integrations-categories-arr"),a=localStorage.getItem("bb-integrations-time");if(e&&t&&o&&a&&r()-parseInt(a,10)<6048e5)return n.collections=JSON.parse(e),n.categoriesObj=JSON.parse(t),n.categoriesArr=JSON.parse(o),s(n),i(!1);t=jQuery.ajax({method:"GET",url:c+"wp-json/wp/v2/integrations_collection?per_page=99&orderby=id"}),o=jQuery.ajax({method:"GET",url:c+"wp-json/wp/v2/integrations_category?per_page=99&orderby=name&hide_empty=1"}),jQuery.when(t,o).done(function(e,t){n.collections=e[0],n.categoriesObj={},n.categoriesArr=[];for(var o=0;o<t[0].length;o++){var a=t[0][o];n.categoriesObj[a.id]=a.name,n.categoriesArr.push([a.id,a.name])}localStorage.setItem("bb-integrations-collections",JSON.stringify(n.collections)),localStorage.setItem("bb-integrations-categories-obj",JSON.stringify(n.categoriesObj)),localStorage.setItem("bb-integrations-categories-arr",JSON.stringify(n.categoriesArr)),localStorage.setItem("bb-integrations-time",r().toString()),s(n),i(!1)}).fail(function(){console.log("Error fetching collections or categories")})}(),jQuery(document).on("change",'input[name="integrations_collection"]',function(){jQuery(this).closest(".bb-integrations_filters").addClass("loading"),"all"===jQuery(this).siblings("span").text().toLowerCase()?n.collectionId="all":n.collectionId=jQuery(this).val(),n.page=1,i(!1)}),jQuery(document).on("keyup",'input[name="search_integrations"]',function(){e&&clearTimeout(e),e=setTimeout(function(){jQuery(this).closest(".bb-integrations_search").addClass("loading"),n.searchQuery=jQuery(this).val(),n.page=1,i(!1)}.bind(this),500)}),jQuery(document).on("change",'select[name="categories_integrations"]',function(){jQuery(this).closest(".bb-integrations_filters").addClass("loading"),n.categoryId=jQuery(this).val(),n.page=1,i(!1)}),jQuery(document).on("click",".bb-integrations_loadmore",function(e){e.preventDefault(),jQuery(this).addClass("loading"),n.page+=1,i(!0)}),jQuery(document).on("click",".bb-integrations_search .clear-search",function(e){e.preventDefault(),n.page=1,n.searchQuery="",jQuery(this).closest(".bb-integrations_search").addClass("loading"),i(!1)})}jQuery(".bb-integrations-section-listing").length&&e()}(jQuery);