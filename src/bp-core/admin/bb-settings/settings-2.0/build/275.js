"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[275],{239:(e,a,n)=>{function t(e,a={}){const n=window.bbAdminData?.ajaxUrl||"/wp-admin/admin-ajax.php",t=window.bbAdminData?.ajaxNonce||"",i=new FormData;return i.append("action",e),i.append("nonce",t),Object.keys(a).forEach((e=>{i.append(e,a[e])})),fetch(n,{method:"POST",credentials:"same-origin",body:i}).then((e=>e.json()))}function i(e){return t("bb_admin_get_platform_settings",{options:e})}function s(e,a){return t("bb_admin_save_platform_setting",{option_name:e,option_value:a})}function l(){return t("bb_admin_get_appearance_settings")}function d(e){return t("bb_admin_save_appearance_settings",e)}function o(){return t("bb_admin_get_activity_types")}function r(){return t("bb_admin_get_activity_topics")}function u(e={}){return t("bb_admin_get_activities",e)}function b(e,a){return t("bb_admin_update_activity",{activity_id:e,...a})}function _(e){return t("bb_admin_delete_activity",{activity_id:e})}function c(e,a=!0){return t("bb_admin_spam_activity",{activity_id:e,is_spam:a?"1":"0"})}function g(e={}){return t("bb_admin_get_groups",e)}function m(e){return t("bb_admin_get_group",{group_id:e})}function p(e){return t("bb_admin_create_group",e)}function v(e,a){return t("bb_admin_update_group",{group_id:e,...a})}function h(e){return t("bb_admin_delete_group",{group_id:e})}function f(){return t("bb_admin_get_group_types")}function E(e){return t("bb_admin_create_group_type",e)}function y(e,a){return t("bb_admin_update_group_type",{type_id:e,...a})}function N(e){return t("bb_admin_delete_group_type",{type_id:e})}n.d(a,{$y:()=>_,Dm:()=>f,GJ:()=>r,Hk:()=>y,Hs:()=>d,J0:()=>b,JK:()=>s,Ni:()=>h,TO:()=>o,Wx:()=>m,ZU:()=>t,ZY:()=>N,ah:()=>u,ao:()=>E,bn:()=>i,f:()=>g,nR:()=>c,q:()=>l,vW:()=>v,wj:()=>p})},275:(e,a,n)=>{n.r(a),n.d(a,{default:()=>c});var t=n(609),i=n(87),s=n(723),l=n(427),d=n(291),o=n(239),r=n(185);function u(){return(0,t.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("path",{d:"M4 8H20M4 16H20",stroke:"#666",strokeWidth:"1.5",strokeLinecap:"round"}))}function b(){return(0,t.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("path",{d:"M12 2.25C6.62 2.25 2.25 6.62 2.25 12C2.25 17.38 6.62 21.75 12 21.75C17.38 21.75 21.75 17.38 21.75 12C21.75 6.62 17.38 2.25 12 2.25ZM12 20.25C7.45 20.25 3.75 16.55 3.75 12C3.75 7.45 7.45 3.75 12 3.75C16.55 3.75 20.25 7.45 20.25 12C20.25 16.55 16.55 20.25 12 20.25Z",fill:"#666"}),(0,t.createElement)("path",{d:"M12 17.25C12.4142 17.25 12.75 16.9142 12.75 16.5C12.75 16.0858 12.4142 15.75 12 15.75C11.5858 15.75 11.25 16.0858 11.25 16.5C11.25 16.9142 11.5858 17.25 12 17.25Z",fill:"#666"}),(0,t.createElement)("path",{d:"M12 6.75C10.21 6.75 8.75 8.21 8.75 10C8.75 10.41 9.09 10.75 9.5 10.75C9.91 10.75 10.25 10.41 10.25 10C10.25 9.04 11.04 8.25 12 8.25C12.96 8.25 13.75 9.04 13.75 10C13.75 10.96 12.96 11.75 12 11.75C11.59 11.75 11.25 12.09 11.25 12.5V14C11.25 14.41 11.59 14.75 12 14.75C12.41 14.75 12.75 14.41 12.75 14V13.17C14.14 12.82 15.25 11.53 15.25 10C15.25 8.21 13.79 6.75 12 6.75Z",fill:"#666"}))}const _=[{slug:"members",label:(0,s.__)("Members","buddyboss"),enabled:!0,hidden:!1},{slug:"activity",label:(0,s.__)("Feed","buddyboss"),enabled:!0,hidden:!1},{slug:"photos",label:(0,s.__)("Photos","buddyboss"),enabled:!0,hidden:!1},{slug:"videos",label:(0,s.__)("Videos","buddyboss"),enabled:!0,hidden:!1},{slug:"albums",label:(0,s.__)("Albums","buddyboss"),enabled:!0,hidden:!1},{slug:"documents",label:(0,s.__)("Documents","buddyboss"),enabled:!0,hidden:!1},{slug:"discussions",label:(0,s.__)("Discussions","buddyboss"),enabled:!0,hidden:!1},{slug:"zoom",label:(0,s.__)("Zoom","buddyboss"),enabled:!0,hidden:!1},{slug:"messages",label:(0,s.__)("Send Messages","buddyboss"),enabled:!0,hidden:!1},{slug:"invite",label:(0,s.__)("Send Invites","buddyboss"),enabled:!0,hidden:!1},{slug:"subgroups",label:(0,s.__)("Subgroups","buddyboss"),enabled:!0,hidden:!1},{slug:"admin",label:(0,s.__)("Manage","buddyboss"),enabled:!0,hidden:!1}];function c({onNavigate:e}){const[a,n]=(0,i.useState)(!0),[c,g]=(0,i.useState)(!1),[m,p]=(0,i.useState)([]),[v,h]=(0,i.useState)(!1),[f,E]=(0,i.useState)("members"),[y,N]=(0,i.useState)([]),[w,C]=(0,i.useState)(null),[S,D]=(0,i.useState)([]),[k,M]=(0,i.useState)([]),[x,T]=(0,i.useState)(!0);(0,i.useEffect)((()=>{const e="groups",a=(0,r.dB)(e);if(a)return D(a.sidePanels),M(a.navItems),void T(!1);(0,o.ZU)("bb_admin_get_feature_settings",{feature_id:e}).then((a=>{if(a.success&&a.data){const n=a.data;D(n.side_panels||[]),M(n.navigation||[]),(0,r.nX)(e,n)}T(!1)})).catch((()=>{T(!1)}))}),[]),(0,i.useEffect)((()=>{H()}),[]);const H=async()=>{n(!0);try{const e=await(0,o.q)(),a=e.success&&e.data?.data?e.data.data:{};h(!!a.group_nav_display),E(a.group_default_tab||"members");const n=a.group_nav_order||[],t=a.group_nav_hide||[];let i=[];n.length>0?(n.forEach((e=>{const a=_.find((a=>a.slug===e));a&&i.push({...a,enabled:!t.includes(e),hidden:t.includes(e)})})),_.forEach((e=>{n.includes(e.slug)||i.push({...e,enabled:!t.includes(e.slug),hidden:t.includes(e.slug)})}))):i=_.map((e=>({...e,enabled:!t.includes(e.slug),hidden:t.includes(e.slug)}))),p(i),Z(i)}catch(e){console.error("Failed to load group navigation settings:",e),p(_)}finally{n(!1)}},Z=e=>{const a=e.filter((e=>e.enabled&&["members","activity","photos","videos","albums","documents"].includes(e.slug))).map((e=>({value:e.slug,label:e.label})));N(a)},B=()=>{C(null)},j=async e=>{g(!0);try{await(0,o.Hs)(e)}catch(e){console.error("Failed to save group navigation settings:",e)}finally{g(!1)}};return(0,t.createElement)("div",{className:"bb-admin-feature-settings"},(0,t.createElement)("div",{className:"bb-admin-feature-settings__container"},(0,t.createElement)("aside",{className:"bb-admin-feature-settings__sidebar"},x?(0,t.createElement)("div",{className:"bb-admin-loading"},(0,t.createElement)(l.Spinner,null)):(0,t.createElement)(d.E,{featureId:"groups",sidePanels:S,navItems:k,currentPanel:"group_navigation",onNavigate:e,onBack:()=>{e("/settings/groups")}})),(0,t.createElement)("main",{className:"bb-admin-feature-settings__main"},(0,t.createElement)("div",{className:"bb-admin-group-navigation"},a?(0,t.createElement)("div",{className:"bb-admin-group-navigation__loading"},(0,t.createElement)(l.Spinner,null)):(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{className:"bb-admin-group-navigation__card"},(0,t.createElement)("div",{className:"bb-admin-group-navigation__card-header"},(0,t.createElement)("h2",null,(0,s.__)("Group Navigation","buddyboss")),(0,t.createElement)("button",{className:"bb-admin-group-navigation__help-btn","aria-label":(0,s.__)("Help","buddyboss")},(0,t.createElement)(b,null))),(0,t.createElement)("div",{className:"bb-admin-group-navigation__settings"},(0,t.createElement)("div",{className:"bb-admin-group-navigation__setting-row"},(0,t.createElement)("div",{className:"bb-admin-group-navigation__setting-label"},(0,t.createElement)("span",null,(0,s.__)("Layout","buddyboss"))),(0,t.createElement)("div",{className:"bb-admin-group-navigation__setting-control"},(0,t.createElement)("div",{className:"bb-admin-group-navigation__toggle-wrap"},(0,t.createElement)(l.ToggleControl,{checked:v,onChange:async e=>{h(e),await j({group_nav_display:e?1:0})},disabled:c,__nextHasNoMarginBottom:!0}),(0,t.createElement)("span",{className:"bb-admin-group-navigation__toggle-label"},(0,s.__)("Display the group navigation vertically","buddyboss"))))),(0,t.createElement)("div",{className:"bb-admin-group-navigation__setting-row bb-admin-group-navigation__setting-row--last"},(0,t.createElement)("div",{className:"bb-admin-group-navigation__setting-label"},(0,t.createElement)("span",null,(0,s.__)("Default Tab","buddyboss"))),(0,t.createElement)("div",{className:"bb-admin-group-navigation__setting-control"},(0,t.createElement)("div",{className:"bb-admin-group-navigation__select-wrap"},(0,t.createElement)(l.SelectControl,{value:f,options:y,onChange:async e=>{E(e),await j({group_default_tab:e})},disabled:c,__nextHasNoMarginBottom:!0})),(0,t.createElement)("p",{className:"bb-admin-group-navigation__setting-desc"},(0,s.__)("The dropdown only shows tabs that are available to all groups.","buddyboss")))))),(0,t.createElement)("div",{className:"bb-admin-group-navigation__card"},(0,t.createElement)("div",{className:"bb-admin-group-navigation__card-header"},(0,t.createElement)("h2",null,(0,s.__)("Navigation Order","buddyboss"))),(0,t.createElement)("div",{className:"bb-admin-group-navigation__list"},m.map(((e,a)=>(0,t.createElement)("div",{key:e.slug,className:"bb-admin-group-navigation__item "+(w===a?"bb-admin-group-navigation__item--dragging":""),draggable:!0,onDragStart:e=>((e,a)=>{C(a),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",e.target.outerHTML)})(e,a),onDragOver:e=>(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"})(e),onDrop:e=>(async(e,a)=>{if(e.preventDefault(),null===w||w===a)return void C(null);const n=[...m],[t]=n.splice(w,1);n.splice(a,0,t),p(n),C(null);const i=n.map((e=>e.slug));await j({group_nav_order:i})})(e,a),onDragEnd:B},(0,t.createElement)("div",{className:"bb-admin-group-navigation__item-left"},(0,t.createElement)("div",{className:"bb-admin-group-navigation__drag-handle"},(0,t.createElement)(u,null)),(0,t.createElement)("div",{className:"bb-admin-group-navigation__item-info"},(0,t.createElement)("span",{className:"bb-admin-group-navigation__item-name"},e.label),!e.enabled&&(0,t.createElement)("span",{className:"bb-admin-group-navigation__item-badge"},(0,s.__)("Hidden","buddyboss")))),(0,t.createElement)("div",{className:"bb-admin-group-navigation__item-right"},(0,t.createElement)(l.ToggleControl,{checked:e.enabled,onChange:()=>(async e=>{const a=m.map((a=>a.slug===e?{...a,enabled:!a.enabled,hidden:a.enabled}:a));p(a),Z(a);const n=a.filter((e=>!e.enabled)).map((e=>e.slug));await j({group_nav_hide:n})})(e.slug),disabled:c,__nextHasNoMarginBottom:!0}))))))))))))}}}]);