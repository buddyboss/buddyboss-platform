"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[329],{329:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var s=a(609),n=a(87),l=a(723),r=a(427),o=a(455),i=a.n(o),c=a(291);function d(){return(0,s.createElement)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{d:"M3.33329 10L9.16663 16.6667L16.6666 9.16667V3.33333H10.8333L3.33329 10Z",stroke:"#666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.createElement)("circle",{cx:"13.3333",cy:"6.66667",r:"0.833333",fill:"#666"}))}function p(){return(0,s.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{d:"M8 8C9.65685 8 11 6.65685 11 5C11 3.34315 9.65685 2 8 2C6.34315 2 5 3.34315 5 5C5 6.65685 6.34315 8 8 8Z",stroke:"#666",strokeWidth:"1.2"}),(0,s.createElement)("path",{d:"M14 14C14 11.7909 11.3137 10 8 10C4.68629 10 2 11.7909 2 14",stroke:"#666",strokeWidth:"1.2",strokeLinecap:"round"}))}function m(){return(0,s.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("circle",{cx:"6",cy:"12",r:"1.5",fill:"#2f2f2f"}),(0,s.createElement)("circle",{cx:"12",cy:"12",r:"1.5",fill:"#2f2f2f"}),(0,s.createElement)("circle",{cx:"18",cy:"12",r:"1.5",fill:"#2f2f2f"}))}function u(){return(0,s.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{d:"M8 3.33337V12.6667M3.33337 8.00004H12.6667",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))}function b(){return(0,s.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{d:"M12 2.25C6.62 2.25 2.25 6.62 2.25 12C2.25 17.38 6.62 21.75 12 21.75C17.38 21.75 21.75 17.38 21.75 12C21.75 6.62 17.38 2.25 12 2.25ZM12 20.25C7.45 20.25 3.75 16.55 3.75 12C3.75 7.45 7.45 3.75 12 3.75C16.55 3.75 20.25 7.45 20.25 12C20.25 16.55 16.55 20.25 12 20.25Z",fill:"#666"}),(0,s.createElement)("path",{d:"M12 17.25C12.4142 17.25 12.75 16.9142 12.75 16.5C12.75 16.0858 12.4142 15.75 12 15.75C11.5858 15.75 11.25 16.0858 11.25 16.5C11.25 16.9142 11.5858 17.25 12 17.25Z",fill:"#666"}),(0,s.createElement)("path",{d:"M12 6.75C10.21 6.75 8.75 8.21 8.75 10C8.75 10.41 9.09 10.75 9.5 10.75C9.91 10.75 10.25 10.41 10.25 10C10.25 9.04 11.04 8.25 12 8.25C12.96 8.25 13.75 9.04 13.75 10C13.75 10.96 12.96 11.75 12 11.75C11.59 11.75 11.25 12.09 11.25 12.5V14C11.25 14.41 11.59 14.75 12 14.75C12.41 14.75 12.75 14.41 12.75 14V13.17C14.14 12.82 15.25 11.53 15.25 10C15.25 8.21 13.79 6.75 12 6.75Z",fill:"#666"}))}function g(){return(0,s.createElement)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,s.createElement)("path",{d:"M6 1C3.24 1 1 3.24 1 6C1 8.76 3.24 11 6 11C8.76 11 11 8.76 11 6C11 3.24 8.76 1 6 1ZM9.94 5.5H8.06C7.97 4.32 7.63 3.22 7.09 2.31C8.48 2.82 9.59 4.02 9.94 5.5ZM6 9.94C5.31 9.18 4.81 8.26 4.56 7.25H7.44C7.19 8.26 6.69 9.18 6 9.94ZM4.42 6.5C4.39 6.17 4.37 5.84 4.37 5.5C4.37 5.16 4.39 4.83 4.42 4.5H7.58C7.61 4.83 7.63 5.16 7.63 5.5C7.63 5.84 7.61 6.17 7.58 6.5H4.42ZM2.06 5.5C2.41 4.02 3.52 2.82 4.91 2.31C4.37 3.22 4.03 4.32 3.94 5.5H2.06ZM3.94 6.5H2.06C2.41 7.98 3.52 9.18 4.91 9.69C4.37 8.78 4.03 7.68 3.94 6.5ZM7.09 9.69C7.63 8.78 7.97 7.68 8.06 6.5H9.94C9.59 7.98 8.48 9.18 7.09 9.69Z",fill:"currentColor"}))}function _({onNavigate:e}){const[t,a]=(0,n.useState)([]),[o,_]=(0,n.useState)(!0),[y,E]=(0,n.useState)(!0),[h,v]=(0,n.useState)(!0),[C,f]=(0,n.useState)(null),[N,w]=(0,n.useState)(!0),k=(0,n.useRef)(null),[M,x]=(0,n.useState)([]),[A,T]=(0,n.useState)([]),[S,H]=(0,n.useState)(!0);(0,n.useEffect)((()=>{i()({path:"/buddyboss/v1/features/groups/settings"}).then((e=>{x(e.data?.side_panels||[]),T(e.data?.navigation||[]),H(!1)})).catch((()=>{H(!1)}))}),[]),(0,n.useEffect)((()=>{w(!0),i()({path:"/buddyboss/v1/settings"}).then((e=>{const t=e.platform||{};E(!!t["bp-disable-group-type-creation"]),v(!!t["bp-enable-group-auto-join"]),w(!1)})).catch((e=>{console.error("Failed to load group type settings:",e),w(!1)}))}),[]),(0,n.useEffect)((()=>{Z()}),[]),(0,n.useEffect)((()=>{const e=e=>{k.current&&!k.current.contains(e.target)&&f(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const Z=()=>{_(!0),i()({path:"/buddyboss/v1/groups/types"}).then((e=>{console.log("Group Types API Response:",e);const t=e.data||e||[];a(Array.isArray(t)?t:[]),_(!1)})).catch((e=>{console.error("Group Types API Error:",e),a([]),_(!1)}))};return(0,s.createElement)("div",{className:"bb-admin-feature-settings"},(0,s.createElement)("div",{className:"bb-admin-feature-settings__container"},(0,s.createElement)("aside",{className:"bb-admin-feature-settings__sidebar"},S?(0,s.createElement)("div",{className:"bb-admin-loading"},(0,s.createElement)(r.Spinner,null)):(0,s.createElement)(c.E,{featureId:"groups",sidePanels:M,navItems:A,currentPanel:"group_types",onNavigate:e,onBack:()=>{e("/settings/groups")}})),(0,s.createElement)("main",{className:"bb-admin-feature-settings__main"},(0,s.createElement)("div",{className:"bb-admin-group-types"},(0,s.createElement)("div",{className:"bb-admin-group-types__card"},(0,s.createElement)("div",{className:"bb-admin-group-types__card-header"},(0,s.createElement)("h2",null,(0,l.__)("Group Type Settings","buddyboss")),(0,s.createElement)("button",{className:"bb-admin-group-types__help-btn","aria-label":(0,l.__)("Help","buddyboss")},(0,s.createElement)(b,null))),(0,s.createElement)("div",{className:"bb-admin-group-types__settings"},(0,s.createElement)("div",{className:"bb-admin-group-types__setting-row"},(0,s.createElement)("div",{className:"bb-admin-group-types__setting-label"},(0,s.createElement)("span",null,(0,l.__)("Group Types","buddyboss"))),(0,s.createElement)("div",{className:"bb-admin-group-types__setting-control"},(0,s.createElement)("div",{className:"bb-admin-group-types__toggle-wrap"},(0,s.createElement)(r.ToggleControl,{checked:y,onChange:e=>{E(e);const t=bbAdminData?.nonce||"";i()({path:"/buddyboss/v1/settings",method:"POST",headers:{"X-WP-Nonce":t},data:{"bp-disable-group-type-creation":e}}).then((e=>{console.log("Group Types setting saved:",e)})).catch((t=>{console.error("Failed to save Group Types setting:",t),E(!e)}))},disabled:N,__nextHasNoMarginBottom:!0}),(0,s.createElement)("span",{className:"bb-admin-group-types__toggle-label"},(0,l.__)("Enable group types","buddyboss"))),(0,s.createElement)("p",{className:"bb-admin-group-types__setting-desc"},(0,l.__)("When enabled,","buddyboss")," ",(0,s.createElement)("span",{className:"bb-admin-group-types__setting-link"},(0,l.__)("group types","buddyboss"))," ",(0,l.__)("allow you to better organize groups.","buddyboss")))),(0,s.createElement)("div",{className:"bb-admin-group-types__setting-row bb-admin-group-types__setting-row--last"},(0,s.createElement)("div",{className:"bb-admin-group-types__setting-label"},(0,s.createElement)("span",null,(0,l.__)("Auto Membership Approval","buddyboss"))),(0,s.createElement)("div",{className:"bb-admin-group-types__setting-control"},(0,s.createElement)("div",{className:"bb-admin-group-types__toggle-wrap"},(0,s.createElement)(r.ToggleControl,{checked:h,onChange:e=>{v(e);const t=bbAdminData?.nonce||"";i()({path:"/buddyboss/v1/settings",method:"POST",headers:{"X-WP-Nonce":t},data:{"bp-enable-group-auto-join":e}}).then((e=>{console.log("Auto Membership Approval setting saved:",e)})).catch((t=>{console.error("Failed to save Auto Membership Approval setting:",t),v(!e)}))},disabled:N,__nextHasNoMarginBottom:!0}),(0,s.createElement)("span",{className:"bb-admin-group-types__toggle-label"},(0,l.__)("Allow selected profile types to automatically join groups","buddyboss"))),(0,s.createElement)("p",{className:"bb-admin-group-types__setting-desc"},(0,l.__)("When a member requests to join a group their membership is automatically accepted.","buddyboss")))))),(0,s.createElement)("div",{className:"bb-admin-group-types__card bb-admin-group-types__card--list"},(0,s.createElement)("div",{className:"bb-admin-group-types__list-header"},(0,s.createElement)("h2",null,(0,l.__)("Group Types","buddyboss")),(0,s.createElement)("button",{className:"bb-admin-group-types__add-btn",onClick:()=>{e("/settings/groups/types/new")}},(0,s.createElement)(u,null),(0,l.__)("Add New Group Type","buddyboss"))),o?(0,s.createElement)("div",{className:"bb-admin-group-types__loading"},(0,s.createElement)(r.Spinner,null)):0===t.length?(0,s.createElement)("div",{className:"bb-admin-group-types__empty"},(0,l.__)("No group types found.","buddyboss")):(0,s.createElement)("div",{className:"bb-admin-group-types__list"},t.map((t=>{const a=t.id||t.ID,n=t.name||t.post_title||"",r=t.labels?.singular_name||t.slug||t.post_name||n,o=t.groups_count||t.count||0,c=t.privacy||"public";return(0,s.createElement)("div",{key:a,className:"bb-admin-group-types__item"},(0,s.createElement)("div",{className:"bb-admin-group-types__col bb-admin-group-types__col--name"},(0,s.createElement)("div",{className:"bb-admin-group-types__item-icon"},(0,s.createElement)(d,null)),(0,s.createElement)("span",{className:"bb-admin-group-types__item-name"},n)),(0,s.createElement)("div",{className:"bb-admin-group-types__col bb-admin-group-types__col--label"},(0,s.createElement)("span",{className:"bb-admin-group-types__badge"},r)),(0,s.createElement)("div",{className:"bb-admin-group-types__col bb-admin-group-types__col--groups"},(0,s.createElement)(p,null),(0,s.createElement)("a",{href:`#/groups/all?type=${a}`,className:"bb-admin-group-types__groups-link"},o," ",1===o?(0,l.__)("group","buddyboss"):(0,l.__)("groups","buddyboss"))),(0,s.createElement)("div",{className:"bb-admin-group-types__col bb-admin-group-types__col--visibility"},(0,s.createElement)("span",{className:"bb-admin-group-types__visibility-badge"},(0,s.createElement)(g,null),(0,s.createElement)("span",null,"public"===c?(0,l.__)("Public","buddyboss"):"private"===c?(0,l.__)("Private","buddyboss"):(0,l.__)("Hidden","buddyboss")))),(0,s.createElement)("div",{className:"bb-admin-group-types__col bb-admin-group-types__col--actions",ref:C===a?k:null},(0,s.createElement)("button",{className:"bb-admin-group-types__ellipsis-btn",onClick:()=>f(C===a?null:a)},(0,s.createElement)(m,null)),C===a&&(0,s.createElement)("div",{className:"bb-admin-group-types__menu"},(0,s.createElement)("button",{onClick:()=>(t=>{f(null),e(`/settings/groups/types/${t}/edit`)})(a)},(0,l.__)("Edit","buddyboss")),(0,s.createElement)("button",{onClick:()=>(e=>{confirm((0,l.__)("Are you sure you want to delete this group type?","buddyboss"))&&i()({path:`/buddyboss/v1/groups/types/${e}`,method:"DELETE",headers:{"X-WP-Nonce":bbAdminData?.nonce||""}}).then((()=>{f(null),Z()}))})(a),className:"bb-admin-group-types__menu-delete"},(0,l.__)("Delete","buddyboss")))))}))))))))}}}]);