"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[613],{613:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var i=a(609),n=a(87),s=a(723),l=a(427),c=a(455),o=a.n(c),d=a(291),r=a(185);const m=()=>(0,i.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),b=e=>{if(!e)return"";const t=document.createElement("textarea");return t.innerHTML=e,t.value},_=({id:e,value:t,onChange:a,placeholder:l})=>{const c=(0,n.useRef)(null),o=`bb-rich-editor-${e}`,d=(0,n.useRef)(!1),[r,m]=(0,n.useState)("visual");return(0,n.useEffect)((()=>("undefined"!=typeof wp&&wp.editor&&void 0!==window.tinymce&&!d.current&&setTimeout((()=>{wp.editor.remove(o),wp.editor.initialize(o,{tinymce:{wpautop:!0,plugins:"charmap colorpicker hr lists paste tabfocus textcolor wordpress wpautoresize wplink wptextpattern",toolbar1:"formatselect bold italic bullist numlist blockquote alignleft aligncenter alignright link",toolbar2:"",height:200,setup:e=>{e.on("change keyup paste",(()=>{const t=e.getContent();a(t)})),e.on("blur",(()=>{const t=e.getContent();a(t)}))}},quicktags:{buttons:"strong,em,link,block,del,ins,ul,ol,li,code,close"},mediaButtons:!1}),d.current=!0}),100),()=>{"undefined"!=typeof wp&&wp.editor&&d.current&&(wp.editor.remove(o),d.current=!1)})),[o]),(0,n.useEffect)((()=>{if(d.current&&void 0!==window.tinymce){const e=window.tinymce.get(o);e&&e.getContent()!==t&&e.setContent(t||"")}}),[t,o]),(0,i.createElement)("div",{className:"bb-admin-rich-editor",ref:c},(0,i.createElement)("div",{className:"bb-admin-rich-editor__tabs"},(0,i.createElement)("button",{type:"button",className:"bb-admin-rich-editor__tab "+("visual"===r?"active":""),onClick:()=>{void 0!==window.tinymce&&void 0!==window.switchEditors&&(window.switchEditors.go(o,"tmce"),m("visual"))}},(0,s.__)("Visual","buddyboss")),(0,i.createElement)("button",{type:"button",className:"bb-admin-rich-editor__tab "+("text"===r?"active":""),onClick:()=>{void 0!==window.tinymce&&void 0!==window.switchEditors&&(window.switchEditors.go(o,"html"),m("text"))}},(0,s.__)("Text","buddyboss"))),(0,i.createElement)("textarea",{id:o,defaultValue:t,placeholder:l,className:"bb-admin-rich-editor__textarea"}))},u=()=>(0,i.createElement)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)("path",{d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5Z",stroke:"#666666",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.createElement)("path",{d:"M8 4.5V8L10.5 9.5",stroke:"#666666",strokeLinecap:"round",strokeLinejoin:"round"})),y=()=>(0,i.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)("circle",{cx:"12",cy:"12",r:"1.5",fill:"#2F2F2F"}),(0,i.createElement)("circle",{cx:"12",cy:"6",r:"1.5",fill:"#2F2F2F"}),(0,i.createElement)("circle",{cx:"12",cy:"18",r:"1.5",fill:"#2F2F2F"})),v=()=>(0,i.createElement)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)("path",{d:"M9.0625 15.625C12.6869 15.625 15.625 12.6869 15.625 9.0625C15.625 5.43813 12.6869 2.5 9.0625 2.5C5.43813 2.5 2.5 5.43813 2.5 9.0625C2.5 12.6869 5.43813 15.625 9.0625 15.625Z",stroke:"#3D3D3D",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.createElement)("path",{d:"M13.7031 13.7031L17.5 17.5",stroke:"#3D3D3D",strokeLinecap:"round",strokeLinejoin:"round"})),p=({checked:e,onChange:t})=>(0,i.createElement)("button",{type:"button",className:"bb-admin-activity-list__checkbox "+(e?"bb-admin-activity-list__checkbox--checked":""),onClick:()=>t(!e)},e?(0,i.createElement)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)("rect",{width:"18",height:"18",rx:"4",fill:"#EF5D33"}),(0,i.createElement)("path",{d:"M13.5 5.25L7.125 11.625L4.5 9",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})):(0,i.createElement)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)("rect",{x:"0.5",y:"0.5",width:"17",height:"17",rx:"3.5",stroke:"#999999"})));function h({onNavigate:e}){const[t,a]=(0,n.useState)([]),[c,h]=(0,n.useState)(!0),[E,g]=(0,n.useState)(0),[w,N]=(0,n.useState)(1),[k]=(0,n.useState)(10),[f,C]=(0,n.useState)(""),[S,x]=(0,n.useState)(""),[T,A]=(0,n.useState)([]),[D,L]=(0,n.useState)(""),[I,F]=(0,n.useState)(""),[M,P]=(0,n.useState)(null),B=(0,n.useRef)(null),[U,$]=(0,n.useState)([]),[j,R]=(0,n.useState)([]),[W,G]=(0,n.useState)(!0),[H,Z]=(0,n.useState)(!1),[V,X]=(0,n.useState)(null),[q,z]=(0,n.useState)({action:"",title:"",topic:"",content:"",primary_link:"",type:"",user_id:"",item_id:"",secondary_item_id:"",is_spam:!1}),[J,K]=(0,n.useState)(!1),[O,Q]=(0,n.useState)([]),[Y,ee]=(0,n.useState)([]);(0,n.useEffect)((()=>{o()({path:"/buddyboss/v1/admin-activity/types"}).then((e=>{const t=e.data||e||[];Q(Array.isArray(t)?t:[])})).catch((()=>{Q([{key:"activity_update",label:"Updates"},{key:"activity_comment",label:"Activity Comments"},{key:"new_member",label:"New Members"},{key:"friendship_created",label:"Friendships"},{key:"created_group",label:"Groups Created"},{key:"joined_group",label:"Group Memberships"},{key:"group_details_updated",label:"Group Details Updated"},{key:"bbp_topic_create",label:"New Forum Topics"},{key:"bbp_reply_create",label:"Forum Replies"}])})),o()({path:"/buddyboss/v1/admin-activity/topics"}).then((e=>{const t=e.data||e||[];ee(Array.isArray(t)?t:[])})).catch((()=>{ee([])}))}),[]),(0,n.useEffect)((()=>{const e="activity",t=(0,r.dB)(e);if(t)return $(t.sidePanels),R(t.navItems),void G(!1);o()({path:"/buddyboss/v1/features/activity/settings"}).then((t=>{const a=t.data||t;$(a.side_panels||[]),R(a.navigation||[]),(0,r.nX)(e,a),G(!1)})).catch((()=>{G(!1)}))}),[]),(0,n.useEffect)((()=>{te()}),[w,f,D,I]),(0,n.useEffect)((()=>{const e=e=>{B.current&&!B.current.contains(e.target)&&P(null)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const te=()=>{h(!0);const e=new URLSearchParams({page:w.toString(),per_page:k.toString(),order:"desc",admin_view:"1",display_comments:"stream"});f&&e.append("search",f),D&&e.append("type",D),I&&e.append("spam",I),o()({path:`/buddyboss/v1/admin-activity?${e.toString()}`,parse:!1}).then((e=>{const t=parseInt(e.headers.get("X-WP-Total")||"0",10);return g(t),e.json()})).then((e=>{console.log("Activity API Response:",e);const t=Array.isArray(e)?e:e.data||e||[];console.log("Parsed activities:",t,"Total:",E),a(Array.isArray(t)?t:[]),h(!1)})).catch((e=>{console.error("Activity API Error:",e),a([]),g(0),h(!1)}))},ae=()=>{Z(!1),X(null)},ie=Math.ceil(E/k),ne=t.length>0&&T.length===t.length;return(0,i.createElement)("div",{className:"bb-admin-feature-settings"},(0,i.createElement)("div",{className:"bb-admin-feature-settings__container"},(0,i.createElement)("aside",{className:"bb-admin-feature-settings__sidebar"},W?(0,i.createElement)("div",{className:"bb-admin-loading"},(0,i.createElement)(l.Spinner,null)):(0,i.createElement)(d.E,{featureId:"activity",sidePanels:U,navItems:j,currentPanel:"all_activity",onNavigate:e,onBack:()=>{e("/settings")}})),(0,i.createElement)("main",{className:"bb-admin-feature-settings__main"},(0,i.createElement)("div",{className:"bb-admin-activity-list"},(0,i.createElement)("div",{className:"bb-admin-activity-list__card"},(0,i.createElement)("div",{className:"bb-admin-activity-list__section-header"},(0,i.createElement)("div",{className:"bb-admin-activity-list__section-header-content"},(0,i.createElement)("h2",null,(0,s.__)("Activities","buddyboss")))),(0,i.createElement)("div",{className:"bb-admin-activity-list__action-bar"},(0,i.createElement)("div",{className:"bb-admin-activity-list__action-bar-wrap"},(0,i.createElement)("div",{className:"bb-admin-activity-list__action-left"},(0,i.createElement)("div",{className:"bb-admin-activity-list__filter"},(0,i.createElement)("div",{className:"bb-admin-activity-list__select-wrap"},(0,i.createElement)("select",{className:"bb-admin-activity-list__select",value:S,onChange:e=>x(e.target.value)},(0,i.createElement)("option",{value:""},(0,s.__)("Bulk actions","buddyboss")),(0,i.createElement)("option",{value:"delete"},(0,s.__)("Delete","buddyboss")),(0,i.createElement)("option",{value:"mark_spam"},(0,s.__)("Mark as Spam","buddyboss")))),(0,i.createElement)("button",{className:"bb-admin-activity-list__apply-btn "+(S&&0!==T.length?"":"bb-admin-activity-list__apply-btn--disabled"),onClick:()=>{if(S&&0!==T.length&&"delete"===S){if(!confirm((0,s.__)("Are you sure you want to delete selected activities?","buddyboss")))return;Promise.all(T.map((e=>o()({path:`/buddyboss/v1/admin-activity/${e}`,method:"DELETE",headers:{"X-WP-Nonce":bbAdminData?.nonce||""}})))).then((()=>{A([]),x(""),te()}))}},disabled:!S||0===T.length},(0,s.__)("Apply","buddyboss")))),(0,i.createElement)("div",{className:"bb-admin-activity-list__action-right"},(0,i.createElement)("div",{className:"bb-admin-activity-list__select-wrap bb-admin-activity-list__select-wrap--count"},(0,i.createElement)("select",{className:"bb-admin-activity-list__select",value:I,onChange:e=>F(e.target.value)},(0,i.createElement)("option",{value:""},(0,s.__)("All","buddyboss")," (",E,")"),(0,i.createElement)("option",{value:"ham"},(0,s.__)("Not Spam","buddyboss")),(0,i.createElement)("option",{value:"spam"},(0,s.__)("Spam","buddyboss")))),(0,i.createElement)("div",{className:"bb-admin-activity-list__select-wrap bb-admin-activity-list__select-wrap--actions"},(0,i.createElement)("select",{className:"bb-admin-activity-list__select",value:D,onChange:e=>L(e.target.value)},(0,i.createElement)("option",{value:""},(0,s.__)("All Actions","buddyboss")),(0,i.createElement)("option",{value:"activity_update"},(0,s.__)("Activity Updates","buddyboss")),(0,i.createElement)("option",{value:"activity_comment"},(0,s.__)("Activity Comments","buddyboss")),(0,i.createElement)("option",{value:"new_member"},(0,s.__)("New Members","buddyboss")),(0,i.createElement)("option",{value:"joined_group"},(0,s.__)("Joined Group","buddyboss")),(0,i.createElement)("option",{value:"created_group"},(0,s.__)("Created Group","buddyboss")))),(0,i.createElement)("div",{className:"bb-admin-activity-list__search-wrap"},(0,i.createElement)("input",{type:"text",className:"bb-admin-activity-list__search-input",placeholder:(0,s.__)("Search activities","buddyboss"),value:f,onChange:e=>C(e.target.value)}),(0,i.createElement)("span",{className:"bb-admin-activity-list__search-icon"},(0,i.createElement)(v,null)))))),(0,i.createElement)("div",{className:"bb-admin-activity-list__table-header"},(0,i.createElement)("div",{className:"bb-admin-activity-list__table-header-wrap"},(0,i.createElement)("div",{className:"bb-admin-activity-list__col bb-admin-activity-list__col--author"},(0,i.createElement)(p,{checked:ne,onChange:e=>{A(e?t.map((e=>e.id)):[])}}),(0,i.createElement)("span",{className:"bb-admin-activity-list__header-label"},(0,s.__)("Author","buddyboss"))),(0,i.createElement)("div",{className:"bb-admin-activity-list__col bb-admin-activity-list__col--activity"},(0,i.createElement)("span",{className:"bb-admin-activity-list__header-label bb-admin-activity-list__header-label--muted"},(0,s.__)("Activity","buddyboss"))),(0,i.createElement)("div",{className:"bb-admin-activity-list__col bb-admin-activity-list__col--submitted"},(0,i.createElement)("span",{className:"bb-admin-activity-list__header-label bb-admin-activity-list__header-label--muted"},(0,s.__)("Submitted","buddyboss"))))),(0,i.createElement)("div",{className:"bb-admin-activity-list__list"},c?(0,i.createElement)("div",{className:"bb-admin-activity-list__loading"},(0,i.createElement)(l.Spinner,null)):0===t.length?(0,i.createElement)("div",{className:"bb-admin-activity-list__empty"},(0,s.__)("No activities found.","buddyboss")):t.map((e=>{const a=e.id||e.ID,n=e.name||e.user_name||e.display_name||(0,s.__)("Unknown","buddyboss"),l=e.user_avatar?.thumb||e.user_avatar?.full||("string"==typeof e.user_avatar?e.user_avatar:"")||"",c=e.link||e.user_link||e.permalink||"#";let d="";if(e.action){const t=document.createElement("div");t.innerHTML=e.action,d=t.textContent||t.innerText||"",d.startsWith(n)&&(d=d.substring(n.length).trim())}else d=e.action_text?e.action_text:e.type?.replace(/_/g," ")||"";const r=(e=>{if(!e)return"";const t=new Date(e);return`${t.getDate()} ${t.toLocaleString("en-US",{month:"short"})}, ${t.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}`})(e.date||e.date_recorded),m=e.is_spam||"spam"===e.status||!1,_=e.activity_data?.group_name||e.group_name||"";let v="";if(e.content_stripped)v=e.content_stripped;else if(e.content?.rendered){const t=document.createElement("div");t.innerHTML=e.content.rendered,v=t.textContent||t.innerText||""}else if("string"==typeof e.content){const t=document.createElement("div");t.innerHTML=e.content,v=t.textContent||t.innerText||""}return v=v.trim(),(0,i.createElement)("div",{key:a,className:"bb-admin-activity-list__item"},(0,i.createElement)("div",{className:"bb-admin-activity-list__item-wrap"},(0,i.createElement)("div",{className:"bb-admin-activity-list__col bb-admin-activity-list__col--author"},(0,i.createElement)(p,{checked:T.includes(a),onChange:e=>((e,t)=>{A(t?[...T,e]:T.filter((t=>t!==e)))})(a,e)}),(0,i.createElement)("div",{className:"bb-admin-activity-list__user"},l?(0,i.createElement)("img",{src:l,alt:n,className:"bb-admin-activity-list__avatar"}):(0,i.createElement)("div",{className:"bb-admin-activity-list__avatar bb-admin-activity-list__avatar--placeholder"},(0,i.createElement)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)("circle",{cx:"20",cy:"20",r:"19.75",fill:"#F6F6F6",stroke:"#D9D9D9",strokeWidth:"0.5"}),(0,i.createElement)("path",{d:"M20 20C22.7614 20 25 17.7614 25 15C25 12.2386 22.7614 10 20 10C17.2386 10 15 12.2386 15 15C15 17.7614 17.2386 20 20 20Z",fill:"#D9D9D9"}),(0,i.createElement)("path",{d:"M26.25 25.9375C26.25 23.2119 23.4518 31 20 31C16.5482 31 13.75 23.2119 13.75 25.9375C13.75 28.6631 16.5482 25.625 20 25.625C23.4518 25.625 26.25 23.2119 26.25 25.9375Z",fill:"#D9D9D9"}))),(0,i.createElement)("div",{className:"bb-admin-activity-list__user-info"},(0,i.createElement)("a",{href:c,className:"bb-admin-activity-list__username",target:"_blank",rel:"noopener noreferrer"},n),m&&(0,i.createElement)("span",{className:"bb-admin-activity-list__spam-badge"},(0,s.__)("Spam","buddyboss"))))),(0,i.createElement)("div",{className:"bb-admin-activity-list__col bb-admin-activity-list__col--activity"},(0,i.createElement)("div",{className:"bb-admin-activity-list__action-row"},(0,i.createElement)("span",{className:"bb-admin-activity-list__action-user"},n),(0,i.createElement)("span",{className:"bb-admin-activity-list__action-desc"},d)),(0,i.createElement)("div",{className:"bb-admin-activity-list__content-row"},_?(0,i.createElement)("a",{href:e.link||"#",className:"bb-admin-activity-list__content-link",target:"_blank",rel:"noopener noreferrer"},_):v&&v.length>0?(0,i.createElement)("span",{className:"bb-admin-activity-list__content-text"},v.length>100?v.substring(0,100)+"...":v):null)),(0,i.createElement)("div",{className:"bb-admin-activity-list__col bb-admin-activity-list__col--submitted"},(0,i.createElement)(u,null),(0,i.createElement)("span",{className:"bb-admin-activity-list__date"},r)),(0,i.createElement)("div",{className:"bb-admin-activity-list__actions",ref:M===a?B:null},(0,i.createElement)("button",{className:"bb-admin-activity-list__ellipsis-btn",onClick:()=>P(M===a?null:a)},(0,i.createElement)(y,null)),M===a&&(0,i.createElement)("div",{className:"bb-admin-activity-list__menu"},(0,i.createElement)("button",{onClick:()=>(e=>{P(null);const a=t.find((t=>t.id===e));if(a){X(a);let e="";"string"==typeof a.content?e=a.content:a.content?.rendered?e=a.content.rendered:a.content_stripped&&(e=a.content_stripped),e=b(e);let t=b(a.action||""),i=b(a.title||"");z({action:t,title:i,topic:a.topic_id?.toString()||"",content:e,primary_link:a.permalink||a.primary_link||"",type:a.type||"activity_update",user_id:a.user_id?.toString()||"",item_id:a.item_id?.toString()||"0",secondary_item_id:a.secondary_item_id?.toString()||"0",is_spam:a.is_spam||!1}),Z(!0)}})(a)},(0,s.__)("Edit","buddyboss")),(0,i.createElement)("button",{onClick:()=>(e=>{confirm((0,s.__)("Are you sure you want to delete this activity?","buddyboss"))&&(P(null),o()({path:`/buddyboss/v1/admin-activity/${e}`,method:"DELETE"}).then((()=>{te()})).catch((e=>{console.error("Error deleting activity:",e),alert(e.message||(0,s.__)("Failed to delete activity.","buddyboss"))})))})(a)},(0,s.__)("Delete","buddyboss")),(0,i.createElement)("button",{onClick:()=>(e=>{const a=t.find((t=>t.id===e)),i=a?.is_spam||!1,n=i?(0,s.__)("Are you sure you want to mark this activity as not spam?","buddyboss"):(0,s.__)("Are you sure you want to mark this activity as spam?","buddyboss");confirm(n)&&(P(null),o()({path:`/buddyboss/v1/admin-activity/${e}`,method:"PUT",data:{is_spam:!i}}).then((()=>{te()})).catch((e=>{console.error("Error marking activity as spam:",e),alert(e.message||(0,s.__)("Failed to update activity spam status.","buddyboss"))})))})(a)},m?(0,s.__)("Not Spam","buddyboss"):(0,s.__)("Mark as Spam","buddyboss"))))))})))),ie>1&&(0,i.createElement)("div",{className:"bb-admin-activity-list__pagination"},(0,i.createElement)("div",{className:"bb-admin-activity-list__pagination-info"},(0,s.__)("Page","buddyboss")," ",w," ",(0,s.__)("of","buddyboss")," ",ie),(0,i.createElement)("div",{className:"bb-admin-activity-list__pagination-buttons"},(0,i.createElement)("button",{className:"bb-admin-activity-list__pagination-btn",disabled:1===w,onClick:()=>N(w-1)},(0,s.__)("Previous","buddyboss")),(0,i.createElement)("button",{className:"bb-admin-activity-list__pagination-btn",disabled:w>=ie,onClick:()=>N(w+1)},(0,s.__)("Next","buddyboss"))))))),H&&V&&(0,i.createElement)("div",{className:"bb-admin-modal-overlay",onClick:ae},(0,i.createElement)("div",{className:"bb-admin-activity-modal bb-admin-activity-modal--wide",onClick:e=>e.stopPropagation()},(0,i.createElement)("div",{className:"bb-admin-activity-modal__header"},(0,i.createElement)("h2",null,(0,s.__)("Edit Activity","buddyboss")," (ID #",V.id,")"),(0,i.createElement)("button",{className:"bb-admin-activity-modal__close",onClick:ae},(0,i.createElement)(m,null))),(0,i.createElement)("div",{className:"bb-admin-activity-modal__body"},(0,i.createElement)("div",{className:"bb-admin-activity-modal__section"},(0,i.createElement)("label",{className:"bb-admin-activity-modal__section-label"},(0,s.__)("Action","buddyboss")),(0,i.createElement)(_,{id:`activity-action-${V?.id||"new"}`,value:q.action,onChange:e=>z({...q,action:e}),placeholder:(0,s.__)("Activity action text...","buddyboss")}),(0,i.createElement)("p",{className:"bb-admin-activity-modal__description"},(0,s.__)('The activity action. e.g. "User posted an update"',"buddyboss"))),(0,i.createElement)("div",{className:"bb-admin-activity-modal__section"},(0,i.createElement)("label",{className:"bb-admin-activity-modal__section-label"},(0,s.__)("Title","buddyboss")),(0,i.createElement)(l.TextControl,{value:q.title,onChange:e=>z({...q,title:e}),placeholder:(0,s.__)("Title (optional)","buddyboss")})),(0,i.createElement)("div",{className:"bb-admin-activity-modal__section"},(0,i.createElement)("label",{className:"bb-admin-activity-modal__section-label"},(0,s.__)("Topic","buddyboss")),(0,i.createElement)(l.SelectControl,{value:q.topic,onChange:e=>z({...q,topic:e}),options:[{value:"",label:(0,s.__)("— No Topic —","buddyboss")},...Y.map((e=>({value:e.id?.toString()||"",label:e.name||e.slug||""})))]})),(0,i.createElement)("div",{className:"bb-admin-activity-modal__section"},(0,i.createElement)("label",{className:"bb-admin-activity-modal__section-label"},(0,s.__)("Content","buddyboss")),(0,i.createElement)(_,{id:`activity-content-${V?.id||"new"}`,value:q.content,onChange:e=>z({...q,content:e}),placeholder:(0,s.__)("Activity content...","buddyboss")})),(0,i.createElement)("div",{className:"bb-admin-activity-modal__section"},(0,i.createElement)("label",{className:"bb-admin-activity-modal__section-label"},(0,s.__)("Status","buddyboss")),(0,i.createElement)("div",{className:"bb-admin-activity-modal__toggle-row"},(0,i.createElement)(l.ToggleControl,{label:(0,s.__)("Mark as Spam","buddyboss"),checked:q.is_spam,onChange:e=>z({...q,is_spam:e})}))),(0,i.createElement)("div",{className:"bb-admin-activity-modal__section"},(0,i.createElement)("label",{className:"bb-admin-activity-modal__section-label"},(0,s.__)("Link","buddyboss")),(0,i.createElement)(l.TextControl,{value:q.primary_link,onChange:e=>z({...q,primary_link:e}),placeholder:(0,s.__)("https://...","buddyboss")}),(0,i.createElement)("p",{className:"bb-admin-activity-modal__description"},(0,s.__)("Add a custom link for this activity item.","buddyboss"))),(0,i.createElement)("div",{className:"bb-admin-activity-modal__section"},(0,i.createElement)("label",{className:"bb-admin-activity-modal__section-label"},(0,s.__)("Type","buddyboss")),(0,i.createElement)(l.SelectControl,{value:q.type,onChange:e=>z({...q,type:e}),options:[{value:"",label:(0,s.__)("Select Type","buddyboss")},...O.map((e=>({value:e.key||e.value,label:e.label||e.name||e.key})))]})),(0,i.createElement)("div",{className:"bb-admin-activity-modal__section"},(0,i.createElement)("label",{className:"bb-admin-activity-modal__section-label"},(0,s.__)("Author ID","buddyboss")),(0,i.createElement)(l.TextControl,{type:"number",value:q.user_id,onChange:e=>z({...q,user_id:e}),min:"1"}),(0,i.createElement)("p",{className:"bb-admin-activity-modal__description"},(0,s.__)("The user ID of the activity author.","buddyboss"))),(0,i.createElement)("div",{className:"bb-admin-activity-modal__section bb-admin-activity-modal__section--last"},(0,i.createElement)("label",{className:"bb-admin-activity-modal__section-label"},(0,s.__)("Primary Item / Secondary Item","buddyboss")),(0,i.createElement)("div",{className:"bb-admin-activity-modal__row"},(0,i.createElement)("div",{className:"bb-admin-activity-modal__field-half"},(0,i.createElement)("label",{className:"bb-admin-activity-modal__sub-label"},(0,s.__)("Primary Item ID","buddyboss")),(0,i.createElement)(l.TextControl,{type:"number",value:q.item_id,onChange:e=>z({...q,item_id:e}),min:"0"})),(0,i.createElement)("div",{className:"bb-admin-activity-modal__field-half"},(0,i.createElement)("label",{className:"bb-admin-activity-modal__sub-label"},(0,s.__)("Secondary Item ID","buddyboss")),(0,i.createElement)(l.TextControl,{type:"number",value:q.secondary_item_id,onChange:e=>z({...q,secondary_item_id:e}),min:"0"}))),(0,i.createElement)("p",{className:"bb-admin-activity-modal__description"},(0,s.__)("These identify the object that created this activity. For example, the fields could reference a pair of site and comment IDs.","buddyboss")))),(0,i.createElement)("div",{className:"bb-admin-activity-modal__footer"},(0,i.createElement)(l.Button,{isSecondary:!0,onClick:ae},(0,s.__)("Cancel","buddyboss")),(0,i.createElement)(l.Button,{isPrimary:!0,onClick:()=>{if(!V)return;K(!0);const e={activity_action:q.action,title:q.title,content:q.content,primary_link:q.primary_link,type:q.type,user_id:parseInt(q.user_id)||V.user_id,item_id:parseInt(q.item_id)||0,secondary_item_id:parseInt(q.secondary_item_id)||0,is_spam:q.is_spam,topic_id:q.topic?parseInt(q.topic):0};console.log("Updating activity:",V.id,e),o()({path:`/buddyboss/v1/admin-activity/${V.id}`,method:"PUT",data:e}).then((e=>{console.log("Activity updated successfully:",e),Z(!1),X(null),te()})).catch((e=>{console.error("Error updating activity (PUT):",e);const t=e.message||e.data?.message||(0,s.__)("Failed to update activity.","buddyboss");alert(t)})).finally((()=>{K(!1)}))},disabled:J},J?(0,i.createElement)(l.Spinner,null):(0,s.__)("Update","buddyboss"))))))}}}]);