"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[613],{613:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var l=a(609),n=a(87),s=a(723),d=a(427),i=a(455),o=a.n(i);function c(){const[e,t]=(0,n.useState)([]),[a,i]=(0,n.useState)(!0),[c,r]=(0,n.useState)(0),[b,u]=(0,n.useState)(1),[m]=(0,n.useState)(20),[_,y]=(0,n.useState)(""),[v,p]=(0,n.useState)({type:"",component:"",status:"",orderby:"date",order:"DESC"});(0,n.useEffect)((()=>{E()}),[b,_,v]);const E=()=>{i(!0);const e=new URLSearchParams({page:b.toString(),per_page:m.toString(),orderby:v.orderby,order:v.order});_&&e.append("search",_),v.type&&e.append("type",v.type),v.component&&e.append("component",v.component),v.status&&e.append("status",v.status),o()({path:`/buddyboss/v1/activity?${e.toString()}`}).then((e=>{t(e.data||[]),r(e.pagination?.total||0),i(!1)})).catch((()=>{i(!1)}))},h=Math.ceil(c/m);return a&&0===e.length?(0,l.createElement)("div",{className:"bb-admin-activity-list bb-admin-loading"},(0,l.createElement)(d.Spinner,null)):(0,l.createElement)("div",{className:"bb-admin-activity-list"},(0,l.createElement)("div",{className:"bb-admin-activity-list__header"},(0,l.createElement)("h1",null,(0,s.__)("All Activity","buddyboss"))),(0,l.createElement)("div",{className:"bb-admin-activity-list__filters"},(0,l.createElement)(d.TextControl,{value:_,onChange:y,placeholder:(0,s.__)("Search activities...","buddyboss"),className:"bb-admin-activity-list__search"}),(0,l.createElement)(d.SelectControl,{label:(0,s.__)("Type","buddyboss"),value:v.type,options:[{label:(0,s.__)("All Types","buddyboss"),value:""},{label:(0,s.__)("Activity Update","buddyboss"),value:"activity_update"},{label:(0,s.__)("Activity Comment","buddyboss"),value:"activity_comment"}],onChange:e=>p({...v,type:e})}),(0,l.createElement)(d.SelectControl,{label:(0,s.__)("Component","buddyboss"),value:v.component,options:[{label:(0,s.__)("All Components","buddyboss"),value:""},{label:(0,s.__)("Activity","buddyboss"),value:"activity"},{label:(0,s.__)("Groups","buddyboss"),value:"groups"}],onChange:e=>p({...v,component:e})}),(0,l.createElement)(d.SelectControl,{label:(0,s.__)("Order By","buddyboss"),value:v.orderby,options:[{label:(0,s.__)("Date","buddyboss"),value:"date"},{label:(0,s.__)("ID","buddyboss"),value:"id"}],onChange:e=>p({...v,orderby:e})})),(0,l.createElement)("div",{className:"bb-admin-activity-list__table"},(0,l.createElement)("table",{className:"wp-list-table widefat fixed striped"},(0,l.createElement)("thead",null,(0,l.createElement)("tr",null,(0,l.createElement)("th",null,(0,s.__)("ID","buddyboss")),(0,l.createElement)("th",null,(0,s.__)("User","buddyboss")),(0,l.createElement)("th",null,(0,s.__)("Content","buddyboss")),(0,l.createElement)("th",null,(0,s.__)("Type","buddyboss")),(0,l.createElement)("th",null,(0,s.__)("Date","buddyboss")),(0,l.createElement)("th",null,(0,s.__)("Actions","buddyboss")))),(0,l.createElement)("tbody",null,e.map((e=>(0,l.createElement)("tr",{key:e.id},(0,l.createElement)("td",null,e.id),(0,l.createElement)("td",null,(0,l.createElement)("div",{className:"bb-admin-activity-list__user"},(0,l.createElement)("img",{src:e.user_avatar,alt:"",className:"bb-admin-activity-list__avatar"}),e.user_name)),(0,l.createElement)("td",null,(0,l.createElement)("div",{className:"bb-admin-activity-list__content",dangerouslySetInnerHTML:{__html:e.content}})),(0,l.createElement)("td",null,e.type),(0,l.createElement)("td",null,e.date_recorded_formatted),(0,l.createElement)("td",null,(0,l.createElement)(d.Button,{variant:"link",isDestructive:!0,onClick:()=>(e=>{if(!confirm((0,s.__)("Are you sure you want to delete this activity?","buddyboss")))return;const t=bbAdminData?.nonce||"";o()({path:`/buddyboss/v1/activity/${e}`,method:"DELETE",headers:{"X-WP-Nonce":t}}).then((()=>{E()})).catch((e=>{console.error("Failed to delete activity:",e)}))})(e.id)},(0,s.__)("Delete","buddyboss"))))))))),h>1&&(0,l.createElement)("div",{className:"bb-admin-activity-list__pagination"},(0,l.createElement)(d.Button,{variant:"secondary",disabled:1===b,onClick:()=>u(b-1)},(0,s.__)("Previous","buddyboss")),(0,l.createElement)("span",{className:"bb-admin-activity-list__page-info"},(0,s.__)("Page","buddyboss")," ",b," ",(0,s.__)("of","buddyboss")," ",h," (",c," ",(0,s.__)("total","buddyboss"),")"),(0,l.createElement)(d.Button,{variant:"secondary",disabled:b>=h,onClick:()=>u(b+1)},(0,s.__)("Next","buddyboss"))))}}}]);