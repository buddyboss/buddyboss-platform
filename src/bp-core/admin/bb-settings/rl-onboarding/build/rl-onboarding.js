(()=>{"use strict";const e=window.React,t=window.wp.element,a=window.wp.i18n,n=window.wp.components,r=({stepData:t,children:r,onNext:s,onPrevious:l,onSkip:o,isFirstStep:c=!1,isLastStep:i=!1,currentStep:b=0,totalSteps:d=0,rightPanelContent:m=null})=>{const{title:p,description:u,image:v}=t,E=window.bbRlOnboarding?.assets?.assetsUrl?`${window.bbRlOnboarding.assets.assetsUrl}${v}`:"",w=d>0?Array.from({length:d-1},((t,a)=>(0,e.createElement)("div",{className:"bb-rl-progress-step "+(a+1<b?"bb-rl-step-active":""),key:a}))):null;return(0,e.createElement)("div",{className:"bb-rl-step-layout"},(0,e.createElement)("div",{className:"bb-rl-step-content"},(0,e.createElement)("div",{className:"bb-rl-left-panel"},(0,e.createElement)("div",{className:"bb-rl-step-header"},(0,e.createElement)("a",{href:window.bbRlOnboarding?.dashboardUrl,className:"bb-rl-step-back-button"},(0,e.createElement)("span",{className:"bb-icons-rl-caret-left"}),(0,a.__)("WP Admin","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-logo"},(0,e.createElement)("img",{src:window.bbRlOnboarding?.assets?.logo||"",alt:"BuddyBoss"}))),(0,e.createElement)("div",{className:"bb-rl-left-panel-content"},(0,e.createElement)("div",{className:"bb-rl-step-info"},(0,e.createElement)("h1",{className:"bb-rl-step-title"},p),(0,e.createElement)("p",{className:"bb-rl-step-description"},u)),(0,e.createElement)("div",{className:"bb-rl-step-progress"},w),(0,e.createElement)("div",{className:"bb-rl-step-options"},r),(0,e.createElement)("div",{className:"bb-rl-step-navigation"},!c&&(0,e.createElement)(n.Button,{className:"bb-rl-nav-button bb-rl-previous-button",onClick:l},(0,e.createElement)("span",{className:"bb-icons-rl-arrow-left"}),(0,a.__)("Back","buddyboss")),(0,e.createElement)(n.Button,{className:"bb-rl-nav-button bb-rl-next-button",onClick:s,variant:"primary"},i?(0,a.__)("Finish","buddyboss"):(0,a.__)("Next","buddyboss"),!i&&(0,e.createElement)("span",{className:"bb-icons-rl-arrow-right"}))))),(0,e.createElement)("div",{className:"bb-rl-right-panel"},m||(0,e.createElement)("div",{className:"bb-rl-step-preview"},E&&(0,e.createElement)("div",{className:"bb-rl-preview-image"},(0,e.createElement)("img",{src:E,alt:p})),(0,e.createElement)("div",{className:"bb-rl-preview-placeholder"},(0,e.createElement)("p",null,(0,a.__)("Live preview will appear here","buddyboss")))))))},s=({stepKey:r,stepOptions:s={},initialData:l={},onChange:o,onAutoSave:c})=>{const i=()=>{const e={};return Object.entries(s).forEach((([t,a])=>{"description"!==a.type&&"hr"!==a.type&&(void 0!==a.value?e[t]=a.value:void 0!==a.default&&(e[t]=a.default))})),e},[b,d]=(0,t.useState)((()=>({...i(),...l}))),[m,p]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=i();d((t=>({...e,...t,...l})))}),[l,s]);const u=(e,t)=>{const a={...b,[e]:t};if(d(a),o&&o(a),c){m&&clearTimeout(m);const e=setTimeout((()=>{c({[r]:a})}),1e3);p(e)}},v=(t,r)=>{const{type:s,options:l,required:o,default:c,value:i}=r,d=w(t,r),m=y(t,r),p=void 0!==b[t]&&""!==b[t]&&null!==b[t]?b[t]:void 0!==i?i:c;switch(s){case"text":const r=d||"blogname"!==t?"":(0,a.__)("Enter site title...","buddyboss");return(0,e.createElement)(n.TextControl,{key:t,label:d||"",help:m||"",placeholder:r,value:p||"",onChange:e=>u(t,e),required:o});case"select":return(0,e.createElement)(n.SelectControl,{key:t,label:d||"",help:m||"",value:p||"",onChange:e=>u(t,e),options:Object.entries(l||{}).map((([e,t])=>({value:e,label:t})))});case"checkbox":return(0,e.createElement)(n.CheckboxControl,{key:t,label:d||"",help:m||"",checked:Boolean(p),onChange:e=>u(t,e)});case"radio":return(0,e.createElement)("div",{key:t,className:"bb-rl-field-group"},d&&(0,e.createElement)("div",{className:"bb-rl-field-label"},(0,e.createElement)("h4",null,d),m&&(0,e.createElement)("p",{className:"bb-rl-field-description"},m)),(0,e.createElement)(n.RadioControl,{selected:p||"",options:Object.entries(l||{}).map((([e,t])=>({value:e,label:t}))),onChange:e=>u(t,e)}));case"color":return(0,e.createElement)("div",{key:t,className:"bb-rl-field-group"},d&&(0,e.createElement)("div",{className:"bb-rl-field-label"},(0,e.createElement)("h4",null,d),m&&(0,e.createElement)("p",{className:"bb-rl-field-description"},m)),(0,e.createElement)("div",{className:"bb-rl-color-picker-wrapper"},(0,e.createElement)(n.ColorPicker,{color:p||"#e57e3a",onChange:e=>u(t,e),disableAlpha:!0})));case"media":const c=(e,t)=>{if(void 0===window.wp||!window.wp.media)return console.error("WordPress Media API is not available"),void alert("WordPress Media API is not available. Please make sure WordPress Media is properly loaded.");const n=window.wp.media({title:(0,a.__)("Select or Upload Media","buddyboss"),button:{text:(0,a.__)("Use this media","buddyboss")},multiple:!1,library:{type:"image"}});n.on("select",(function(){const e=n.state().get("selection").first().toJSON(),a={id:e.id,url:e.url,alt:e.alt||"",title:e.title||""};t(a)})),n.open()},i=({label:t,value:r,onChange:s,description:l,customClass:o})=>(0,e.createElement)("div",{className:`image-selector-component ${o||""}`},(0,e.createElement)("div",{className:"image-selector-control"},console.log(r),r&&r.url?(0,e.createElement)("div",{className:"bb-rl-image-preview-wrapper"},(0,e.createElement)("div",{className:"bb-rl-image-preview-block"},(0,e.createElement)("img",{src:r.url,alt:r.alt||"",className:"image-preview"})),(0,e.createElement)("div",{className:"image-actions"},(0,e.createElement)(n.Button,{onClick:()=>c(t,s),className:"change-image-button bb-rl-button bb-rl-button--secondary bb-rl-button--small",icon:(0,e.createElement)("i",{className:"bb-icons-rl-upload-simple"})},(0,a.__)("Replace","buddyboss")),(0,e.createElement)(n.Button,{onClick:()=>s(null),className:"remove-image-button bb-rl-button bb-rl-button--outline bb-rl-button--small",icon:(0,e.createElement)("i",{className:"bb-icons-rl-x"})},(0,a.__)("Remove","buddyboss")))):(0,e.createElement)(n.Button,{onClick:()=>c(t,s),className:"bb-rl-upload-image-button",icon:(0,e.createElement)("i",{className:"bb-icons-rl-plus"})}),l&&(0,e.createElement)("p",{className:"field-description"},l)));return(0,e.createElement)("div",{key:t,className:"bb-rl-field-group"},d&&(0,e.createElement)("div",{className:"bb-rl-field-label"},(0,e.createElement)("h4",null,d),m&&(0,e.createElement)("p",{className:"bb-rl-field-description"},m)),(0,e.createElement)(i,{label:d,value:p,onChange:e=>u(t,e),description:m,customClass:"bb-rl-media-field"}));case"visual_radio_options":return(0,e.createElement)("div",{className:"bb-rl-field-group"},d&&(0,e.createElement)("div",{className:"bb-rl-field-label"},(0,e.createElement)("h4",null,d),m&&(0,e.createElement)("p",{className:"bb-rl-field-description"},m)),(0,e.createElement)("div",{className:"bb-rl-color-scheme-options"},Object.entries(l||{}).map((([a,n])=>{const r="string"==typeof n?n:n.label,s="object"==typeof n?n.description:"",l="object"==typeof n?n.icon_class:"";return(0,e.createElement)("div",{key:a,className:"bb-rl-color-option "+(p===a?"bb-rl-selected":"")},(0,e.createElement)("label",{className:`bb-rl-color-preview bb-rl-color-${a}`,onClick:()=>u(t,a)},l&&(0,e.createElement)("i",{className:l}),(0,e.createElement)("span",{className:"bb-rl-color-details"},(0,e.createElement)("span",{className:"bb-rl-color-label"},r),s&&(0,e.createElement)("span",{className:"bb-rl-color-description"},s)),(0,e.createElement)("div",{className:"bb-rl-custom-radio-input"},(0,e.createElement)("input",{type:"radio",name:t,value:a,checked:p===a}),(0,e.createElement)("span",{className:"bb-rl-custom-radio-icon"}))))}))));case"visual_options":return(0,e.createElement)("div",{key:t,className:"bb-rl-field-group"},d&&(0,e.createElement)("div",{className:"bb-rl-field-label"},(0,e.createElement)("h4",null,d),m&&(0,e.createElement)("p",{className:"bb-rl-field-description"},m)),(0,e.createElement)("div",{className:"bb-rl-visual-options"},Object.entries(l||{}).map((([a,n])=>{const r="string"==typeof n?n:n.label,s="object"==typeof n?n.description:"",l="object"==typeof n?n.icon_class:"";return(0,e.createElement)("div",{key:a,className:"bb-rl-visual-option "+(p===a?"bb-rl-selected":""),onClick:()=>u(t,a)},(0,e.createElement)("div",{className:`bb-rl-option-preview bb-rl-${t}-${a}`},l&&(0,e.createElement)("span",{className:l}),E(t,a)),(0,e.createElement)("div",{className:"bb-rl-option-content"},(0,e.createElement)("span",{className:"bb-rl-option-label"},r),s&&(0,e.createElement)("span",{className:"bb-rl-option-description"},s)),p===a&&(0,e.createElement)("span",{className:"bb-rl-selected-icon"},"✓"))}))));case"description":return(0,e.createElement)("div",{key:t,className:"bb-rl-field-group bb-rl-description"},(0,e.createElement)("p",{className:"bb-rl-field-description"},m));case"hr":return(0,e.createElement)("div",{key:t,className:"bb-rl-field-group bb-rl-separator"},(0,e.createElement)("hr",{className:"bb-rl-horizontal-rule"}));default:return(0,e.createElement)("div",{key:t,className:"bb-rl-field-group"},(0,e.createElement)("p",{className:"bb-rl-error-message"},(0,a.__)("Unknown field type:","buddyboss")," ",s))}},E=(t,a)=>{switch(t){case"bb_rl_theme_mode":case"color_scheme":return(0,e.createElement)("div",{className:"bb-rl-color-scheme-preview"},(0,e.createElement)("div",{className:`bb-rl-color-swatch bb-rl-primary-${a}`}),(0,e.createElement)("div",{className:`bb-rl-color-swatch bb-rl-secondary-${a}`}),(0,e.createElement)("div",{className:`bb-rl-color-swatch bb-rl-accent-${a}`}));case"site_layout":return(0,e.createElement)("div",{className:"bb-rl-layout-preview"},(0,e.createElement)("div",{className:"bb-rl-layout-header"}),(0,e.createElement)("div",{className:"bb-rl-layout-content"},(0,e.createElement)("div",{className:"bb-rl-layout-main"}),"boxed"===a&&(0,e.createElement)("div",{className:"bb-rl-layout-sidebar"})));case"homepage_layout":if("activity"===a)return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"bb-rl-activity-item"}),(0,e.createElement)("div",{className:"bb-rl-activity-item"}),(0,e.createElement)("div",{className:"bb-rl-activity-item"}));if("custom"===a)return(0,e.createElement)("div",{className:"bb-rl-custom-content"},(0,e.createElement)("div",{className:"bb-rl-custom-block"}),(0,e.createElement)("div",{className:"bb-rl-custom-block"}));if("landing"===a)return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"bb-rl-hero-section"}),(0,e.createElement)("div",{className:"bb-rl-features-section"}));break;case"menu_style":if("horizontal"===a)return(0,e.createElement)("div",{className:"bb-rl-menu-preview bb-rl-horizontal"},(0,e.createElement)("div",{className:"bb-rl-menu-item"}),(0,e.createElement)("div",{className:"bb-rl-menu-item"}),(0,e.createElement)("div",{className:"bb-rl-menu-item"}));if("vertical"===a)return(0,e.createElement)("div",{className:"bb-rl-menu-preview bb-rl-vertical"},(0,e.createElement)("div",{className:"bb-rl-menu-item"}),(0,e.createElement)("div",{className:"bb-rl-menu-item"}),(0,e.createElement)("div",{className:"bb-rl-menu-item"}));break;case"widget_areas":return(0,e.createElement)("div",{className:"bb-rl-widget-area-preview"},(0,e.createElement)("div",{className:"bb-rl-content-area"},("all"===a||"sidebar"===a)&&(0,e.createElement)("div",{className:"bb-rl-sidebar-area"},(0,e.createElement)("div",{className:"bb-rl-widget-placeholder"}),(0,e.createElement)("div",{className:"bb-rl-widget-placeholder"})),(0,e.createElement)("div",{className:"bb-rl-main-content-area"})),("all"===a||"footer"===a)&&(0,e.createElement)("div",{className:"bb-rl-footer-area"},(0,e.createElement)("div",{className:"bb-rl-widget-placeholder"}),(0,e.createElement)("div",{className:"bb-rl-widget-placeholder"}),(0,e.createElement)("div",{className:"bb-rl-widget-placeholder"})));default:return(0,e.createElement)("div",{className:"bb-rl-default-preview"})}},w=(e,t)=>t.dynamicLabel&&"function"==typeof t.dynamicLabel?t.dynamicLabel(b):t.label,y=(e,t)=>t.dynamicDescription&&"function"==typeof t.dynamicDescription?t.dynamicDescription(b):t.description;return(0,e.createElement)("div",{className:"bb-rl-dynamic-step-renderer"},(0,e.createElement)("div",{className:"bb-rl-form-fields"},Object.entries(s).map((([t,a])=>((e,t)=>{if(!t.conditional)return!0;const{dependsOn:a,value:n,operator:r="==="}=t.conditional,s=b[a];switch(r){case"===":return s===n;case"!==":return s!==n;case"in":return Array.isArray(n)&&n.includes(s);case"not_in":return Array.isArray(n)&&!n.includes(s);default:return!0}})(0,a)?"description"===a.type||"hr"===a.type?v(t,a):(0,e.createElement)("div",{key:t,className:"bb-rl-field-group"},v(t,a)):null))))},l=({formData:t={}})=>{const n=t.bb_rl_light_logo?.url||("string"==typeof t.bb_rl_light_logo?t.bb_rl_light_logo:null),r=t.bb_rl_dark_logo?.url||("string"==typeof t.bb_rl_dark_logo?t.bb_rl_dark_logo:null),s=t.bb_rl_color_light||t.brand_colors||"#e57e3a",l={"--preview-primary-color":s,"--preview-logo-light":n?`url(${n})`:"none","--preview-logo-dark":r?`url(${r})`:"none"};return(0,e.createElement)("div",{className:"bb-rl-branding-preview",style:l},(0,e.createElement)("div",{className:"bb-rl-preview-header"},(0,e.createElement)("h4",null,(0,a.__)("Live Preview","buddyboss")),(0,e.createElement)("p",null,(0,a.__)("See how your branding will look","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-preview-section"},(0,e.createElement)("div",{className:"bb-rl-preview-label"},(0,e.createElement)("span",{className:"bb-rl-preview-mode-icon"},"☀️"),(0,a.__)("Light Mode","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-preview-mockup bb-rl-preview-light"},(0,e.createElement)("div",{className:"bb-rl-preview-header-bar",style:{backgroundColor:s}},(0,e.createElement)("div",{className:"bb-rl-preview-logo"},n?(0,e.createElement)("img",{src:n,alt:(0,a.__)("Site Logo Light","buddyboss")}):(0,e.createElement)("div",{className:"bb-rl-preview-logo-placeholder"},(0,a.__)("Your Logo","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-preview-nav"},(0,e.createElement)("div",{className:"bb-rl-preview-nav-item"}),(0,e.createElement)("div",{className:"bb-rl-preview-nav-item"}),(0,e.createElement)("div",{className:"bb-rl-preview-nav-item"}))),(0,e.createElement)("div",{className:"bb-rl-preview-content"},(0,e.createElement)("div",{className:"bb-rl-preview-activity"},(0,e.createElement)("div",{className:"bb-rl-preview-activity-item"}),(0,e.createElement)("div",{className:"bb-rl-preview-activity-item"}),(0,e.createElement)("div",{className:"bb-rl-preview-activity-item"}))))),(0,e.createElement)("div",{className:"bb-rl-preview-section"},(0,e.createElement)("div",{className:"bb-rl-preview-label"},(0,e.createElement)("span",{className:"bb-rl-preview-mode-icon"},"🌙"),(0,a.__)("Dark Mode","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-preview-mockup bb-rl-preview-dark"},(0,e.createElement)("div",{className:"bb-rl-preview-header-bar",style:{backgroundColor:s}},(0,e.createElement)("div",{className:"bb-rl-preview-logo"},r?(0,e.createElement)("img",{src:r,alt:(0,a.__)("Site Logo Dark","buddyboss")}):n?(0,e.createElement)("img",{src:n,alt:(0,a.__)("Site Logo","buddyboss")}):(0,e.createElement)("div",{className:"bb-rl-preview-logo-placeholder"},(0,a.__)("Your Logo","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-preview-nav"},(0,e.createElement)("div",{className:"bb-rl-preview-nav-item"}),(0,e.createElement)("div",{className:"bb-rl-preview-nav-item"}),(0,e.createElement)("div",{className:"bb-rl-preview-nav-item"}))),(0,e.createElement)("div",{className:"bb-rl-preview-content"},(0,e.createElement)("div",{className:"bb-rl-preview-activity"},(0,e.createElement)("div",{className:"bb-rl-preview-activity-item"}),(0,e.createElement)("div",{className:"bb-rl-preview-activity-item"}),(0,e.createElement)("div",{className:"bb-rl-preview-activity-item"}))))),s&&"#e57e3a"!==s&&(0,e.createElement)("div",{className:"bb-rl-preview-section"},(0,e.createElement)("div",{className:"bb-rl-preview-label"},(0,a.__)("Primary Color","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-preview-color-demo"},(0,e.createElement)("div",{className:"bb-rl-preview-color-swatch",style:{backgroundColor:s}}),(0,e.createElement)("span",{className:"bb-rl-preview-color-value"},s))),(0,e.createElement)("div",{className:"bb-rl-preview-tips"},(0,e.createElement)("h5",null,(0,a.__)("Pro Tips:","buddyboss")),(0,e.createElement)("ul",null,(0,e.createElement)("li",null,(0,a.__)("Upload different logos for light and dark modes for best visibility","buddyboss")),(0,e.createElement)("li",null,(0,a.__)("Use transparent PNG files for logos with the best results","buddyboss")),(0,e.createElement)("li",null,(0,a.__)("Recommended logo size: 280x80px or larger","buddyboss")))))},o={SplashScreen:({stepData:t,onNext:n,onSkip:r})=>{const{title:s,description:l,image:o}=t,c=(window.bbRlOnboarding?.assets?.assetsUrl&&window.bbRlOnboarding.assets.assetsUrl,window.bbRlOnboarding?.readylaunch?.is_buddyboss_theme_active||!1),i=window.bbRlOnboarding?.readylaunch?.buddyboss_theme_installed||!1;return(0,e.createElement)("div",{className:"bb-rl-splash-screen"},(0,e.createElement)("div",{className:"bb-rl-splash-content"},(0,e.createElement)("div",{className:"bb-rl-splash-content-product-container"},(0,e.createElement)("div",{className:"bb-rl-splash-content-product"},(0,e.createElement)("p",{className:"bb-rl-splash-content-product-name"},(0,a.__)("BuddyBoss Theme","buddyboss")),(0,e.createElement)("p",{className:"bb-rl-splash-content-product-baseline"},(0,a.__)("Customizable WordPress theme","buddyboss")),(0,e.createElement)("img",{src:`${window.bbRlOnboarding.assets.assetsUrl}buddyboss-theme-preview.jpg`,alt:"BuddyBoss Theme Preview",className:"bb-rl-product-preview"}),(0,e.createElement)("p",{className:"bb-rl-splash-content-product-description"},(0,a.__)("Our crafted theme made just for the BuddyBoss Platform giving you full control to design a community that feels truly yours.","buddybos s")),(0,e.createElement)("ul",{className:"bb-rl-splash-content-product-features"},(0,e.createElement)("li",{className:"bb-rl-splash-content-product-feature"},(0,e.createElement)("i",{className:"bb-icons-rl-check"}),(0,a.__)("Advanced customization","buddyboss")),(0,e.createElement)("li",{className:"bb-rl-splash-content-product-feature"},(0,e.createElement)("i",{className:"bb-icons-rl-check"}),(0,a.__)("Deep integration support","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-splash-content-product-button-container"},c?(0,e.createElement)("a",{href:window?.bbRlOnboarding?.readylaunch?.theme_settings,className:"bb-rl-button bb-rl-button--outline"},(0,a.__)("Configure BuddyBoss Theme","buddyboss")):i?(0,e.createElement)("a",{href:window?.bbRlOnboarding?.readylaunch?.themes,className:"bb-rl-button bb-rl-button--outline"},(0,a.__)("Activate BuddyBoss Theme","buddyboss")):(0,e.createElement)("a",{href:"https://www.buddyboss.com/website-platform/#platform_pricing_box",target:"_blank",className:"bb-rl-button"},(0,a.__)("Buy Theme","buddyboss")))),(0,e.createElement)("div",{className:"bb-rl-splash-content-product"},(0,e.createElement)("p",{className:"bb-rl-splash-content-product-name"},(0,a.__)("ReadyLaunch","buddyboss")),(0,e.createElement)("p",{className:"bb-rl-splash-content-product-baseline"},(0,a.__)("Community features for any WordPress theme","buddyboss")),(0,e.createElement)("img",{src:`${window.bbRlOnboarding.assets.assetsUrl}readylaunch-preview.jpg`,alt:"BuddyBoss Theme Preview",className:"bb-rl-product-preview"}),(0,e.createElement)("p",{className:"bb-rl-splash-content-product-description"},(0,a.__)("Get your community up and running in no time with our easy to use template system.","buddybos s")),(0,e.createElement)("ul",{className:"bb-rl-splash-content-product-features"},(0,e.createElement)("li",{className:"bb-rl-splash-content-product-feature"},(0,e.createElement)("i",{className:"bb-icons-rl-check"}),(0,a.__)("Minimal configuration","buddyboss")),(0,e.createElement)("li",{className:"bb-rl-splash-content-product-feature"},(0,e.createElement)("i",{className:"bb-icons-rl-check"}),(0,a.__)("Supports any WordPress Theme","buddyboss"))),(0,e.createElement)("a",{className:"bb-rl-button",onClick:e=>{e.preventDefault(),e.stopPropagation(),n&&n()}},(0,a.__)("Configure ReadyLaunch","buddyboss"))))))},CommunitySetupStep:({stepData:n,onNext:l,onPrevious:o,onSkip:c,currentStep:i,totalSteps:b,onSaveStep:d,onAutoSave:m,savedData:p={}})=>{const[u,v]=(0,t.useState)({...p}),[E,w]=(0,t.useState)({}),y=window.bbRlOnboarding?.stepOptions?.community_setup||{};return(0,t.useEffect)((()=>{const e={};Object.entries(y).forEach((([t,a])=>{void 0!==a.value?e[t]=a.value:void 0!==a.default&&(e[t]=a.default)}));const t={};Object.entries(p).forEach((([e,a])=>{""!==a&&null!=a&&(t[e]=a)})),v({...e,...t})}),[p,y]),(0,e.createElement)(r,{stepData:n,onNext:async()=>{(()=>{const e={};return Object.entries(y).forEach((([t,n])=>{!n.required||u[t]&&""!==u[t].trim()||(e[t]=n.label?(0,a.__)(`${n.label} is required`,"buddyboss"):(0,a.__)("This field is required","buddyboss"))})),w(e),0===Object.keys(e).length})()&&(d&&await d({step:"community_setup",data:u,timestamp:(new Date).toISOString()}),l&&l(u))},onPrevious:o,onSkip:c,isFirstStep:1===i,isLastStep:i===b-1,currentStep:i,totalSteps:b},(0,e.createElement)(s,{stepKey:"community_setup",stepOptions:y,initialData:u,onChange:e=>{v(e),w({})},onAutoSave:m}),Object.keys(E).length>0&&(0,e.createElement)("div",{className:"bb-rl-form-errors"},Object.entries(E).map((([t,a])=>(0,e.createElement)("p",{key:t,className:"bb-rl-error-message"},a)))))},SiteAppearanceStep:({stepData:a,onNext:n,onPrevious:l,onSkip:o,currentStep:c,totalSteps:i,onSaveStep:b,onAutoSave:d,savedData:m={}})=>{const[p,u]=(0,t.useState)({color_scheme:"default",site_layout:"fullwidth",...m}),v=window.bbRlOnboarding?.stepOptions?.site_appearance||{};return(0,t.useEffect)((()=>{const e={};Object.entries(v).forEach((([t,a])=>{void 0!==a.default&&(e[t]=a.default)})),u((t=>({...e,...t,...m})))}),[m,v]),(0,e.createElement)(r,{stepData:a,onNext:async()=>{b&&await b({step:"site_appearance",data:p,timestamp:(new Date).toISOString()}),n&&n(p)},onPrevious:l,onSkip:o,isFirstStep:!1,isLastStep:c===i-1,currentStep:c,totalSteps:i},(0,e.createElement)(s,{stepKey:"site_appearance",stepOptions:v,initialData:p,onChange:e=>{u(e)},onAutoSave:d}))},BrandingsStep:({stepData:a,onNext:n,onPrevious:o,onSkip:c,currentStep:i,totalSteps:b,onSaveStep:d,onAutoSave:m,savedData:p={}})=>{const[u,v]=(0,t.useState)({site_logo:"",favicon:"",brand_colors:"#e57e3a",...p}),E=window.bbRlOnboarding?.stepOptions?.brandings||{};return(0,t.useEffect)((()=>{const e={};Object.entries(E).forEach((([t,a])=>{void 0!==a.default&&(e[t]=a.default)})),v((t=>({...e,...t,...p})))}),[p,E]),(0,e.createElement)(r,{stepData:a,onNext:async()=>{d&&await d({step:"brandings",data:u,timestamp:(new Date).toISOString()}),n&&n(u)},onPrevious:o,onSkip:c,isFirstStep:!1,isLastStep:i===b-1,currentStep:i,totalSteps:b,rightPanelContent:(0,e.createElement)(l,{formData:u})},(0,e.createElement)(s,{stepKey:"brandings",stepOptions:E,initialData:u,onChange:e=>{v(e)},onAutoSave:m}))},PagesStep:({stepData:a,onNext:n,onPrevious:l,onSkip:o,currentStep:c,totalSteps:i,onSaveStep:b,onAutoSave:d,savedData:m={}})=>{const[p,u]=(0,t.useState)({create_essential_pages:!0,homepage_layout:"activity",...m}),v=window.bbRlOnboarding?.stepOptions?.pages||{};return(0,t.useEffect)((()=>{const e={};Object.entries(v).forEach((([t,a])=>{void 0!==a.default&&(e[t]=a.default)})),u((t=>({...e,...t,...m})))}),[m,v]),(0,e.createElement)(r,{stepData:a,onNext:async()=>{b&&await b({step:"pages",data:p,timestamp:(new Date).toISOString()}),n&&n(p)},onPrevious:l,onSkip:o,isFirstStep:!1,isLastStep:c===i-1,currentStep:c,totalSteps:i},(0,e.createElement)(s,{stepKey:"pages",stepOptions:v,initialData:p,onChange:e=>{u(e)},onAutoSave:d}))},SideMenusStep:({stepData:a,onNext:n,onPrevious:l,onSkip:o,currentStep:c,totalSteps:i,onSaveStep:b,onAutoSave:d,savedData:m={}})=>{const[p,u]=(0,t.useState)({enable_primary_menu:!0,enable_member_menu:!0,menu_style:"horizontal",...m}),v=window.bbRlOnboarding?.stepOptions?.side_menus||{};return(0,t.useEffect)((()=>{const e={};Object.entries(v).forEach((([t,a])=>{void 0!==a.default&&(e[t]=a.default)})),u((t=>({...e,...t,...m})))}),[m,v]),(0,e.createElement)(r,{stepData:a,onNext:async()=>{b&&await b({step:"side_menus",data:p,timestamp:(new Date).toISOString()}),n&&n(p)},onPrevious:l,onSkip:o,isFirstStep:!1,isLastStep:c===i-1,currentStep:c,totalSteps:i},(0,e.createElement)(s,{stepKey:"side_menus",stepOptions:v,initialData:p,onChange:e=>{u(e)},onAutoSave:d}))},WidgetsStep:({stepData:a,onNext:n,onPrevious:l,onSkip:o,currentStep:c,totalSteps:i,onSaveStep:b,onAutoSave:d,savedData:m={}})=>{const[p,u]=(0,t.useState)({enable_sidebar_widgets:!0,default_widgets:!0,widget_areas:"all",...m}),v=window.bbRlOnboarding?.stepOptions?.widgets||{};return(0,t.useEffect)((()=>{const e={};Object.entries(v).forEach((([t,a])=>{void 0!==a.default&&(e[t]=a.default)})),u((t=>({...e,...t,...m})))}),[m,v]),(0,e.createElement)(r,{stepData:a,onNext:async()=>{b&&await b({step:"widgets",data:p,timestamp:(new Date).toISOString()}),n&&n(p)},onPrevious:l,onSkip:o,isFirstStep:!1,isLastStep:c===i-1,currentStep:c,totalSteps:i},(0,e.createElement)(s,{stepKey:"widgets",stepOptions:v,initialData:p,onChange:e=>{u(e)},onAutoSave:d}))},FinishScreen:({stepData:r,onFinish:s,onViewSite:l})=>{const{title:o,description:c,image:i}=r,[b,d]=(0,t.useState)(!1),m=window.bbRlOnboarding?.assets?.assetsUrl?`${window.bbRlOnboarding.assets.assetsUrl}${i}`:"";return(0,e.createElement)("div",{className:"bb-rl-finish-screen bb-rl-fullscreen-finish"},(0,e.createElement)("div",{className:"bb-rl-finish-container"},(0,e.createElement)("div",{className:"bb-rl-finish-left"},(0,e.createElement)("div",{className:"bb-rl-finish-content"},(0,e.createElement)("div",{className:"bb-rl-success-animation"},(0,e.createElement)("div",{className:"bb-rl-checkmark"},(0,e.createElement)("svg",{className:"bb-rl-checkmark-circle",viewBox:"0 0 52 52"},(0,e.createElement)("circle",{className:"bb-rl-checkmark-circle-path",cx:"26",cy:"26",r:"25",fill:"none"})),(0,e.createElement)("svg",{className:"bb-rl-checkmark-check",viewBox:"0 0 52 52"},(0,e.createElement)("path",{className:"bb-rl-checkmark-check-path",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})))),(0,e.createElement)("div",{className:"bb-rl-finish-text"},(0,e.createElement)("h1",{className:"bb-rl-finish-title"},o),(0,e.createElement)("p",{className:"bb-rl-finish-description"},c),(0,e.createElement)("p",{className:"bb-rl-finish-subtitle"},(0,a.__)("Your community is now configured and ready for members to join!","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-setup-summary"},(0,e.createElement)("h3",null,(0,a.__)("What we've set up for you:","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-summary-grid"},(0,e.createElement)("div",{className:"bb-rl-summary-item"},(0,e.createElement)("div",{className:"bb-rl-summary-icon"},"🏠"),(0,e.createElement)("span",null,(0,a.__)("Community structure","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-summary-item"},(0,e.createElement)("div",{className:"bb-rl-summary-icon"},"🎨"),(0,e.createElement)("span",null,(0,a.__)("Site appearance","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-summary-item"},(0,e.createElement)("div",{className:"bb-rl-summary-icon"},"🏷️"),(0,e.createElement)("span",null,(0,a.__)("Branding elements","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-summary-item"},(0,e.createElement)("div",{className:"bb-rl-summary-icon"},"📄"),(0,e.createElement)("span",null,(0,a.__)("Essential pages","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-summary-item"},(0,e.createElement)("div",{className:"bb-rl-summary-icon"},"🧭"),(0,e.createElement)("span",null,(0,a.__)("Navigation menus","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-summary-item"},(0,e.createElement)("div",{className:"bb-rl-summary-icon"},"🔧"),(0,e.createElement)("span",null,(0,a.__)("Widget areas","buddyboss"))))),(0,e.createElement)("div",{className:"bb-rl-finish-actions"},(0,e.createElement)(n.Button,{className:"bb-rl-finish-button bb-rl-primary-action",onClick:()=>{l?l():window.open(window.bbRlOnboarding?.readylaunch?.site_url||window.location.origin,"_blank")},variant:"primary",size:"large"},(0,a.__)("View Your Site","buddyboss")),(0,e.createElement)(n.Button,{className:"bb-rl-finish-button bb-rl-secondary-action",onClick:()=>{window.location.href=window.bbRlOnboarding?.readylaunch?.admin_url+"admin.php?page=buddyboss-platform"},variant:"secondary",size:"large"},(0,a.__)("Go to Settings","buddyboss")),(0,e.createElement)(n.Button,{className:"bb-rl-finish-button bb-rl-close-action",onClick:async()=>{d(!0);try{s&&await s()}catch(e){console.error("Error finishing onboarding:",e)}finally{d(!1)}},variant:"link",disabled:b},b?(0,a.__)("Finishing...","buddyboss"):(0,a.__)("Close Setup","buddyboss"))))),(0,e.createElement)("div",{className:"bb-rl-finish-right"},(0,e.createElement)("div",{className:"bb-rl-finish-sidebar"},m&&(0,e.createElement)("div",{className:"bb-rl-finish-image"},(0,e.createElement)("img",{src:m,alt:o})),(0,e.createElement)("div",{className:"bb-rl-next-steps"},(0,e.createElement)("h3",null,(0,a.__)("What's next?","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-next-steps-list"},(0,e.createElement)("div",{className:"bb-rl-next-step"},(0,e.createElement)("div",{className:"bb-rl-step-number"},"1"),(0,e.createElement)("div",{className:"bb-rl-step-content"},(0,e.createElement)("h4",null,(0,a.__)("Invite members","buddyboss")),(0,e.createElement)("p",null,(0,a.__)("Start building your community by inviting the first members","buddyboss")))),(0,e.createElement)("div",{className:"bb-rl-next-step"},(0,e.createElement)("div",{className:"bb-rl-step-number"},"2"),(0,e.createElement)("div",{className:"bb-rl-step-content"},(0,e.createElement)("h4",null,(0,a.__)("Create content","buddyboss")),(0,e.createElement)("p",null,(0,a.__)("Add some initial posts and groups to get conversations started","buddyboss")))),(0,e.createElement)("div",{className:"bb-rl-next-step"},(0,e.createElement)("div",{className:"bb-rl-step-number"},"3"),(0,e.createElement)("div",{className:"bb-rl-step-content"},(0,e.createElement)("h4",null,(0,a.__)("Customize further","buddyboss")),(0,e.createElement)("p",null,(0,a.__)("Fine-tune your settings and explore advanced features","buddyboss")))))),(0,e.createElement)("div",{className:"bb-rl-support-resources"},(0,e.createElement)("h3",null,(0,a.__)("Need help?","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-resource-links"},(0,e.createElement)("a",{href:"https://www.buddyboss.com/resources/docs/",target:"_blank",rel:"noopener noreferrer",className:"bb-rl-resource-link"},"📚 ",(0,a.__)("Documentation","buddyboss")),(0,e.createElement)("a",{href:"https://www.buddyboss.com/contact/",target:"_blank",rel:"noopener noreferrer",className:"bb-rl-resource-link"},"💬 ",(0,a.__)("Get Support","buddyboss")),(0,e.createElement)("a",{href:"https://www.buddyboss.com/community/",target:"_blank",rel:"noopener noreferrer",className:"bb-rl-resource-link"},"👥 ",(0,a.__)("Join Community","buddyboss")))),(0,e.createElement)("div",{className:"bb-rl-thank-you"},(0,e.createElement)("p",null,(0,a.__)("Thank you for choosing BuddyBoss! We're excited to see what you build with your new community.","buddyboss")))))))}},c=({isOpen:r,onClose:s,onContinue:l,onSkip:c,onSaveStep:i})=>{const[b,d]=(0,t.useState)(0),[m,p]=(0,t.useState)({}),[u,v]=(0,t.useState)(!1),E=window.bbRlOnboarding?.steps||[],w=E.length,y=E[b]||{};(0,t.useEffect)((()=>{g()}),[]);const g=async()=>{const e={};window.bbRlOnboarding?.preferences&&Object.keys(window.bbRlOnboarding.preferences).forEach((t=>{e[t]=window.bbRlOnboarding.preferences[t]})),p(e);const t=window.bbRlOnboarding?.progress;t&&t.current_step>0&&t.current_step<w&&d(t.current_step)};(0,t.useEffect)((()=>(r&&y.component&&"SplashScreen"!==y.component?h():N(),()=>{N()})),[r,y.component]);const h=()=>{document.body.classList.add("bb-rl-fullscreen-mode"),document.body.style.overflow="hidden";const e=document.getElementById("wpadminbar");e&&(e.style.display="none");const t=document.getElementById("adminmenumain");t&&(t.style.display="none");const a=document.getElementById("wpfooter");a&&(a.style.display="none");const n=document.getElementById("wpwrap");n&&(n.style.marginLeft="0")},N=()=>{document.body.classList.remove("bb-rl-fullscreen-mode"),document.body.style.overflow="";const e=document.getElementById("wpadminbar");e&&(e.style.display="");const t=document.getElementById("adminmenumain");t&&(t.style.display="");const a=document.getElementById("wpfooter");a&&(a.style.display="");const n=document.getElementById("wpwrap");n&&(n.style.marginLeft="")},_=async(e,t={})=>{try{const a=await fetch(window.bbRlOnboarding?.ajaxUrl||window.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"rl_onboarding_save_step_progress",nonce:window.bbRlOnboarding?.nonce||"",step:e,data:JSON.stringify({step_key:y.key,form_data:t,timestamp:(new Date).toISOString()})})}),n=await a.json();return n.success?(window.bbRlOnboarding?.progress&&(window.bbRlOnboarding.progress=n.data.progress),!0):(console.error("Error saving step progress:",n.data?.message||"Unknown error"),!1)}catch(e){return console.error("Error saving step progress:",e),!1}},f=async e=>{try{const t=window.bbRlOnboarding?.ajaxUrl||window.ajaxurl,a=window.bbRlOnboarding?.nonce||"",n=window.bbRlOnboarding?.wizardId||"",r=n+"_save_preferences";if(console.log("AutoSave Debug:",{ajaxUrl:t,nonce:a,wizardId:n,action:r,preferences:e}),!t)return console.error("AJAX URL not available"),!1;if(!a)return console.error("Nonce not available"),!1;const s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:r,nonce:a,preferences:JSON.stringify(e)})});if(console.log("Response status:",s.status),console.log("Response ok:",s.ok),!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const l=await s.json();return console.log("Response data:",l),l.success?(window.bbRlOnboarding?.preferences&&(window.bbRlOnboarding.preferences={...window.bbRlOnboarding.preferences,...e}),!0):(console.error("Error saving preferences:",l.data?.message||"Unknown error"),!1)}catch(e){return console.error("Error saving preferences:",e),console.error("Error details:",e.message),!1}},S=async(e={})=>{v(!0);try{if(await _(b,e)){const t=y.key;p((a=>({...a,[t]:e}))),await f({[t]:e}),b>=w-1?await C(e):d((e=>e+1))}}catch(e){console.error("Error handling next step:",e)}finally{v(!1)}},k=()=>{b>0&&d((e=>e-1))},O=async()=>{v(!0);try{await _(b,{skipped:!0}),b<w-1?d((e=>e+1)):await C()}catch(e){console.error("Error skipping step:",e)}finally{v(!1)}},C=async(e={})=>{v(!0);try{const t={...m};e&&Object.keys(e).length>0&&(t[y.key]=e);const a=await fetch(window.bbRlOnboarding?.ajaxUrl||window.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"rl_onboarding_complete",nonce:window.bbRlOnboarding?.nonce||"",finalSettings:JSON.stringify(t)})}),n=await a.json();if(n.success){console.log("Onboarding completed successfully:",n.data);const e=new CustomEvent("bb_rl_onboarding_completed",{detail:{data:n.data,finalSettings:t}});document.dispatchEvent(e),s&&s(),setTimeout((()=>{window.location.href=window.bbRlOnboarding?.dashboardUrl||"/wp-admin/"}),1e3)}else console.error("Error completing onboarding:",n.data?.message||"Unknown error")}catch(e){console.error("Error completing onboarding:",e)}finally{v(!1)}},R=()=>{if(!y||!y.component)return(0,e.createElement)("div",{className:"bb-rl-error-state"},(0,e.createElement)("h2",null,(0,a.__)("Step Not Found","buddyboss")),(0,e.createElement)("p",null,(0,a.__)("The current step could not be loaded. Please try refreshing the page.","buddyboss")));if(!(t=y.component)||"string"!=typeof t||!o.hasOwnProperty(t))return(0,e.createElement)("div",{className:"bb-rl-error-state"},(0,e.createElement)("h2",null,(0,a.__)("Component Not Found","buddyboss")),(0,e.createElement)("p",null,(0,a.__)("Component","buddyboss"),' "',y.component,'" ',(0,a.__)("not found in registry.","buddyboss")));var t;const n=(e=>{if(!e||"string"!=typeof e)return console.warn("Invalid component name provided to getStepComponent:",e),null;return o[e]||(console.warn(`Component '${e}' not found in step registry. Available components:`,Object.keys(o)),null)})(y.component);return n?"SplashScreen"===y.component?(0,e.createElement)(n,{stepData:y,onNext:S,onSkip:O}):"FinishScreen"===y.component?(0,e.createElement)(n,{stepData:y,onFinish:C,onViewSite:()=>{window.open(window.bbRlOnboarding?.readylaunch?.site_url||window.location.origin,"_blank")}}):(0,e.createElement)(n,{stepData:y,onNext:S,onPrevious:k,onSkip:O,currentStep:b,totalSteps:w,onSaveStep:i,onAutoSave:f,isProcessing:u,savedData:m[y.key]||{}}):(0,e.createElement)("div",{className:"bb-rl-error-state"},(0,e.createElement)("h2",null,(0,a.__)("Component Load Error","buddyboss")),(0,e.createElement)("p",null,(0,a.__)("Failed to load the step component.","buddyboss")))};return r?"SplashScreen"===y.component?(0,e.createElement)("div",{className:"bb-rl-onboarding-overlay"},(0,e.createElement)("div",{className:"bb-rl-onboarding-modal bb-rl-special-step"},(0,e.createElement)("div",{className:"bb-rl-modal-header"},(0,e.createElement)("div",{className:"bb-rl-modal-header-content"},(0,e.createElement)("h2",{className:"bb-rl-modal-title"},y?.title),(0,e.createElement)("p",{className:"bb-rl-modal-description"},y?.description)),(0,e.createElement)(n.Button,{className:"bb-rl-close-button",onClick:()=>{N(),s&&s()},label:(0,a.__)("Close","buddyboss"),disabled:u},(0,e.createElement)("span",{className:"bb-icons-rl-x"}))),(0,e.createElement)("div",{className:"bb-rl-modal-content"},R()))):(0,e.createElement)("div",{className:"bb-rl-onboarding-overlay bb-rl-fullscreen"},(0,e.createElement)("div",{className:"bb-rl-onboarding-modal bb-rl-fullscreen-modal"},(0,e.createElement)("div",{className:"bb-rl-fullscreen-content"},R()))):null},i=()=>{const[a,n]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{window.bbRlOnboarding&&window.bbRlOnboarding.shouldShow&&n(!0)}),[]),(0,e.createElement)(c,{isOpen:a,onClose:()=>{n(!1)},onContinue:async e=>{console.log("Selected option:",e);try{const t=await fetch(window.bbRlOnboarding?.ajaxUrl||window.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:window.bbRlOnboarding.wizardId+"_complete",nonce:window.bbRlOnboarding?.nonce||"",selectedOption:e,skipped:"0"})}),a=await t.json();if(a.success){console.log("Onboarding completed successfully:",a.data);const t=new CustomEvent("bb_rl_onboarding_completed",{detail:{selectedOption:e,data:a.data}});document.dispatchEvent(t),"readylaunch"===e?window.location.href=window.location.origin+"/wp-admin/admin.php?page=buddyboss-platform&tab=buddyboss_readylaunch":"buddyboss-theme-buy"===e?window.open("https://www.buddyboss.com/theme/","_blank"):n(!1)}else console.error("Error completing onboarding:",a.data?.message||"Unknown error")}catch(e){console.error("Error completing onboarding:",e)}},onSkip:async()=>{try{const e=await fetch(window.bbRlOnboarding?.ajaxUrl||window.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:window.bbRlOnboarding.wizardId+"_complete",nonce:window.bbRlOnboarding?.nonce||"",selectedOption:"",skipped:"1"})}),t=await e.json();if(t.success){console.log("Onboarding skipped successfully");const e=new CustomEvent("bb_rl_onboarding_skipped",{detail:{data:t.data}});document.dispatchEvent(e),n(!1)}else console.error("Error skipping onboarding:",t.data?.message||"Unknown error")}catch(e){console.error("Error skipping onboarding:",e)}},onSaveStep:async e=>{try{const t=await fetch(window.bbRlOnboarding?.ajaxUrl||window.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:window.bbRlOnboarding.wizardId+"_save_step",nonce:window.bbRlOnboarding?.nonce||"",stepData:JSON.stringify(e)})}),a=await t.json();return a.success?(console.log("Step saved successfully:",a.data),!0):(console.error("Error saving step:",a.data?.message||"Unknown error"),!1)}catch(e){return console.error("Error saving step:",e),!1}}})};document.addEventListener("DOMContentLoaded",(()=>{if(window.bbRlOnboarding){const a=document.createElement("div");a.id="bb-rl-onboarding-root",document.body.appendChild(a),(0,t.render)((0,e.createElement)(i,null),a)}}))})();