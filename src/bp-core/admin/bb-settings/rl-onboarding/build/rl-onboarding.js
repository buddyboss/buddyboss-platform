(()=>{"use strict";const e=window.React,t=window.wp.element,a=window.wp.i18n,n=window.wp.components,o=({isOpen:o,onClose:l,onContinue:s,onSkip:r,onSaveStep:c})=>{const[i,d]=(0,t.useState)(0),[b,m]=(0,t.useState)(null),[u,y]=(0,t.useState)(!1),[p,g]=(0,t.useState)(!1),[E,w]=(0,t.useState)({siteName:"",siteDescription:"",activityFeed:!0,userGroups:!0,privateMessages:!0,memberDirectory:!0,primaryColor:"#e57e3a",layoutStyle:"default"}),h=[{title:(0,a.__)("Welcome to BuddyBoss","buddyboss"),subtitle:(0,a.__)("Let's bring your community to life by choosing the look and feel that matches your vision.","buddyboss"),content:(0,e.createElement)("div",{className:"bb-rl-onboarding-step"},(0,e.createElement)("div",{className:"bb-rl-onboarding-options"},(0,e.createElement)("div",{className:"bb-rl-option-card"},(0,e.createElement)("div",{className:"bb-rl-option-header"},(0,e.createElement)("h3",null,(0,a.__)("BuddyBoss Theme","buddyboss")),(0,e.createElement)("p",{className:"bb-rl-option-subtitle"},(0,a.__)("Customizable WordPress theme","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-option-preview"},(0,e.createElement)("img",{src:window.bbRlOnboarding?.assets?.buddybossThemePreview||"",alt:"BuddyBoss Theme Preview"})),(0,e.createElement)("div",{className:"bb-rl-option-description"},(0,a.__)("Our crafted theme made just for the BuddyBoss Platform giving you full control to design a community that feels truly yours.","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-option-features"},(0,e.createElement)("div",{className:"bb-rl-feature"},(0,e.createElement)("span",{className:"bb-rl-feature-icon"},"✓"),(0,a.__)("Advanced customization","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-feature"},(0,e.createElement)("span",{className:"bb-rl-feature-icon"},"✓"),(0,a.__)("Deep integration support","buddyboss"))),(0,e.createElement)(n.Button,{className:"bb-rl-option-button bb-rl-button-secondary",onClick:()=>_("buddyboss-theme"),disabled:p},(0,a.__)("Configure BuddyBoss Theme","buddyboss")),(0,e.createElement)(n.Button,{className:"bb-rl-option-button bb-rl-button-primary",onClick:()=>_("buddyboss-theme-buy"),disabled:p},(0,a.__)("Buy Theme","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-option-card"},(0,e.createElement)("div",{className:"bb-rl-option-header"},(0,e.createElement)("h3",null,(0,a.__)("ReadyLaunch","buddyboss")),(0,e.createElement)("p",{className:"bb-rl-option-subtitle"},(0,a.__)("Community features for any WordPress theme","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-option-preview"},(0,e.createElement)("img",{src:window.bbRlOnboarding?.assets?.currentThemePreview||"",alt:"ReadyLaunch Preview"})),(0,e.createElement)("div",{className:"bb-rl-option-description"},(0,a.__)("Get your community up and running in no time with our easy to use template system.","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-option-features"},(0,e.createElement)("div",{className:"bb-rl-feature"},(0,e.createElement)("span",{className:"bb-rl-feature-icon"},"✓"),(0,a.__)("Minimal configuration","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-feature"},(0,e.createElement)("span",{className:"bb-rl-feature-icon"},"✓"),(0,a.__)("Supports any WordPress Theme","buddyboss"))),(0,e.createElement)(n.Button,{className:"bb-rl-option-button bb-rl-button-primary",onClick:()=>_("readylaunch"),disabled:p},p&&"readylaunch"===b?(0,a.__)("Processing...","buddyboss"):(0,a.__)("Configure ReadyLaunch","buddyboss")))))}],_=async e=>{if(m(e),g(!0),c){const t={step:"welcome",selected_option:e,timestamp:(new Date).toISOString()};await c(t)}"readylaunch"===e?(y(!0),v(),g(!1)):(s&&await s(e),g(!1))},v=()=>{document.body.classList.add("bb-rl-fullscreen-mode");const e=document.getElementById("wpadminbar");e&&(e.style.display="none");const t=document.getElementById("adminmenumain");t&&(t.style.display="none");const a=document.getElementById("wpfooter");a&&(a.style.display="none");const n=document.getElementById("wpwrap");n&&(n.style.marginLeft="0")},f=()=>{document.body.classList.remove("bb-rl-fullscreen-mode");const e=document.getElementById("wpadminbar");e&&(e.style.display="");const t=document.getElementById("adminmenumain");t&&(t.style.display="");const a=document.getElementById("wpfooter");a&&(a.style.display="");const n=document.getElementById("wpwrap");n&&(n.style.marginLeft="")},N=()=>{u&&f(),l&&l()},k=(e,t)=>{w((a=>({...a,[e]:t})))};if(!o)return null;if(u)return(0,e.createElement)("div",{className:"bb-rl-onboarding-overlay bb-rl-fullscreen"},(0,e.createElement)("div",{className:"bb-rl-onboarding-modal bb-rl-fullscreen-modal"},(0,e.createElement)("div",{className:"bb-rl-configuration-screen"},(0,e.createElement)("div",{className:"bb-rl-config-header"},(0,e.createElement)("div",{className:"bb-rl-config-header-left"},(0,e.createElement)(n.Button,{className:"bb-rl-back-button",onClick:()=>{y(!1),m(null),f()},disabled:p},"← ",(0,a.__)("Back","buddyboss")),(0,e.createElement)("h1",null,(0,a.__)("Configure ReadyLaunch","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-config-header-right"},(0,e.createElement)(n.Button,{className:"bb-rl-finish-button",onClick:async()=>{if(g(!0),c){const e={step:"configuration",readylaunch_settings:{theme_mode:"light",enabled_pages:["activity","members","groups"],config_data:E},timestamp:(new Date).toISOString()};await c(e)}s&&await s(b||""),g(!1),N()},disabled:p},p?(0,a.__)("Processing...","buddyboss"):(0,a.__)("Finish Setup","buddyboss")))),(0,e.createElement)("div",{className:"bb-rl-config-content"},(0,e.createElement)("div",{className:"bb-rl-config-sidebar"},(0,e.createElement)("div",{className:"bb-rl-config-section"},(0,e.createElement)("h3",null,(0,a.__)("Site Information","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-config-field"},(0,e.createElement)("label",null,(0,a.__)("Site Name","buddyboss")),(0,e.createElement)("input",{type:"text",value:E.siteName,onChange:e=>k("siteName",e.target.value),placeholder:(0,a.__)("Enter your site name","buddyboss")})),(0,e.createElement)("div",{className:"bb-rl-config-field"},(0,e.createElement)("label",null,(0,a.__)("Site Description","buddyboss")),(0,e.createElement)("textarea",{value:E.siteDescription,onChange:e=>k("siteDescription",e.target.value),placeholder:(0,a.__)("Enter your site description","buddyboss")}))),(0,e.createElement)("div",{className:"bb-rl-config-section"},(0,e.createElement)("h3",null,(0,a.__)("Community Features","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-config-field"},(0,e.createElement)("label",{className:"bb-rl-checkbox-label"},(0,e.createElement)("input",{type:"checkbox",checked:E.activityFeed,onChange:e=>k("activityFeed",e.target.checked)}),(0,a.__)("Enable Activity Feed","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-config-field"},(0,e.createElement)("label",{className:"bb-rl-checkbox-label"},(0,e.createElement)("input",{type:"checkbox",checked:E.userGroups,onChange:e=>k("userGroups",e.target.checked)}),(0,a.__)("Enable User Groups","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-config-field"},(0,e.createElement)("label",{className:"bb-rl-checkbox-label"},(0,e.createElement)("input",{type:"checkbox",checked:E.privateMessages,onChange:e=>k("privateMessages",e.target.checked)}),(0,a.__)("Enable Private Messages","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-config-field"},(0,e.createElement)("label",{className:"bb-rl-checkbox-label"},(0,e.createElement)("input",{type:"checkbox",checked:E.memberDirectory,onChange:e=>k("memberDirectory",e.target.checked)}),(0,a.__)("Enable Member Directory","buddyboss")))),(0,e.createElement)("div",{className:"bb-rl-config-section"},(0,e.createElement)("h3",null,(0,a.__)("Appearance","buddyboss")),(0,e.createElement)("div",{className:"bb-rl-config-field"},(0,e.createElement)("label",null,(0,a.__)("Primary Color","buddyboss")),(0,e.createElement)("input",{type:"color",value:E.primaryColor,onChange:e=>k("primaryColor",e.target.value)})),(0,e.createElement)("div",{className:"bb-rl-config-field"},(0,e.createElement)("label",null,(0,a.__)("Layout Style","buddyboss")),(0,e.createElement)("select",{value:E.layoutStyle,onChange:e=>k("layoutStyle",e.target.value)},(0,e.createElement)("option",{value:"default"},(0,a.__)("Default","buddyboss")),(0,e.createElement)("option",{value:"boxed"},(0,a.__)("Boxed","buddyboss")),(0,e.createElement)("option",{value:"wide"},(0,a.__)("Wide","buddyboss")))))),(0,e.createElement)("div",{className:"bb-rl-config-preview"},(0,e.createElement)("div",{className:"bb-rl-preview-header"},(0,e.createElement)("h3",null,(0,a.__)("Live Preview","buddyboss")),(0,e.createElement)("p",{className:"bb-rl-preview-note"},(0,a.__)("Preview will update based on your configuration","buddyboss"))),(0,e.createElement)("div",{className:"bb-rl-preview-content"},(0,e.createElement)("iframe",{src:window.location.origin+"?bb_rl_preview=1",frameBorder:"0",className:"bb-rl-preview-iframe",title:(0,a.__)("Site Preview","buddyboss")})))))));const C=h[i];return(0,e.createElement)("div",{className:"bb-rl-onboarding-overlay"},(0,e.createElement)("div",{className:"bb-rl-onboarding-modal"},(0,e.createElement)("div",{className:"bb-rl-onboarding-header"},(0,e.createElement)("div",{className:"bb-rl-logo"},(0,e.createElement)("img",{src:window.bbRlOnboarding?.assets?.logo||"",alt:"BuddyBoss"})),(0,e.createElement)("div",{className:"bb-rl-header-actions"},(0,e.createElement)(n.Button,{className:"bb-rl-skip-button",onClick:()=>{r&&r()},disabled:p},(0,a.__)("Skip for now","buddyboss")),(0,e.createElement)(n.Button,{className:"bb-rl-close-button",onClick:N,label:(0,a.__)("Close","buddyboss"),disabled:p},(0,e.createElement)("span",{className:"dashicons dashicons-no-alt"})))),(0,e.createElement)("div",{className:"bb-rl-onboarding-content"},(0,e.createElement)("div",{className:"bb-rl-onboarding-title"},(0,e.createElement)("h1",null,C.title),C.subtitle&&(0,e.createElement)("p",{className:"bb-rl-subtitle"},C.subtitle)),(0,e.createElement)("div",{className:"bb-rl-onboarding-body"},C.content))))},l=()=>{const[a,n]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{window.bbRlOnboarding&&window.bbRlOnboarding.shouldShow&&n(!0)}),[]),(0,e.createElement)(o,{isOpen:a,onClose:()=>{n(!1)},onContinue:async e=>{console.log("Selected option:",e);try{const t=await fetch(window.bbRlOnboarding?.ajaxUrl||window.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:window.bbRlOnboarding.wizardId+"_complete",nonce:window.bbRlOnboarding?.nonce||"",selectedOption:e,skipped:"0"})}),a=await t.json();if(a.success){console.log("Onboarding completed successfully:",a.data);const t=new CustomEvent("bb_rl_onboarding_completed",{detail:{selectedOption:e,data:a.data}});document.dispatchEvent(t),"readylaunch"===e?window.location.href=window.location.origin+"/wp-admin/admin.php?page=buddyboss-platform&tab=buddyboss_readylaunch":"buddyboss-theme-buy"===e?window.open("https://www.buddyboss.com/theme/","_blank"):n(!1)}else console.error("Error completing onboarding:",a.data?.message||"Unknown error")}catch(e){console.error("Error completing onboarding:",e)}},onSkip:async()=>{try{const e=await fetch(window.bbRlOnboarding?.ajaxUrl||window.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:window.bbRlOnboarding.wizardId+"_complete",nonce:window.bbRlOnboarding?.nonce||"",selectedOption:"",skipped:"1"})}),t=await e.json();if(t.success){console.log("Onboarding skipped successfully");const e=new CustomEvent("bb_rl_onboarding_skipped",{detail:{data:t.data}});document.dispatchEvent(e),n(!1)}else console.error("Error skipping onboarding:",t.data?.message||"Unknown error")}catch(e){console.error("Error skipping onboarding:",e)}},onSaveStep:async e=>{try{const t=await fetch(window.bbRlOnboarding?.ajaxUrl||window.ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:window.bbRlOnboarding.wizardId+"_save_step",nonce:window.bbRlOnboarding?.nonce||"",stepData:JSON.stringify(e)})}),a=await t.json();return a.success?(console.log("Step saved successfully:",a.data),!0):(console.error("Error saving step:",a.data?.message||"Unknown error"),!1)}catch(e){return console.error("Error saving step:",e),!1}}})};document.addEventListener("DOMContentLoaded",(()=>{if(window.bbRlOnboarding){const a=document.createElement("div");a.id="bb-rl-onboarding-root",document.body.appendChild(a),(0,t.render)((0,e.createElement)(l,null),a)}}))})();