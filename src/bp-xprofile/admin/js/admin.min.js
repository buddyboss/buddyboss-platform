function add_option(e){var t=document.getElementById(e+"_more"),o=document.getElementById(e+"_option_number").value,i=document.createElement("div"),n=document.createElement("span"),r="socialnetworks"!==e?document.createElement("input"):document.createElement("select"),d=document.createElement("label"),l=document.createElement("input"),s=document.createTextNode("Default Value"),a=document.createTextNode("Delete"),u=document.createElement("div"),c=0,p=document.createElement("a");if(i.setAttribute("id",e+"_div"+o),i.setAttribute("class","bp-option sortable"),n.setAttribute("class","bp-option-icon grabber"),"gender"===e)r.setAttribute("type","text"),r.setAttribute("name",e+"_option["+o+"_other]"),r.setAttribute("id",e+"_option"+o);else if("socialnetworks"===e){r.setAttribute("name",e+"_option["+o+"]"),r.setAttribute("id",e+"_option"+o),r.setAttribute("class","select-social-networks");var f=document.createElement("option");for(f.text="Select",f.setAttribute("value",""),r.add(f),c=0;c<XProfileAdmin.social_networks_provider.length;c++){var y=document.createElement("option");y.text=XProfileAdmin.social_networks_provider[c],y.setAttribute("value",XProfileAdmin.social_networks_provider_value[c]),r.add(y)}}else r.setAttribute("type","text"),r.setAttribute("name",e+"_option["+o+"]"),r.setAttribute("id",e+"_option"+o);"checkbox"===e||"multiselectbox"===e?(l.setAttribute("type","checkbox"),l.setAttribute("name","isDefault_"+e+"_option["+o+"]")):"gender"!==e&&(l.setAttribute("type","radio"),l.setAttribute("name","isDefault_"+e+"_option")),l.setAttribute("value",o),p.setAttribute("href",'javascript:hide("'+e+"_div"+o+'")'),p.setAttribute("class","delete"),p.appendChild(a),u.setAttribute("class","delete-button"),u.appendChild(p),"gender"===e?(s=document.createTextNode(" Other"),d.appendChild(s)):"socialnetworks"===e||(d.appendChild(document.createTextNode(" ")),d.appendChild(l),d.appendChild(document.createTextNode(" ")),d.appendChild(s),d.appendChild(document.createTextNode(" "))),i.appendChild(n),i.appendChild(document.createTextNode(" ")),i.appendChild(r),"socialnetworks"!==e&&i.appendChild(d),i.appendChild(u),t.appendChild(i),enableSortableFieldOptions(e),document.getElementById(e+"_option"+o).focus(),"socialnetworks"===e&&o===XProfileAdmin.social_networks_provider_count&&jQuery(".social_networks_add_more").hide(),o++,document.getElementById(e+"_option_number").value=o}function show_options(e){var t,o,i;if(i=jQuery('body #wpwrap #wpcontent #wpbody #wpbody-content .wrap #bp-xprofile-add-field #poststuff #post-body .postbox-container #submitdiv .inside #submitcomment #major-publishing-actions #publishing-action :input[type="submit"]'),"gender"===e)i.prop("disabled",!0),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"xprofile_check_gender_added_previously",type:"gender",referer:jQuery("#bp-xprofile-add-field").find('input[name="_wp_http_referer"]').val()},success:function(n){var r=jQuery.parseJSON(n);if("added"===r.status){for(alert(r.message),jQuery("#fieldtype").val(""),jQuery("#fieldtype").val("textbox"),e="textbox",o=0;o<XProfileAdmin.do_settings_section_field_types.length;o++)document.getElementById(XProfileAdmin.do_settings_section_field_types[o]).style.display="none";XProfileAdmin.do_settings_section_field_types.indexOf(e)>=0?(document.getElementById(e).style.display="",t="on"):(jQuery("#do-autolink").val(""),t=""),""===XProfileAdmin.do_autolink&&jQuery("#do-autolink").val(t),jQuery(document).trigger("bp-xprofile-show-options",e)}else{for(o=0;o<XProfileAdmin.do_settings_section_field_types.length;o++)document.getElementById(XProfileAdmin.do_settings_section_field_types[o]).style.display="none";XProfileAdmin.do_settings_section_field_types.indexOf(e)>=0?(document.getElementById(e).style.display="",t="on"):(jQuery("#do-autolink").val(""),t=""),""===XProfileAdmin.do_autolink&&jQuery("#do-autolink").val(t),jQuery(document).trigger("bp-xprofile-show-options",e)}i.prop("disabled",!1)},error:function(){i.prop("disabled",!1)}});else if("membertypes"===e)i.prop("disabled",!0),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"xprofile_check_member_type_added_previously",type:"membertypes",referer:jQuery("#bp-xprofile-add-field").find('input[name="_wp_http_referer"]').val()},success:function(n){var r=jQuery.parseJSON(n);if("added"===r.status){for(alert(r.message),jQuery("#fieldtype").val(""),jQuery("#fieldtype").val("textbox"),e="textbox",o=0;o<XProfileAdmin.do_settings_section_field_types.length;o++)document.getElementById(XProfileAdmin.do_settings_section_field_types[o]).style.display="none";XProfileAdmin.do_settings_section_field_types.indexOf(e)>=0?(document.getElementById(e).style.display="",t="on"):(jQuery("#do-autolink").val(""),t=""),""===XProfileAdmin.do_autolink&&jQuery("#do-autolink").val(t),jQuery(document).trigger("bp-xprofile-show-options",e)}else{for(o=0;o<XProfileAdmin.do_settings_section_field_types.length;o++)document.getElementById(XProfileAdmin.do_settings_section_field_types[o]).style.display="none";XProfileAdmin.do_settings_section_field_types.indexOf(e)>=0?(document.getElementById(e).style.display="",t="on"):(jQuery("#do-autolink").val(""),t=""),""===XProfileAdmin.do_autolink&&jQuery("#do-autolink").val(t),jQuery(document).trigger("bp-xprofile-show-options",e)}i.prop("disabled",!1)},error:function(){i.prop("disabled",!1)}});else if("socialnetworks"===e)i.prop("disabled",!0),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"xprofile_check_social_networks_added_previously",type:"socialnetworks",referer:jQuery("#bp-xprofile-add-field").find('input[name="_wp_http_referer"]').val()},success:function(n){var r=jQuery.parseJSON(n);if("added"===r.status){for(alert(r.message),jQuery("#fieldtype").val(""),jQuery("#fieldtype").val("textbox"),e="textbox",o=0;o<XProfileAdmin.do_settings_section_field_types.length;o++)document.getElementById(XProfileAdmin.do_settings_section_field_types[o]).style.display="none";XProfileAdmin.do_settings_section_field_types.indexOf(e)>=0?(document.getElementById(e).style.display="",t="on"):(jQuery("#do-autolink").val(""),t=""),""===XProfileAdmin.do_autolink&&jQuery("#do-autolink").val(t),jQuery(document).trigger("bp-xprofile-show-options",e)}else{for(o=0;o<XProfileAdmin.do_settings_section_field_types.length;o++)document.getElementById(XProfileAdmin.do_settings_section_field_types[o]).style.display="none";XProfileAdmin.do_settings_section_field_types.indexOf(e)>=0?(document.getElementById(e).style.display="",t="on"):(jQuery("#do-autolink").val(""),t=""),""===XProfileAdmin.do_autolink&&jQuery("#do-autolink").val(t),jQuery(document).trigger("bp-xprofile-show-options",e)}i.prop("disabled",!1)},error:function(){i.prop("disabled",!1)}});else{for(o=0;o<XProfileAdmin.do_settings_section_field_types.length;o++)document.getElementById(XProfileAdmin.do_settings_section_field_types[o]).style.display="none";XProfileAdmin.do_settings_section_field_types.indexOf(e)>=0?(document.getElementById(e).style.display="",t="on"):(jQuery("#do-autolink").val(""),t=""),""===XProfileAdmin.do_autolink&&jQuery("#do-autolink").val(t),jQuery(document).trigger("bp-xprofile-show-options",e)}}function hide(e){if(!document.getElementById(e))return!1;document.getElementById(e).style.display="none";var t=e.replace("div","option");document.getElementById(t).value=""}function toggle_no_member_type_notice(){var e=jQuery("input.member-type-selector");if(e.length){var t=!1;e.each(function(){if(jQuery(this).is(":checked"))return t=!0,!1}),t?jQuery("p.member-type-none-notice").addClass("hide"):jQuery("p.member-type-none-notice").removeClass("hide")}}function enableSortableFieldOptions(){jQuery(".bp-options-box").sortable({cursor:"move",items:"div.sortable",tolerance:"intersect",axis:"y"}),jQuery(".sortable, .sortable span").css("cursor","move")}function destroySortableFieldOptions(){jQuery(".bp-options-box").sortable("destroy"),jQuery(".sortable, .sortable span").css("cursor","default")}function titleHint(e){e=e||"title";var t=jQuery("#"+e),o=jQuery("#"+e+"-prompt-text");""===t.val()?o.removeClass("screen-reader-text"):o.addClass("screen-reader-text"),o.click(function(){jQuery(this).addClass("screen-reader-text"),t.focus()}),t.blur(function(){""===this.value&&o.removeClass("screen-reader-text")}).focus(function(){o.addClass("screen-reader-text")}).keydown(function(e){o.addClass("screen-reader-text"),jQuery(this).unbind(e)})}function sortFieldOptions(e){var t=[],o=e.val(),i=e.closest(".bp-options-box");i.find('input[type="text"]').each(function(){t.push(jQuery(this).val())}),"asc"===o?t.sort():"desc"===o&&(t.sort(),t.reverse()),i.find('input[type="text"]').each(function(e){jQuery(this).val(t[e])})}var fixHelper=function(e,t){return t.children().each(function(){jQuery(this).width(jQuery(this).width())}),t};jQuery(document).ready(function(){jQuery("#bp-xprofile-add-field #title").focus(),toggle_no_member_type_notice(),jQuery("input.member-type-selector").on("change",function(){toggle_no_member_type_notice()}),jQuery("a.ajax-option-delete").on("click",function(){var e=this.id.split("-");e=e[1],jQuery.post(ajaxurl,{action:"xprofile_delete_option",cookie:encodeURIComponent(document.cookie),_wpnonce:jQuery("input#_wpnonce").val(),option_id:e},function(){})}),jQuery('[id^="sort_order_"]').change(function(){"custom"!==jQuery(this).val()?("move"===jQuery(".sortable, .sortable span").attr("cursor")&&destroySortableFieldOptions(),sortFieldOptions(jQuery(this))):enableSortableFieldOptions(jQuery("#fieldtype :selected").val())}),jQuery("ul#field-group-tabs").show(),jQuery("ul#field-group-tabs").sortable({cursor:"move",axis:"x,y",opacity:1,items:"li",tolerance:"intersect",update:function(){jQuery.post(ajaxurl,{action:"xprofile_reorder_groups",cookie:encodeURIComponent(document.cookie),_wpnonce_reorder_groups:jQuery("input#_wpnonce_reorder_groups").val(),group_order:jQuery(this).sortable("serialize")},function(){})}}).disableSelection(),jQuery("fieldset.field-group").sortable({cursor:"move",opacity:.7,items:"fieldset.sortable",tolerance:"pointer",update:function(){jQuery.post(ajaxurl,{action:"xprofile_reorder_fields",cookie:encodeURIComponent(document.cookie),_wpnonce_reorder_fields:jQuery("input#_wpnonce_reorder_fields").val(),field_order:jQuery(this).sortable("serialize"),field_group_id:jQuery(this).attr("id")},function(){})}}).disableSelection(),enableSortableFieldOptions(jQuery("#fieldtype :selected").val()),titleHint("title");var e=jQuery('input[name="date_format"]'),t=jQuery("#date-format-custom-value"),o=jQuery("#date-format-custom-sample");e.click(function(e){switch(e.target.value){case"elapsed":t.val(""),o.html("");break;case"custom":break;default:t.val(e.target.value),o.html(jQuery(e.target).siblings(".date-format-label").html())}});var i=jQuery("#date-format-custom");t.focus(function(){i.prop("checked","checked")});var n=jQuery("#date-format-custom-spinner");t.change(function(e){n.addClass("is-active"),jQuery.post(ajaxurl,{action:"date_format",date:e.target.value},function(e){n.removeClass("is-active"),o.html(e)})});var r;!function(e){r=jQuery("ul:first li",e).droppable({accept:".connectedSortable fieldset:not(.primary_field)",hoverClass:"ui-state-hover",activeClass:"ui-state-acceptable",touch:"pointer",tolerance:"pointer",drop:function(t,o){var i=jQuery(this),n=jQuery(i.find("a").attr("href")).find(".connectedSortable");jQuery(i).removeClass("drop-candidate"),o.draggable.hide("slow",function(){e.tabs("option","active",r.index(i)),jQuery(this).appendTo(n).show("slow").animate({opacity:"1"},500),n=jQuery(i.find("a").attr("href")).find(".connectedSortable"),jQuery(n).find("p.nofields").hide("slow"),jQuery.post(ajaxurl,{action:"xprofile_reorder_fields",cookie:encodeURIComponent(document.cookie),_wpnonce_reorder_fields:jQuery("input#_wpnonce_reorder_fields").val(),field_order:jQuery(n).sortable("serialize"),field_group_id:jQuery(n).attr("id")},function(){})})},over:function(){jQuery(this).addClass("drop-candidate")},out:function(){jQuery(this).removeClass("drop-candidate")}})}(jQuery("#tabs").tabs()),jQuery(".delete-profile-field-group").click(function(){return confirm(XProfileAdmin.confirm_delete_field_group)}),jQuery(document).on("change",".select-social-networks",function(){var e=this,t=this.id,o=this.value;jQuery(".select-social-networks").each(function(){if(t!==this.id){var i=jQuery("#"+this.id).val();o===i&&(e.value="",alert(XProfileAdmin.social_networks_duplicate_value_message))}})})});