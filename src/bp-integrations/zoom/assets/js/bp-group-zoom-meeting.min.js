!function(e){e(document).ready(function(){function t(e,t){var o;if(!(o=e?-1!==e.indexOf("?")?"?"+e.split("?")[1]:"":document.location.search))return null;var a=o.replace(/(^\?)/,"").split("&").map(function(e){return e=e.split("="),this[e[0]]=e[1],this}.bind({}))[0];return t?a[t]:a}e(".meeting-item-container").on("click",".load-more a",function(o){var a=e(this);if(o.preventDefault(),a.hasClass("loading"))return!1;a.addClass("loading"),e.ajax({type:"GET",url:bp_group_zoom_meeting_vars.ajax_url,data:{action:"zoom_meeting_load_more",acpage:t(e(this).prop("href"),"acpage")},success:function(e){void 0!==e.data&&e.data.contents&&a.closest(".load-more").replaceWith(e.data.contents)}})}),e("#bp-zoom-meeting-start-date").datetimepicker({format:"Y-m-d H:i:s",minDateTime:0}),e("#bp-zoom-meeting-alt-host-ids").select2({minimumInputLength:0,closeOnSelect:!0,language:"undefined"!=typeof bp_select2&&void 0!==bp_select2.lang?bp_select2.lang:"en",dropdownCssClass:"bb-select-dropdown",containerCssClass:"bb-select-container"}),e(document).on("click","#bp-zoom-meeting-form-submit",function(t){var o=e(this);if(t.preventDefault(),o.hasClass("loading"))return!1;o.addClass("loading");var a=e("#bp-new-zoom-meeting-form").serializeArray(),n={action:"zoom_meeting_add"};for(var i in a)n.hasOwnProperty(a[i].name)?(e.isArray(n[a[i].name])||(n[a[i].name]=[n[a[i].name]]),n[a[i].name]=n[a[i].name].concat(a[i].value)):n[a[i].name]=a[i].value;e.ajax({type:"POST",url:bp_group_zoom_meeting_vars.ajax_url,data:n,success:function(e){if(e.success){if(void 0!==e.data&&e.data.redirect_url)return window.location.href=e.data.redirect_url,!1}else console.log(e),o.removeClass("loading")}})}),e(".meeting-item-wrap").on("click","#bp-zoom-meeting-view-recordings",function(t){var o=e(t.target).closest(".meeting-item");t.preventDefault(),e.ajax({type:"GET",url:bp_group_zoom_meeting_vars.ajax_url,data:{action:"zoom_meeting_recordings",meeting_id:o.data("meeting-id")},success:function(e){e.success&&e.data.recordings?o.parent().find(".recording-list").html(e.data.recordings):o.parent().find(".recording-list").html(e.data.error)}})}),e(".meeting-item-wrap").on("click",".bp-zoom-meeting-delete",function(t){var o=e(t.target),a=o.closest(".meeting-item-wrap"),n=a.data("meeting-id"),i=a.data("id"),s=o.data("nonce");t.preventDefault(),e.ajax({type:"POST",url:bp_group_zoom_meeting_vars.ajax_url,data:{action:"zoom_meeting_delete",meeting_id:n,id:i,_wpnonce:s},success:function(t){if(!0===t.data.deleted){if("1"===bp_group_zoom_meeting_vars.is_single_meeting&&""!==bp_group_zoom_meeting_vars.group_meetings_url)return window.location.href=bp_group_zoom_meeting_vars.group_meetings_url,!1;e(a).remove()}}})}),e("#bp-zoom-single-meeting").on("click",".toggle-password",function(t){var o=e(this),a=o.closest(".single-meeting-item");t.preventDefault(),o.hasClass("show-pass")?(o.hide(),a.find(".toggle-password.hide-pass").show(),a.find(".hide-password").hide(),a.find(".show-password").show()):(o.hide(),a.find(".toggle-password.show-pass").show(),a.find(".show-password").hide(),a.find(".hide-password").show())}),e("#bp-zoom-single-meeting").on("click","#copy-invitation",function(t){var o=e(this);t.preventDefault();var a=document.createElement("textarea");a.value=o.data("join-url"),document.body.appendChild(a),a.select();try{document.execCommand("copy")&&(o.addClass("copied"),setTimeout(function(){o.removeClass("copied")},3e3))}catch(e){console.log("Oops, unable to copy")}document.body.removeChild(a)})})}(jQuery);