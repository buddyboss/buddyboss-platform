!function(s){s(document).ready(function(){s(".meeting-item-container").on("click",".load-more a",function(e){var t=s(this);if(e.preventDefault(),t.hasClass("loading"))return!1;t.addClass("loading"),s.ajax({type:"GET",url:bp_group_zoom_meeting_vars.ajax_url,data:{action:"zoom_meeting_load_more",acpage:function(e,t){var o;o=e?-1!==e.indexOf("?")?"?"+e.split("?")[1]:"":document.location.search;if(!o)return null;var a=o.replace(/(^\?)/,"").split("&").map(function(e){return this[(e=e.split("="))[0]]=e[1],this}.bind({}))[0];if(t)return a[t];return a}(s(this).prop("href"),"acpage")},success:function(e){void 0!==e.data&&e.data.contents&&t.closest(".load-more").replaceWith(e.data.contents)}})}),s("#bp-zoom-meeting-start-date").datetimepicker({format:"Y-m-d H:i:s",minDateTime:0}),s("#bp-zoom-meeting-alt-host-ids").select2({minimumInputLength:0,closeOnSelect:!0,language:"undefined"!=typeof bp_select2&&void 0!==bp_select2.lang?bp_select2.lang:"en",dropdownCssClass:"bb-select-dropdown",containerCssClass:"bb-select-container"}),s(document).on("click","#bp-zoom-meeting-form-submit",function(e){var t=s(this);if(e.preventDefault(),t.hasClass("loading"))return!1;t.addClass("loading");var o=s("#bp-new-zoom-meeting-form").serializeArray(),a={action:"zoom_meeting_add"};for(var n in o)a.hasOwnProperty(o[n].name)?(s.isArray(a[o[n].name])||(a[o[n].name]=[a[o[n].name]]),a[o[n].name]=a[o[n].name].concat(o[n].value)):a[o[n].name]=o[n].value;s.ajax({type:"POST",url:bp_group_zoom_meeting_vars.ajax_url,data:a,success:function(e){if(e.success){if(void 0!==e.data&&e.data.redirect_url)return window.location.href=e.data.redirect_url,!1}else console.log(e),t.removeClass("loading")}})}),s(".meeting-item-wrap").on("click","#bp-zoom-meeting-view-recordings",function(e){var t=s(e.target).closest(".meeting-item");e.preventDefault(),s.ajax({type:"GET",url:bp_group_zoom_meeting_vars.ajax_url,data:{action:"zoom_meeting_recordings",meeting_id:t.data("meeting-id")},success:function(e){e.success&&e.data.recordings?t.parent().find(".recording-list").html(e.data.recordings):t.parent().find(".recording-list").html(e.data.error)}})}),s(".meeting-item-wrap").on("click",".bp-zoom-meeting-delete",function(e){var t=s(e.target),o=t.closest(".meeting-item-wrap"),a=o.data("meeting-id"),n=o.data("id"),i=t.data("nonce");e.preventDefault(),s.ajax({type:"POST",url:bp_group_zoom_meeting_vars.ajax_url,data:{action:"zoom_meeting_delete",meeting_id:a,id:n,_wpnonce:i},success:function(e){if(!0===e.data.deleted){if("1"===bp_group_zoom_meeting_vars.is_single_meeting&&""!==bp_group_zoom_meeting_vars.group_meetings_url)return window.location.href=bp_group_zoom_meeting_vars.group_meetings_url,!1;s(o).remove()}}})}),s("#bp-zoom-single-meeting").on("click",".toggle-password",function(e){var t=s(this),o=t.closest(".single-meeting-item");e.preventDefault(),t.hasClass("show-pass")?(t.hide(),o.find(".toggle-password.hide-pass").show(),o.find(".hide-password").hide(),o.find(".show-password").show()):(t.hide(),o.find(".toggle-password.show-pass").show(),o.find(".show-password").hide(),o.find(".hide-password").show())}),s("#bp-zoom-single-meeting").on("click","#copy-invitation",function(e){var t=s(this);e.preventDefault();var o=document.createElement("textarea");o.value=t.data("join-url"),document.body.appendChild(o),o.select();try{document.execCommand("copy")&&(t.addClass("copied"),setTimeout(function(){t.removeClass("copied")},3e3))}catch(e){console.log("Oops, unable to copy")}document.body.removeChild(o)})})}(jQuery);