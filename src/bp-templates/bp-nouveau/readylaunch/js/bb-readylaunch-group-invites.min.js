window.wp=window.wp||{},window.bp=window.bp||{},(r=>{var e,n,c,l;"undefined"!=typeof BP_Nouveau&&(_.extend(bp,_.pick(wp,"Backbone","ajax","template")),bp.Models=bp.Models||{},bp.Collections=bp.Collections||{},bp.Views=bp.Views||{},bp.Nouveau=bp.Nouveau||{},bp.Models.ACReply=Backbone.Model.extend({defaults:{gif_data:{}}}),e=BP_Nouveau,n=e.ajaxurl,c=e.nonces,l=e.group_invites,bp.Nouveau.GroupInvites={start:function(){var i,o=this,e=(this.views=new Backbone.Collection,this.isLoading=!1,r("body")),t=e.find("#group-invites-send-to-input");this.addSelect2(t),o.selectors={page:1,scope:"",groupInvitesSelect:t,groupInvitesContainer:e.find("#group-invites-container"),feedbackParagraphTagClass:e.find("#group-invites-container .bb-groups-invites-right .bp-invites-feedback .bp-feedback"),feedbackParagraphTagSelector:r("#group-invites-container .bb-groups-invites-right .bp-invites-feedback .bp-feedback p"),feedbackDivHide:r("#group-invites-container .bb-groups-invites-right .bp-invites-feedback"),feedbackInviteColumn:r("#group-invites-container .group-invites-column .bp-invites-feedback .bp-feedback"),feedbackInvitePTag:r("#group-invites-container .group-invites-column .bp-invites-feedback .bp-feedback p"),feedbackSelectorLeftClass:r("#group-invites-container .bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback .bp-feedback"),feedbackParagraphTagSelectorLeft:r("#group-invites-container .bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback .bp-feedback p"),listSelector:r(".group-invites-members-listing #members-list"),lastSelector:r(".group-invites-members-listing .last"),memberInvitedList:r(".members.bp-invites-content #members-list"),subNavFilterLast:r("#group-invites-container .group-invites-column .subnav-filters div .last")},o.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),o.selectors.feedbackSelectorLeftClass.addClass("loading"),o.selectors.feedbackParagraphTagSelectorLeft.html(l.loading),r("#group-invites-container .bb-groups-invites-right #send_group_invite_form .bb-groups-invites-right-top .select2-container .selection .select2-selection--multiple .select2-selection__rendered .select2-search--inline .select2-search__field").prop("disabled",!0),t.on("select2:unselect",function(e){e=e.params.data;r('#group-invites-send-to-input option[value="'+e.id+'"]').each(function(){r(this).remove()}),r("#group-invites-container .bb-groups-invites-left #members-list li."+e.id).removeClass("selected"),r("#group-invites-container .bb-groups-invites-left #members-list li."+e.id+" .action button").attr("data-bp-tooltip",l.add_recipient)}),o.selectors.isPendingInvitePageSelector=r(".groups.group-invites.pending-invites"),o.selectors.isPendingInvitePageSelector.length&&(i=0,r(window).scroll(function(){var e,t,s,a=r(".groups.group-invites.pending-invites #group-invites-container .group-invites-column .bp-invites-content #members-list li.load-more");a.length&&(t=(e=r(window).scrollTop())+r(window).height(),(s=r(a).offset().top)+r(a).height()<=t&&e<=s||r(window).scrollTop()+r(window).height()>=r(document).height())&&0===i&&!o.isLoading&&(r("#group-invites-container .last #bp-group-invites-next-page").trigger("click"),i=1)})),o.selectors.isPendingInvitePageSelector.length?(r(".groups.group-invites.pending-invites .subnav #pending-invites-groups-li").addClass("current selected"),e={action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:"invited",page:o.selectors.page},r.ajax({type:"POST",url:n,async:!1,data:e,success:function(e){e.success?(o.selectors.memberInvitedList.html(e.data.html),o.selectors.subNavFilterLast.html(e.data.pagination),o.selectors.feedbackInviteColumn.attr("class","bp-feedback"),o.selectors.feedbackInviteColumn.addClass("info"),o.selectors.feedbackInvitePTag.html(e.data.feedback),o.selectors.page=o.selectors.page+1,r("#group-invites-container .bp-invites-feedback").hide()):(o.selectors.memberInvitedList.html(""),o.selectors.feedbackInviteColumn.attr("class","bp-feedback"),o.selectors.feedbackInviteColumn.addClass(e.data.type),o.selectors.feedbackInvitePTag.html(e.data.feedback),r("#group-invites-container .bp-invites-feedback").show())}})):(o.selectors.listSelector.scroll(this.loadMoreInvitesMembers),r(".groups.group-invites.send-invites .subnav #send-invites-groups-li").addClass("current selected"),t={action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:"members",page:o.selectors.page},r.ajax({type:"POST",url:n,async:!1,data:t,success:function(e){var t=bp.Nouveau.GroupInvites;e.success?(t.selectors.listSelector.html(e.data.html),t.selectors.lastSelector.html(e.data.pagination),r("#group-invites-container .bb-groups-invites-right").show(),r(".bb-groups-invites-right .bp-invites-feedback").show()):(r("#group-invites-container .bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback").show(),t.selectors.listSelector.html(""),t.selectors.lastSelector.html(""),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass(e.data.type),t.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback),r("#group-invites-container .bb-groups-invites-right").hide())}})),this.addEventListeners()},addEventListeners:function(){r(document).on("click","#group-invites-container .bb-groups-invites-right #send_group_invite_form .bb-groups-invites-right-top .select2-container .selection .select2-selection--multiple .select2-selection__rendered .select2-search--inline .select2-search__field",this.disabledGroupsInvitesRightTopSearch.bind(this)),r(document).on("search",".send-invites #group-invites-container #group_invites_search",this.groupsInvitesSearch.bind(this)),r(document).on("search",".group-create.group-invites.create #group-invites-container #group_invites_search",this.groupCreateGroupsInvitesSearch.bind(this)),r("#bp-group-send-invite-switch-checkbox").on("change",this.groupSendInvitesSwitchCheckbox.bind(this)),r(document).on("click","#group-invites-container .bb-groups-invites-left .group-add-remove-invite-button",this.groupAddRemoveInviteButton.bind(this)),r(document).on("click","#group-invites-container .bb-groups-invites-left .last #bp-group-invites-next-page",this.groupInvitesNextPage.bind(this)),r(document).on("click",".bb-more-invites-wrap .bb-add-invites",this.groupInvitesAddInvites.bind(this)),r(document).on("click",".bb-close-invites-members",this.groupInvitesCloseMembers.bind(this)),r(document).on("click","#group-invites-container .bb-groups-invites-right #send_group_invite_form .bb-groups-invites-right-bottom #send_group_invite_button",this.groupInvitesSendInviteButton.bind(this)),r(document).on("click","#group-invites-container #bp_invites_reset",this.groupInvitesReset.bind(this)),r(document).on("click",".send-invites #group-invites-container #group_invites_search_submit",this.groupInvitesSearchSubmit.bind(this)),r(document).on("click",".group-create.group-invites.create #group-invites-container #group_invites_search_submit",this.groupCreateGroupsInvitesSearchSubmit.bind(this)),this.selectors.isPendingInvitePageSelector.length&&(r(document).on("click","#group-invites-container .last #bp-group-invites-next-page",this.groupInvitesContainerNextPage.bind(this)),r(document).on("click","#group-invites-container .last #bp-group-invites-prev-page",this.groupInvitesContainerPrevPage.bind(this)),r(document).on("search",".pending-invites #group-invites-container #group_invites_search",this.pendingInvitesGroupInvitesSearch.bind(this)),r(document).on("click","#group-invites-container #group_invites_search_submit",this.groupInvitesContainerSearchSubmit.bind(this)),r(document).on("click","#group-invites-container #members-list li .action .group-remove-invite-button",this.groupInvitesContainerRemoveInviteButton.bind(this)))},disabledGroupsInvitesRightTopSearch:function(e){r(e.currentTarget).prop("disabled",!0)},groupsInvitesSearch:function(e){var t=this;e.preventDefault(),""===e.currentTarget.value&&(t.selectors.scope="",r("#bp-group-send-invite-switch-checkbox").is(":checked")?t.selectors.scope="friends":t.selectors.scope="members",t.selectors.page=1,e={action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:t.selectors.scope,page:t.selectors.page},t.selectors.feedbackSelectorLeftClass.show().parent().show(),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass("info"),t.selectors.feedbackParagraphTagSelectorLeft.html(l.loading),r.ajax({type:"POST",url:n,async:!1,data:e,success:function(e){e.success?(t.selectors.listSelector.html(e.data.html),t.selectors.lastSelector.html(e.data.pagination),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass("info"),t.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback),r(".bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback").hide()):(r(".bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback").show(),t.selectors.listSelector.html(""),t.selectors.lastSelector.html(""),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass(e.data.type),t.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback))}}))},groupCreateGroupsInvitesSearch:function(e){var t=this;e.preventDefault(),""===e.currentTarget.value&&(e=r("#bp-group-send-invite-switch-checkbox").is(":checked")?"friends":"members",e={action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:e,page:1},r.ajax({type:"POST",url:n,async:!1,data:e,success:function(e){e.success?(t.selectors.listSelector.html(e.data.html),t.selectors.lastSelector.html(e.data.pagination),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass("info"),t.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback),r(".bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback").hide()):(r(".bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback").show(),t.selectors.listSelector.html(""),t.selectors.lastSelector.html(""),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass(e.data.type),t.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback))}}))},groupSendInvitesSwitchCheckbox:function(e){var s=this;r("#group-invites-container .bb-groups-invites-left #bp-invites-dropdown-options-loader").removeClass("bp-invites-dropdown-options-loader-hide"),(e=r(e.currentTarget).is(":checked")?"friends":"members")&&(e={action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:e,page:1},r.ajax({type:"POST",url:n,data:e,success:function(e){var t;e.success?(r("#group-invites-container .bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback").hide(),s.selectors.listSelector.html(e.data.html),s.selectors.lastSelector.html(e.data.pagination),s.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),s.selectors.feedbackSelectorLeftClass.addClass("info"),s.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback),t=r("#group-invites-send-to-input").val(),r.isArray(t)&&t.length&&r.each(t,function(e,t){t&&(r("#members-list li."+t).addClass("selected"),r("#members-list li."+t+" .action button").attr("data-bp-tooltip",l.cancel_invite_tooltip))})):(r("#group-invites-container .bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback").show(),s.selectors.listSelector.html(""),s.selectors.lastSelector.html(""),s.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),s.selectors.feedbackSelectorLeftClass.addClass(e.data.type),s.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback)),r("#group-invites-container .bb-groups-invites-left #bp-invites-dropdown-options-loader").addClass("bp-invites-dropdown-options-loader-hide")}}))},groupAddRemoveInviteButton:function(e){var t,s=this,e=r(e.currentTarget),a=e.attr("data-bp-user-id"),i=e.attr("data-bp-user-name"),o=e.closest("li").find(".item-avatar img").attr("src"),i={id:a,text:i,avatar:o};e.closest("li").hasClass("selected")?(e.closest("li").removeClass("selected"),t=[],r.grep(s.selectors.groupInvitesSelect.select2("data"),function(e){return e.id!==a}).forEach(function(e){t.push(+e.id)}),s.selectors.groupInvitesSelect.val(t).trigger("change"),r('#group-invites-send-to-input option[value="'+a+'"]').each(function(){r(this).remove()}),e.attr("data-bp-tooltip",l.add_invite_tooltip)):(e.closest("li").addClass("selected"),s.selectors.groupInvitesSelect.find('option[value="'+i.id+'"]').length||(o=new Option(i.text,i.id,!0,!0),r(o).attr("data-avatar",i.avatar),s.selectors.groupInvitesSelect.append(o).trigger("change")),e.attr("data-bp-tooltip",l.cancel_invite_tooltip))},groupInvitesNextPage:function(){var e,t=this;t.isLoading||(t.isLoading=!0,t.selectors.page=t.selectors.page+1,r("#bp-group-send-invite-switch-checkbox").is(":checked")?t.selectors.scope="friends":t.selectors.scope="members",e={action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:t.selectors.scope,page:t.selectors.page,search_terms:r("#group-invites-container .bb-groups-invites-left #group_invites_search").val()},r.ajax({type:"POST",url:n,data:e,success:function(e){e.success?(r("#group-invites-container .group-invites-members-listing #members-list li.load-more").remove(),t.selectors.listSelector.append(e.data.html),t.selectors.lastSelector.html(""),t.selectors.lastSelector.html(e.data.pagination),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass("info")):(t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass(e.data.type)),t.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback),t.isLoading=!1}}))},groupInvitesAddInvites:function(e){e.preventDefault(),r(".bb-groups-invites-left").addClass("bb-select-member-view")},groupInvitesCloseMembers:function(e){e.preventDefault(),r(".bb-groups-invites-left").removeClass("bb-select-member-view")},groupInvitesSendInviteButton:function(e){var s=this,a=(e.preventDefault(),r(e.currentTarget)),t=[],e=r.grep(s.selectors.groupInvitesSelect.select2("data"),function(e){return 0!==e.id}),e=(r("#group-invites-container .bb-groups-invites-right .bp-invites-submit-loader-hide").show(),e.forEach(function(e){t.push(+e.id)}),{action:"groups_send_group_invites",nonce:c.groups,_wpnonce:l.nonces.send_invites,group_id:l.group_id,message:r("textarea#send-invites-control").val(),users:t});a.attr("disabled",!0),r.ajax({type:"POST",url:n,data:e,success:function(e){var t;e.success?(s.selectors.feedbackDivHide.show(),s.selectors.feedbackParagraphTagClass.attr("class","bp-feedback"),s.selectors.feedbackParagraphTagClass.addClass(e.data.type),s.selectors.feedbackParagraphTagSelector.html(""),s.selectors.feedbackParagraphTagSelector.html(e.data.feedback),setTimeout(function(){s.selectors.feedbackParagraphTagClass.removeClass(e.data.type),s.selectors.feedbackParagraphTagClass.addClass("info"),s.selectors.feedbackParagraphTagSelector.html(l.member_invite_info_text),r("#group-invites-container .bb-groups-invites-right .bp-invites-submit-loader-hide").hide()},4e3),s.selectors.groupInvitesSelect.find("option").remove(),r("textarea#send-invites-control").val(""),r("#bp-group-send-invite-switch-checkbox").is(":checked")?s.selectors.scope="friends":s.selectors.scope="members",s.selectors.page=1,t={action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:s.selectors.scope,page:s.selectors.page},r.ajax({type:"POST",url:n,async:!1,data:t,success:function(e){e.success?(s.selectors.listSelector.html(e.data.html),s.selectors.lastSelector.html(e.data.pagination),s.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),s.selectors.feedbackSelectorLeftClass.addClass("info")):(r("#group-invites-container .bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback").show(),s.selectors.listSelector.html(""),s.selectors.lastSelector.html(""),s.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),s.selectors.feedbackSelectorLeftClass.addClass(e.data.type)),s.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback)}})):(s.selectors.feedbackDivHide.show(),s.selectors.feedbackParagraphTagClass.attr("class","bp-feedback"),s.selectors.feedbackParagraphTagClass.addClass(e.data.type),s.selectors.feedbackParagraphTagSelector.html(""),s.selectors.feedbackParagraphTagSelector.html(e.data.feedback),setTimeout(function(){s.selectors.feedbackParagraphTagClass.removeClass(e.data.type),s.selectors.feedbackParagraphTagClass.addClass("info"),s.selectors.feedbackParagraphTagSelector.html(l.member_invite_info_text),r("#group-invites-container .bb-groups-invites-right .bp-invites-submit-loader-hide").hide()},4e3)),a.attr("disabled",!1)}})},groupInvitesReset:function(e){var t=this,e=(e.preventDefault(),r("#group-invites-container .bb-groups-invites-right .bp-invites-submit-loader-hide").show(),t.selectors.feedbackDivHide.hide(),t.selectors.groupInvitesSelect.find("option").remove(),r("textarea#send-invites-control").val(""),t.selectors.page=1,r("#bp-group-send-invite-switch-checkbox").is(":checked")?t.selectors.scope="friends":t.selectors.scope="members",{action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:t.selectors.scope,page:t.selectors.page});r.ajax({type:"POST",url:n,async:!1,data:e,success:function(e){e.success?(t.selectors.listSelector.html(e.data.html),t.selectors.lastSelector.html(e.data.pagination),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass("info"),t.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback),r(".bb-groups-invites-right-top .bp-invites-feedback").show()):(t.selectors.listSelector.html(""),t.selectors.lastSelector.html(""),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass(e.data.type),t.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback)),setTimeout(function(){r("#group-invites-container .bb-groups-invites-right .bp-invites-submit-loader-hide").hide()},1e3)}})},groupInvitesSearchSubmit:function(e){var t=this,s=(e.preventDefault(),r("#group-invites-container #group_invites_search").val());if(""===s)return!1;t.selectors.page=1,r("#bp-group-send-invite-switch-checkbox").is(":checked")?t.selectors.scope="friends":t.selectors.scope="members";var s={action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:t.selectors.scope,page:t.selectors.page,search_terms:s},a=(t.selectors.feedbackSelectorLeftClass.show().parent().show(),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass("info"),t.selectors.feedbackParagraphTagSelectorLeft.html(l.loading),r(e.currentTarget).closest("form"));a.addClass("is-loading"),r("button.search-form_reset").hide(),r.ajax({type:"POST",url:n,data:s,success:function(e){e.success?(t.selectors.listSelector.html(e.data.html),t.selectors.lastSelector.html(e.data.pagination),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass("info"),t.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback),r(".bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback").hide()):(t.selectors.listSelector.html(""),t.selectors.lastSelector.html(""),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass(e.data.type),t.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback),r(".bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback").show()),a.removeClass("is-loading"),setTimeout(function(){a.hasClass("is-loading")||r("button.search-form_reset").show()},800)}})},groupCreateGroupsInvitesSearchSubmit:function(e){var t=this,s=(e.preventDefault(),r("#group-invites-container #group_invites_search").val());if(""===s)return!1;t.selectors.page=1,r("#bp-group-send-invite-switch-checkbox").is(":checked")?t.selectors.scope="friends":t.selectors.scope="members";var s={action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:t.selectors.scope,page:t.selectors.page,search_terms:s},a=r(e.currentTarget).closest("form");a.addClass("is-loading"),r("button.search-form_reset").hide(),r.ajax({type:"POST",url:n,data:s,success:function(e){e.success?(t.selectors.listSelector.html(e.data.html),t.selectors.lastSelector.html(e.data.pagination),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass("info"),t.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback),r(".bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback").hide()):(t.selectors.listSelector.html(""),t.selectors.lastSelector.html(""),t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass(e.data.type),t.selectors.feedbackParagraphTagSelectorLeft.html(e.data.feedback),r(".bb-groups-invites-left .group-invites-members-listing .bp-invites-feedback").show()),a.removeClass("is-loading"),setTimeout(function(){a.hasClass("is-loading")||r("button.search-form_reset").show()},800)}})},groupInvitesContainerNextPage:function(){var e,t=this;t.isLoading||(t.isLoading=!0,t.selectors.feedbackSelectorLeftClass.attr("class","bp-feedback"),t.selectors.feedbackSelectorLeftClass.addClass("loading"),t.selectors.feedbackParagraphTagSelectorLeft.html(l.loading),e={action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:"invited",page:t.selectors.page,search_terms:r("#group-invites-container .group-invites-column #group_invites_search").val()},r.ajax({type:"POST",url:n,data:e,success:function(e){e.success?(t.selectors.memberInvitedList.find(".load-more").remove(),t.selectors.memberInvitedList.append(e.data.html),t.selectors.subNavFilterLast.html(""),t.selectors.subNavFilterLast.html(e.data.pagination),t.selectors.feedbackInviteColumn.attr("class","bp-feedback"),t.selectors.feedbackInviteColumn.addClass("info"),t.selectors.feedbackInvitePTag.html(e.data.feedback),t.selectors.page=t.selectors.page+1):(t.selectors.memberInvitedList.html(""),t.selectors.feedbackInviteColumn.attr("class","bp-feedback"),t.selectors.feedbackInviteColumn.addClass(e.data.type),t.selectors.feedbackInvitePTag.html(e.data.feedback)),t.isLoading=!1}}))},groupInvitesContainerPrevPage:function(){var t=this,e=(r("#group-invites-container .bp-invites-feedback").show(),r("#group-invites-container .bp-invites-feedback .bp-feedback").addClass("info"),t.selectors.feedbackInvitePTag.html(l.loading),t.selectors.page=t.selectors.page-1,{action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:"invited",page:t.selectors.page,search_terms:r("#group-invites-container .group-invites-column #group_invites_search").val()});r.ajax({type:"POST",url:n,data:e,success:function(e){e.success?(t.selectors.memberInvitedList.html(""),t.selectors.memberInvitedList.html(e.data.html),t.selectors.subNavFilterLast.html(""),t.selectors.subNavFilterLast.html(e.data.pagination),t.selectors.feedbackInviteColumn.attr("class","bp-feedback"),t.selectors.feedbackInviteColumn.addClass("info")):(t.selectors.memberInvitedList.html(""),t.selectors.feedbackInviteColumn.attr("class","bp-feedback"),t.selectors.feedbackInviteColumn.addClass(e.data.type)),t.selectors.feedbackInvitePTag.html(e.data.feedback)}})},pendingInvitesGroupInvitesSearch:function(e){var t=this;e.preventDefault(),""===e.currentTarget.value&&(t.selectors.page=1,e={action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:"invited",page:t.selectors.page},t.selectors.feedbackInviteColumn.show().parents(".bp-invites-feedback").show(),t.selectors.feedbackInviteColumn.attr("class","bp-feedback"),t.selectors.feedbackInviteColumn.addClass("info"),t.selectors.feedbackInvitePTag.html(l.loading),r.ajax({type:"POST",url:n,async:!1,data:e,success:function(e){e.success?(t.selectors.memberInvitedList.html(e.data.html),t.selectors.subNavFilterLast.html(e.data.pagination),t.selectors.feedbackInviteColumn.attr("class","bp-feedback"),t.selectors.feedbackInviteColumn.addClass("info"),t.selectors.feedbackInvitePTag.html(e.data.feedback),t.selectors.page=t.selectors.page+1,r("#group-invites-container .bp-invites-feedback").hide()):(t.selectors.memberInvitedList.html(""),t.selectors.feedbackInviteColumn.attr("class","bp-feedback"),t.selectors.feedbackInviteColumn.addClass(e.data.type),t.selectors.feedbackInvitePTag.html(e.data.feedback),r("#group-invites-container .bp-invites-feedback").show())}}))},groupInvitesContainerSearchSubmit:function(e){var t=this,e=(e.preventDefault(),r("#group-invites-container #group_invites_search").val());if(""===e)return!1;t.selectors.page=1;e={action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:"invited",page:t.selectors.page,search_terms:e};t.selectors.feedbackInviteColumn.show().parents(".bp-invites-feedback").show(),t.selectors.feedbackInviteColumn.attr("class","bp-feedback"),t.selectors.feedbackInviteColumn.addClass("info"),t.selectors.feedbackInvitePTag.html(l.loading),r.ajax({type:"POST",url:n,data:e,success:function(e){e.success?(t.selectors.memberInvitedList.html(e.data.html),t.selectors.subNavFilterLast.html(e.data.pagination),t.selectors.feedbackInviteColumn.attr("class","bp-feedback"),t.selectors.feedbackInviteColumn.addClass("info"),t.selectors.feedbackInvitePTag.html(e.data.feedback),r("#group-invites-container .bp-invites-feedback").hide()):(t.selectors.memberInvitedList.html(""),t.selectors.feedbackInviteColumn.attr("class","bp-feedback"),t.selectors.feedbackInviteColumn.addClass(e.data.type),t.selectors.feedbackInvitePTag.html(e.data.feedback),r("#group-invites-container .bp-invites-feedback").show())}})},groupInvitesContainerRemoveInviteButton:function(e){var s=this,a=(e.preventDefault(),r("#group-invites-container .group-invites-column #bp-pending-invites-loader").show(),s.selectors.feedbackInviteColumn.attr("class","bp-feedback"),s.selectors.feedbackInviteColumn.addClass("loading"),s.selectors.feedbackInvitePTag.html(l.removing),r(e.currentTarget).closest("li")),e={action:"groups_delete_group_invite",nonce:c.groups,_wpnonce:l.nonces.uninvite,group_id:l.group_id,user:r(e.currentTarget).attr("data-bp-user-id")};r.ajax({type:"POST",url:n,data:e,success:function(e){var t;e.success?(a.remove(),e.data.has_invites||(s.selectors.feedbackInviteColumn.attr("class","bp-feedback"),s.selectors.feedbackInviteColumn.addClass(e.data.type),s.selectors.feedbackInvitePTag.html(""),s.selectors.feedbackInvitePTag.html(e.data.feedback)),r("#group-invites-container .group-invites-column .bp-invites-content #members-list").html(""),s.selectors.page=1,t={action:"groups_get_group_potential_invites",nonce:c.groups,group_id:l.group_id,scope:"invited",page:s.selectors.page},r.ajax({type:"POST",url:n,async:!1,data:t,success:function(e){e.success?(s.selectors.memberInvitedList.html(e.data.html),s.selectors.subNavFilterLast.html(e.data.pagination),s.selectors.feedbackInviteColumn.attr("class","bp-feedback"),s.selectors.feedbackInviteColumn.addClass("info"),s.selectors.feedbackInvitePTag.html(e.data.feedback),r("#group-invites-container .bp-invites-feedback").hide()):(r("#group-invites-container .bp-invites-feedback").show(),s.selectors.memberInvitedList.html(""),s.selectors.feedbackInviteColumn.attr("class","bp-feedback"),s.selectors.feedbackInviteColumn.addClass(e.data.type),s.selectors.feedbackInvitePTag.html(e.data.feedback)),r("#group-invites-container .group-invites-column #bp-pending-invites-loader").hide()}})):(s.selectors.feedbackInviteColumn.attr("class","bp-feedback"),s.selectors.feedbackInviteColumn.addClass(e.data.type),s.selectors.feedbackInvitePTag.html(""),s.selectors.feedbackInvitePTag.html(e.data.feedback),r("#group-invites-container .group-invites-column #bp-pending-invites-loader").hide())}})},addSelect2:function(e){var s=[];e.select2({placeholder:"",minimumInputLength:1,language:{errorLoading:function(){return bp_select2.i18n.errorLoading},inputTooLong:function(e){e=e.input.length-e.maximum;return bp_select2.i18n.inputTooLong.replace("%%",e)},inputTooShort:function(e){return bp_select2.i18n.inputTooShort.replace("%%",e.minimum-e.input.length)},loadingMore:function(){return bp_select2.i18n.loadingMore},maximumSelected:function(e){return bp_select2.i18n.maximumSelected.replace("%%",e.maximum)},noResults:function(){return bp_select2.i18n.noResults},searching:function(){return bp_select2.i18n.searching},removeAllItems:function(){return bp_select2.i18n.removeAllItems}},ajax:{url:bp.ajax.settings.url,dataType:"json",delay:250,data:function(e){return r.extend({},e,{nonce:l.nonces.retrieve_group_members,action:"groups_get_group_potential_user_send_invites",group:l.group_id})},cache:!0,processResults:function(a){return!1===jQuery.isEmptyObject(s)&&r.each(s,function(e,t){for(var s=0;s<a.data.results.length;s++)a.data.results[s].id===t&&a.data.results.splice(s,1)}),{results:a&&a.success?a.data.results:[]}}},templateSelection:function(e){return e.id?r('<div class="bb-rl-select2-selection-user"><img class="select2-user-avatar" src="'+r(e.element).data("avatar")+'" alt=""/><span class="select2-selection-user__name">'+e.text+"</span></div>"):e.text}}),e.on("select2:select",function(e){e=e.params.data;s.push(e.id)}),e.on("select2:unselect",function(e){var t=e.params.data;s=jQuery.grep(s,function(e){return e!==t.id})})},isScrolledIntoView:function(e){var t=r(window).scrollTop(),s=t+r(window).height(),a=r(e).offset().top;return a+r(e).height()<=s&&t<=a},loadMoreInvitesMembers:function(e){var t=bp.Nouveau.GroupInvites,e=r(e.currentTarget);e[0].scrollHeight-e.scrollTop()-e.innerHeight()<=30&&r("#group-invites-container .group-invites-members-listing #members-list li.load-more").length&&!t.isLoading&&r("#group-invites-container .group-invites-members-listing .last #bp-group-invites-next-page").trigger("click")}},bp.Nouveau.GroupInvites.start())})((bp,jQuery));