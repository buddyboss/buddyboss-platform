!function(i){"use strict";var a={init:function(){this.switchLdGridList(),this.setupCourseItemEvents(),this.setupCourseFilters(),this.setupSidebarToggle(),this.setupCourseCardPopups()},switchLdGridList:function(){var t=i(".bb-rl-courses-grid");i(document).on("click",".bb-rl-grid-filters .layout-view-course:not(.active)",function(s){var e;s.preventDefault(),void 0!==i(this).parent().attr("data-view")&&"ld-course"===i(this).parent().attr("data-view")&&(e=i(this).closest(".bb-rl-container"),s=i(this).closest(".bb-rl-grid-filters"),t=e.find(".bb-rl-courses-grid"),i(this).hasClass("layout-list-view")?(s.find(".layout-view-course").removeClass("active"),t.removeClass("grid"),i(this).addClass("active"),t.addClass("list")):(s.find(".layout-view-course").removeClass("active"),t.removeClass("list"),i(this).addClass("active"),t.addClass("grid")))})},setupCourseItemEvents:function(){i(".bb-course-item").on({mouseenter:function(){i(this).addClass("hover")},mouseleave:function(){i(this).removeClass("hover")}})},setupCourseFilters:function(){var e=this;i("#bb-courses-category-filter").on("change",function(){e.filterCourses()}),i("#bb-courses-instructor-filter").on("change",function(){e.filterCourses()}),i("#bb-courses-sort-filter").on("change",function(){e.filterCourses()}),i("#bb-courses-search-form").on("submit",function(s){s.preventDefault(),e.filterCourses()})},filterCourses:function(){var e=i(".bb-course-items"),s=i("#bb-courses-category-filter").val(),t=i("#bb-courses-instructor-filter").val(),o=i("#bb-courses-sort-filter").val(),r=i("#bb-courses-search").val();e.addClass("loading"),i.ajax({url:bbReadylaunchLearnDash.ajax_url,type:"POST",data:{action:"bb_readylaunch_learndash_filter_courses",category:s,instructor:t,sort:o,search:r,nonce:bbReadylaunchLearnDash.nonce},success:function(s){s.success&&(e.html(s.data.content),i(".bb-courses-count").text(s.data.count),a.setupCourseItemEvents())},complete:function(){e.removeClass("loading")}})},setupSidebarToggle:function(){i(".bb-course-sidebar-toggle").on("click",function(s){s.preventDefault(),i(".bb-learndash-sidebar").toggleClass("active"),i("body").toggleClass("bb-sidebar-open")}),i(document).on("click",function(s){i(s.target).closest(".bb-learndash-sidebar, .bb-course-sidebar-toggle").length||(i(".bb-learndash-sidebar").removeClass("active"),i("body").removeClass("bb-sidebar-open"))})},setupCourseCardPopups:function(){var t=this;i(".bb-rl-course-card").on({mouseenter:function(){var s=i(this),e=s.find(".bb-rl-course-card-popup");e.length&&t.positionCoursePopup(s,e)}}),i(window).on("resize",function(){i(".bb-rl-course-card:hover").each(function(){var s=i(this),e=s.find(".bb-rl-course-card-popup");e.length&&t.positionCoursePopup(s,e)})})},positionCoursePopup:function(s,e){var t;i(window).width()<=768?e.removeClass("bb-rl-popup-left bb-rl-popup-right bb-rl-popup-top bb-rl-popup-bottom"):(t=s.closest(".bb-rl-courses-grid").hasClass("list"),e.removeClass("bb-rl-popup-left bb-rl-popup-right bb-rl-popup-top bb-rl-popup-bottom"),t?this.positionPopupVertical(s,e):this.positionPopupHorizontal(s,e))},positionPopupHorizontal:function(s,e){var t=s[0].getBoundingClientRect(),s=i(window).width()-t.right,t=t.left;316<=s||!(316<=t)&&t<=s?e.addClass("bb-rl-popup-right"):e.addClass("bb-rl-popup-left")},positionPopupVertical:function(s,e){var t=s[0].getBoundingClientRect(),o=i(window).height(),s=t.top,t=o-t.bottom;270<=s||!(270<=t)&&t<=s?e.addClass("bb-rl-popup-top"):e.addClass("bb-rl-popup-bottom"),e.css("transform","")}};i(document).ready(function(){a.init()})}(jQuery);