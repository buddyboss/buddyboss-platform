!function(i){"use strict";var a={init:function(){this.switchLdGridList(),this.setupCourseItemEvents(),this.setupCourseFilters(),this.setupSidebarToggle(),this.setupCourseCardPopups()},switchLdGridList:function(){var e=i(".bb-rl-courses-grid");i(document).on("click",".bb-rl-grid-filters .layout-view-course:not(.active)",function(s){var t;s.preventDefault(),void 0!==i(this).parent().attr("data-view")&&"ld-course"===i(this).parent().attr("data-view")&&(t=i(this).closest(".bb-rl-container"),s=i(this).closest(".bb-rl-grid-filters"),e=t.find(".bb-rl-courses-grid"),i(this).hasClass("layout-list-view")?(s.find(".layout-view-course").removeClass("active"),e.removeClass("grid"),i(this).addClass("active"),e.addClass("list")):(s.find(".layout-view-course").removeClass("active"),e.removeClass("list"),i(this).addClass("active"),e.addClass("grid")))})},setupCourseItemEvents:function(){i(".bb-course-item").on({mouseenter:function(){i(this).addClass("hover")},mouseleave:function(){i(this).removeClass("hover")}})},setupCourseFilters:function(){var t=this;i("#bb-courses-category-filter").on("change",function(){t.filterCourses()}),i("#bb-courses-instructor-filter").on("change",function(){t.filterCourses()}),i("#bb-courses-sort-filter").on("change",function(){t.filterCourses()}),i("#bb-courses-search-form").on("submit",function(s){s.preventDefault(),t.filterCourses()})},filterCourses:function(){var t=i(".bb-course-items"),s=i("#bb-courses-category-filter").val(),e=i("#bb-courses-instructor-filter").val(),o=i("#bb-courses-sort-filter").val(),r=i("#bb-courses-search").val();t.addClass("loading"),i.ajax({url:bbReadylaunchLearnDash.ajax_url,type:"POST",data:{action:"bb_readylaunch_learndash_filter_courses",category:s,instructor:e,sort:o,search:r,nonce:bbReadylaunchLearnDash.nonce},success:function(s){s.success&&(t.html(s.data.content),i(".bb-courses-count").text(s.data.count),a.setupCourseItemEvents())},complete:function(){t.removeClass("loading")}})},setupSidebarToggle:function(){i(".bb-course-sidebar-toggle").on("click",function(s){s.preventDefault(),i(".bb-learndash-sidebar").toggleClass("active"),i("body").toggleClass("bb-sidebar-open")}),i(document).on("click",function(s){i(s.target).closest(".bb-learndash-sidebar, .bb-course-sidebar-toggle").length||(i(".bb-learndash-sidebar").removeClass("active"),i("body").removeClass("bb-sidebar-open"))})},setupCourseCardPopups:function(){var e=this;i(".bb-rl-course-card").on({mouseenter:function(){var s=i(this),t=s.find(".bb-rl-course-card-popup");t.length&&e.positionCoursePopup(s,t)}}),i(window).on("resize",function(){i(".bb-rl-course-card:hover").each(function(){var s=i(this),t=s.find(".bb-rl-course-card-popup");t.length&&e.positionCoursePopup(s,t)})})},positionCoursePopup:function(s,t){var e;i(window).width()<=768?t.removeClass("bb-rl-popup-left bb-rl-popup-right bb-rl-popup-top bb-rl-popup-bottom"):(e=s.closest(".bb-rl-courses-grid").hasClass("list"),t.removeClass("bb-rl-popup-left bb-rl-popup-right bb-rl-popup-top bb-rl-popup-bottom"),e?this.positionPopupVertical(s,t):this.positionPopupHorizontal(s,t))},positionPopupHorizontal:function(s,t){var e=s[0].getBoundingClientRect(),o=i(window).width()-e.right,s=e.left;316<=o||!(316<=s)&&s<=o?t.addClass("bb-rl-popup-right"):t.addClass("bb-rl-popup-left");o=e.top,e=i(window).height();e<o+100?t.css("transform","translateY(calc(-50% - "+(o+100-e+20)+"px))"):o-100<0?t.css("transform","translateY(calc(-50% + "+Math.abs(o-100+20)+"px))"):t.css("transform","translateY(-50%)")},positionPopupVertical:function(s,t){var e=s[0].getBoundingClientRect(),o=i(window).height(),s=e.top,e=o-e.bottom;270<=s||!(270<=e)&&e<=s?t.addClass("bb-rl-popup-top"):t.addClass("bb-rl-popup-bottom"),t.css("transform","")}};i(document).ready(function(){a.init()})}(jQuery);