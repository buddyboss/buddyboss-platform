window.bp=window.bp||{},(a=>{"undefined"!=typeof BP_Nouveau&&(bp.Nouveau=bp.Nouveau||{},bp.Nouveau.Notifications={start:function(){this.setupGlobals(),this.addListeners(),this.prepareDocument()},setupGlobals:function(){bp.Nouveau.setStorage("bp-notifications","extras","DESC")},addListeners:function(){a("body.notifications").on("bp_ajax_request",this.prepareDocument),a("body.notifications").on("click",".bb-sort-by-date",bp.Nouveau,this.sortNotifications),a(window).on("unload",this.resetFilter),a("body.notifications").on("click",".bb_rl_more_dropdown__action",this.toggleMoreOptionsDropdown),a(document).on("click",function(o){a(o.target).closest(".bb-rl-more_dropdown-wrap").length||a(".bb-rl-more_dropdown-wrap").removeClass("active")})},prepareDocument:function(){("ASC"===bp.Nouveau.getStorage("bp-notifications").extras?(a('[data-bp-notifications-order="DESC"]').show(),a('[data-bp-notifications-order="ASC"]')):(a('[data-bp-notifications-order="ASC"]').show(),a('[data-bp-notifications-order="DESC"]'))).hide(),a("#notification-bulk-manage").prop("disabled","disabled")},sortNotifications:function(o){var t=o.data.getStorage("bp-notifications"),e=t.scope||null,t=t.filter||null,i="";o.preventDefault(),o=a(o.currentTarget).find("a:visible").data("bp-notifications-order"),bp.Nouveau.setStorage("bp-notifications","extras",o),a('#buddypress [data-bp-search="notifications"] input[type=search]').length&&(i=a('#buddypress [data-bp-search="notifications"] input[type=search]').val()),bp.Nouveau.objectRequest({object:"notifications",scope:e,filter:t,search_terms:i,extras:o,page:1})},resetFilter:function(){bp.Nouveau.setStorage("bp-notifications","filter",0)},toggleMoreOptionsDropdown:function(){a(this).closest(".bb-rl-more_dropdown-wrap").hasClass("active")?a(".bb-rl-more_dropdown-wrap").removeClass("active"):(a(".bb-rl-more_dropdown-wrap").removeClass("active"),a(this).closest(".bb-rl-more_dropdown-wrap").addClass("active"))}},bp.Nouveau.Notifications.start())})((bp,jQuery));