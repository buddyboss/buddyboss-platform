window.bp=window.bp||{},function(t){bp.Readylaunch.Members={start:function(){this.inviteMemberPopup()},addListeners:function(){},inviteMemberPopup:function(){t(document).on("click","#bb-rl-invite-button",function(e){e.preventDefault();e=t("#bb-rl-invite-modal");e.length&&e.show()}),t(document).on("click",".bb-rl-modal-close-button",function(e){e.preventDefault(),bp.Readylaunch.Members.resetInviteMemberPopupForm.call(this,e);e=t(this).closest("#bb-rl-invite-modal");e.length&&e.hide()}),t(document).on("submit","#bb-rl-invite-form",this.submitInviteMemberPopupForm)},showToastMessage:function(e,r="info",s=!1){var i=t("#bb-rl-invite-modal"),a=i.find(".bb-rl-modal-wrapper");t(".bb-rl-toast-message").remove();var b="bb-rl-toast-message",n='<span class="bb-rl-spinner"></span>';"error"===r?(b+=" bb-rl-toast-message--error",n+='<i class="bb-icons-rl-warning-circle"></i>'):"success"===r&&(b+=" bb-rl-toast-message--success",n+='<i class="bb-icons-rl-check-circle"></i>'),a.append('<div class="'+b+'">'+n+e+"</div>"),"error"!==r&&setTimeout(function(){t(".bb-rl-toast-message").fadeOut(500,function(){t(this).remove()}),s&&i.fadeOut(200)},5e3)},appendMessage:function(e,r){var s='<div class="bb-rl-notice bb-rl-notice--alt bb-rl-notice--error">';e.append(s+='<i class="bb-icons-rl-warning-circle"></i>'+r+"</div>")},submitInviteMemberPopupForm:function(e){e.preventDefault();var r=!0,s=t(this),i=s.closest("#bb-rl-invite-modal").find("#bb-rl-submit-invite");i.prop("disabled",!0),s.removeClass("bb-rl-form-error"),s.find(".bb-rl-input-field").removeClass("bb-rl-input-field--error"),s.find(".bb-rl-notice").remove();var a=t("#bb-rl-invite-name"),b=a.closest(".bb-rl-form-field-wrapper");""===a.val().trim()&&(a.addClass("bb-rl-input-field--error"),bp.Readylaunch.Members.appendMessage(b,bbReadyLaunchMembersVars.invite_invalid_name_message),r=!1);e=t("#bb-rl-invite-email"),a=e.closest(".bb-rl-form-field-wrapper"),b=e.val().trim();if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b)||(e.addClass("bb-rl-input-field--error"),bp.Readylaunch.Members.appendMessage(a,bbReadyLaunchMembersVars.invite_valid_email),r=!1),!r)return s.addClass("bb-rl-form-error"),void i.prop("disabled",!1);bp.Readylaunch.Members.showToastMessage(bbReadyLaunchMembersVars.invite_sending_invite,"info");r=s.serialize();t.ajax({method:"POST",url:BP_Nouveau.ajaxurl,data:r,success:function(e){e.success?(bp.Readylaunch.Members.showToastMessage(e.data.message,"success",!0),s[0].reset()):bp.Readylaunch.Members.showToastMessage(e.data.message,"error",!1)},error:function(){bp.Readylaunch.Members.showToastMessage(bbReadyLaunchMembersVars.invite_error_notice,"error",!1)},complete:function(){i.prop("disabled",!1)}})},resetInviteMemberPopupForm:function(){var e=t(this).closest("#bb-rl-invite-modal").find("#bb-rl-invite-form");e.removeClass("bb-rl-form-error"),e.find(".bb-rl-input-field").removeClass("bb-rl-input-field--error"),e.find(".bb-rl-notice").remove(),e[0].reset()}},bp.Readylaunch.Members.start()}((bp,jQuery));