window.bp=window.bp||{},(n=>{bp.Readylaunch.Members={start:function(){this.inviteMemberPopup(),this.addListeners()},addListeners:function(){n(document).on("keyup","#bb-rl-invite-name, #bb-rl-invite-email, #bb-rl-invite-custom-subject",function(){var e=n("#bb-rl-submit-invite");""!==n("#bb-rl-invite-name").val().trim()&&""!==n("#bb-rl-invite-email").val().trim()&&""!==n("#bb-rl-invite-custom-subject").val().trim()?e.prop("disabled",!1):e.prop("disabled",!0)})},inviteMemberPopup:function(){n(document).on("click","#bb-rl-invite-button",function(e){e.preventDefault();e=n("#bb-rl-invite-modal");e.length&&e.show()}),n(document).on("click",".bb-rl-modal-close-button",function(e){e.preventDefault(),bp.Readylaunch.Members.resetInviteMemberPopupForm.call(this,e);e=n(this).closest("#bb-rl-invite-modal");e.length&&e.hide()}),n(document).on("submit","#bb-rl-invite-form",this.submitInviteMemberPopupForm)},showToastMessage:function(e,r,s){r=r||"info",s=s||!1;var i=n("#bb-rl-invite-modal"),b=i.find(".bb-rl-modal-wrapper"),a=(n(".bb-rl-toast-message").remove(),"bb-rl-toast-message"),t='<span class="bb-rl-spinner"></span>';"error"===r?(a+=" bb-rl-toast-message--error",t+='<i class="bb-icons-rl-warning-circle"></i>'):"success"===r&&(a+=" bb-rl-toast-message--success",t+='<i class="bb-icons-rl-check-circle"></i>'),b.append('<div class="'+a+'">'+t+e+"</div>"),"error"!==r&&setTimeout(function(){n(".bb-rl-toast-message").fadeOut(500,function(){n(this).remove()}),s&&i.fadeOut(200)},5e3)},appendMessage:function(e,r){var s='<div class="bb-rl-notice bb-rl-notice--alt bb-rl-notice--error">';e.append(s+='<i class="bb-icons-rl-warning-circle"></i>'+r+"</div>")},submitInviteMemberPopupForm:function(e){e.preventDefault();var e=!0,r=n(this),s=r.closest("#bb-rl-invite-modal").find("#bb-rl-submit-invite"),i=(s.prop("disabled",!0),r.removeClass("bb-rl-form-error"),r.find(".bb-rl-input-field").removeClass("bb-rl-input-field--error"),r.find(".bb-rl-notice").remove(),n("#bb-rl-invite-name")),b=i.closest(".bb-rl-form-field-wrapper"),i=(""===i.val().trim()&&(i.addClass("bb-rl-input-field--error"),bp.Readylaunch.Members.appendMessage(b,bbReadyLaunchMembersVars.invite_invalid_name_message),e=!1),n("#bb-rl-invite-email")),b=i.closest(".bb-rl-form-field-wrapper"),a=i.val().trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)||(i.addClass("bb-rl-input-field--error"),bp.Readylaunch.Members.appendMessage(b,bbReadyLaunchMembersVars.invite_valid_email),e=!1),e?(bp.Readylaunch.Members.showToastMessage(bbReadyLaunchMembersVars.invite_sending_invite,"info"),a=r.serialize(),n.ajax({method:"POST",url:BP_Nouveau.ajaxurl,data:a,success:function(e){e.success?(bp.Readylaunch.Members.showToastMessage(e.data.message,"success",!0),r[0].reset()):bp.Readylaunch.Members.showToastMessage(e.data.message,"error",!1)},error:function(){bp.Readylaunch.Members.showToastMessage(bbReadyLaunchMembersVars.invite_error_notice,"error",!1)},complete:function(){s.prop("disabled",!1)}})):(r.addClass("bb-rl-form-error"),s.prop("disabled",!1))},resetInviteMemberPopupForm:function(){var e=n(this).closest("#bb-rl-invite-modal").find("#bb-rl-invite-form");e.removeClass("bb-rl-form-error"),e.find(".bb-rl-input-field").removeClass("bb-rl-input-field--error"),e.find(".bb-rl-notice").remove(),e[0].reset()}},bp.Readylaunch.Members.start()})((bp,jQuery));