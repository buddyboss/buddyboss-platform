(r=>{var o={init:function(){this.switchLdGridList(),this.setupCourseCardPopups(),this.addEvents(),this.sideNavToggle()},addEvents:function(){r(document).on("click",".bb-rl-ld-lesson-list .ld-expand-button",this.handleLessonExpand)},handleLessonExpand:function(o){o.preventDefault()},sideNavToggle:function(){var o,e;r("body").hasClass("mpcs-sidebar-with-accordion")&&(o=r(".mpcs-sidebar-content .mpcs-section-header"),(e=r(".mpcs-sidebar-content .mpcs-lesson.current")).length&&((e=e.closest(".mpcs-section").find(".mpcs-section-header")).addClass("active"),e.next(".mpcs-lessons").css("display","block"),e=e.closest(".mpcs-section").find(".mpcs-lesson.current"),r(".mpcs-sidebar-content").animate({scrollTop:e.offset().top-400},1e3)),r(o).on("click",function(){var o=r(this);o.toggleClass("active"),o.hasClass("active")?o.next(".mpcs-lessons").css("display","block"):o.next(".mpcs-lessons").css("display","none")}))},switchLdGridList:function(){var t=r(".bb-rl-courses-grid");r(document).on("click",".bb-rl-grid-filters .layout-view-course:not(.active)",function(o){var e;o.preventDefault(),void 0!==r(this).parent().attr("data-view")&&"ld-course"===r(this).parent().attr("data-view")&&(o=r(this).closest(".bb-rl-container"),e=r(this).closest(".bb-rl-grid-filters"),t=o.find(".bb-rl-courses-grid"),r(this).hasClass("layout-list-view")?(e.find(".layout-view-course").removeClass("active"),t.removeClass("grid"),r(this).addClass("active"),t.addClass("list")):(e.find(".layout-view-course").removeClass("active"),t.removeClass("list"),r(this).addClass("active"),t.addClass("grid")))})},setupCourseCardPopups:function(){var s=this;r(".bb-rl-course-card .bb-rl-course-title a").on({mouseenter:function(){var o=r(this).closest(".bb-rl-course-card"),e=o.find(".bb-rl-course-card-popup"),t=o.data("hoverTimeout");t&&(clearTimeout(t),o.removeData("hoverTimeout")),r(".bb-rl-course-card.bb-rl-card-popup-active").not(o).each(function(){var o=r(this),e=o.data("hoverTimeout");e&&(clearTimeout(e),o.removeData("hoverTimeout")),o.removeClass("bb-rl-card-popup-active")}),o.addClass("bb-rl-card-popup-active"),e.length&&s.positionCoursePopup(o,e)},mouseleave:function(){var o=r(this).closest(".bb-rl-course-card"),e=o.data("hoverTimeout"),e=(e&&clearTimeout(e),setTimeout(function(){o.removeClass("bb-rl-card-popup-active"),o.removeData("hoverTimeout")},300));o.data("hoverTimeout",e)}}),r(document).on({mouseenter:function(){var o=r(this).closest(".bb-rl-course-card"),e=o.data("hoverTimeout");e&&(clearTimeout(e),o.removeData("hoverTimeout"))},mouseleave:function(){var o=r(this).closest(".bb-rl-course-card"),e=o.data("hoverTimeout"),e=(e&&clearTimeout(e),setTimeout(function(){o.removeClass("bb-rl-card-popup-active"),o.removeData("hoverTimeout")},300));o.data("hoverTimeout",e)}},".bb-rl-course-card-popup"),r(window).on("resize",function(){r(".bb-rl-course-card .bb-rl-course-title a:hover").each(function(){var o=r(this).closest(".bb-rl-course-card"),e=o.find(".bb-rl-course-card-popup");e.length&&s.positionCoursePopup(o,e)})})},positionCoursePopup:function(o,e){var t;r(window).width()<=768?e.removeClass("bb-rl-popup-left bb-rl-popup-right bb-rl-popup-top bb-rl-popup-bottom"):(t=o.closest(".bb-rl-courses-grid").hasClass("list"),e.removeClass("bb-rl-popup-left bb-rl-popup-right bb-rl-popup-top bb-rl-popup-bottom"),t?this.positionPopupVertical(o,e):this.positionPopupHorizontal(o,e))},positionPopupHorizontal:function(o,e){var o=o[0].getBoundingClientRect(),t=r(window).width()-o.right,o=o.left;316<=t||!(316<=o)&&o<=t?e.addClass("bb-rl-popup-right"):e.addClass("bb-rl-popup-left")},positionPopupVertical:function(o,e){var o=o[0].getBoundingClientRect(),t=r(window).height(),s=o.top,t=t-o.bottom;270<=s||!(270<=t)&&t<=s?e.addClass("bb-rl-popup-top"):e.addClass("bb-rl-popup-bottom"),e.css("transform","")}};r(document).ready(function(){o.init()})})(jQuery);