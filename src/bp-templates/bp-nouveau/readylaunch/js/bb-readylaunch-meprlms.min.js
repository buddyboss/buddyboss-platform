(s=>{var o={init:function(){this.switchLdGridList(),this.setupCourseCardPopups(),this.addEvents()},addEvents:function(){s(document).on("click",".bb-rl-ld-lesson-list .ld-expand-button",this.handleLessonExpand)},handleLessonExpand:function(o){o.preventDefault()},switchLdGridList:function(){var e=s(".bb-rl-courses-grid");s(document).on("click",".bb-rl-grid-filters .layout-view-course:not(.active)",function(o){var t;o.preventDefault(),void 0!==s(this).parent().attr("data-view")&&"ld-course"===s(this).parent().attr("data-view")&&(o=s(this).closest(".bb-rl-container"),t=s(this).closest(".bb-rl-grid-filters"),e=o.find(".bb-rl-courses-grid"),s(this).hasClass("layout-list-view")?(t.find(".layout-view-course").removeClass("active"),e.removeClass("grid"),s(this).addClass("active"),e.addClass("list")):(t.find(".layout-view-course").removeClass("active"),e.removeClass("list"),s(this).addClass("active"),e.addClass("grid")))})},setupCourseCardPopups:function(){var r=this;s(".bb-rl-course-card .bb-rl-course-title a").on({mouseenter:function(){var o=s(this).closest(".bb-rl-course-card"),t=o.find(".bb-rl-course-card-popup"),e=o.data("hoverTimeout");e&&(clearTimeout(e),o.removeData("hoverTimeout")),s(".bb-rl-course-card.bb-rl-card-popup-active").not(o).each(function(){var o=s(this),t=o.data("hoverTimeout");t&&(clearTimeout(t),o.removeData("hoverTimeout")),o.removeClass("bb-rl-card-popup-active")}),o.addClass("bb-rl-card-popup-active"),t.length&&r.positionCoursePopup(o,t)},mouseleave:function(){var o=s(this).closest(".bb-rl-course-card"),t=o.data("hoverTimeout"),t=(t&&clearTimeout(t),setTimeout(function(){o.removeClass("bb-rl-card-popup-active"),o.removeData("hoverTimeout")},300));o.data("hoverTimeout",t)}}),s(window).on("resize",function(){s(".bb-rl-course-card .bb-rl-course-title a:hover").each(function(){var o=s(this).closest(".bb-rl-course-card"),t=o.find(".bb-rl-course-card-popup");t.length&&r.positionCoursePopup(o,t)})})},positionCoursePopup:function(o,t){var e;s(window).width()<=768?t.removeClass("bb-rl-popup-left bb-rl-popup-right bb-rl-popup-top bb-rl-popup-bottom"):(e=o.closest(".bb-rl-courses-grid").hasClass("list"),t.removeClass("bb-rl-popup-left bb-rl-popup-right bb-rl-popup-top bb-rl-popup-bottom"),e?this.positionPopupVertical(o,t):this.positionPopupHorizontal(o,t))},positionPopupHorizontal:function(o,t){var o=o[0].getBoundingClientRect(),e=s(window).width()-o.right,o=o.left;316<=e||!(316<=o)&&o<=e?t.addClass("bb-rl-popup-right"):t.addClass("bb-rl-popup-left")},positionPopupVertical:function(o,t){var o=o[0].getBoundingClientRect(),e=s(window).height(),r=o.top,e=e-o.bottom;270<=r||!(270<=e)&&e<=r?t.addClass("bb-rl-popup-top"):t.addClass("bb-rl-popup-bottom"),t.css("transform","")}};s(document).ready(function(){o.init()})})(jQuery);