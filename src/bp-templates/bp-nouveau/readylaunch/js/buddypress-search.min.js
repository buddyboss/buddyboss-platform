function bp_ps_clear_form_elements(e){var e=jQuery(e).closest("form"),t=new Event("change");e.find(":input").each(function(){switch(this.type){case"password":case"select-multiple":case"select-one":case"text":case"email":case"date":case"url":case"search":case"textarea":jQuery(this).val("");break;case"checkbox":case"radio":this.checked=!1,this.dispatchEvent(t)}}),jQuery.removeCookie("bp_ps_request",{path:"/"}),e.find(".submit").trigger("click")}jQuery(document).ready(function(s){BP_SEARCH.cache=[];var c=[],r=null;function n(){var o;"1"==BP_SEARCH.enable_ajax_search&&(o=s(document).height(),s("body").hasClass("rtl"),s(BP_SEARCH.rl_autocomplete_selector).each(function(){var e,t,n=s(this),a=n.find('input[name="s"], input[type=search]');0<a.length&&(t=(e=a.offset()).top+a.outerHeight(),o-t<400&&e.top,c.push(a),t=a.parents("form").find(".bb-rl-search-results-container"),s(a).autocomplete({source:function(e,t){n.find(".bb-rl-network-search-clear").removeClass("bp-hide"),n.find(".ui-autocomplete").removeClass("bp-hide");var a=e.term;a in BP_SEARCH.cache?t(BP_SEARCH.cache[a]):(r&&r.abort(),e={action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,search_term:e.term,per_page:BP_SEARCH.per_page,subset:n.find('select[name="subset"]').val()||""},t({value:'<div class="loading-msg"><span class="bb_global_search_spinner"></span>'+BP_SEARCH.loading_msg+"</div>"}),r=s.ajax({url:BP_SEARCH.ajaxurl,dataType:"json",data:e,success:function(e){BP_SEARCH.cache[a]=e,t(e),r=null},error:function(e,t,a){"abort"!==t&&console.error("Search AJAX error:",a),r=null}}))},minLength:2,delay:500,select:function(e,t){t=s(t.item.value).find("a").attr("href");return t&&(window.location=t),!1},focus:function(e,t){return e.preventDefault(),s(".ui-autocomplete li").removeClass("ui-state-hover"),s(".ui-autocomplete").find("li:has(a.ui-state-focus)").addClass("ui-state-hover"),!1},open:function(){s(".bp-search-ac").outerWidth(s(this).outerWidth())},appendTo:t,position:{my:"left top",at:"left bottom",of:a,collision:"flip"}}).data("ui-autocomplete")._renderItem=function(e,t){return e.addClass("bp-search-ac"),0!=n.parents("header").length&&e.addClass("bp-search-ac-header"),(""!=t.type_label?(s(e).data("current_cat",t.type),s("<li>").attr("class","bbls-"+t.type+"-type bbls-category").append("<div>"+t.value+"</div>")):s("<li>").attr("class","bbls-"+t.type+"-type bbls-sub-item").append(t.value)).appendTo(e)},s(a).on("focus click",function(){s(this).autocomplete("search",this.value)}))}))}n(),s([BP_SEARCH.rl_autocomplete_selector].filter(Boolean).join(",")).each(function(){var a=s(this);s('input[name="bp_search"]',a).length||(s("<input>").attr({type:"hidden",name:"bp_search",value:"1"}).appendTo(a),s("<input>").attr({type:"hidden",name:"view",value:"content"}).appendTo(a)),a.find('select[name="subset"]').on("change",function(){var e,t=a.find('input[name="s"].ui-autocomplete-input, input[type=search].ui-autocomplete-input');0<t.length&&t.data("ui-autocomplete")&&(e=t.autocomplete("option","minLength"),t.val().length>=e)&&(e=t.val(),delete BP_SEARCH.cache[e],t.autocomplete("search",e))})}),s(document).on("click",".bb-rl-network-search-clear",function(e){e.preventDefault();var e=s(e.currentTarget),t=e.closest("#search-form"),a=t.find("#search"),n=(a.val(""),t.find(".search-filter-label"));n.length&&n.text(bbReadyLaunchFront.filter_all),a.focus(),t.find(".ui-autocomplete").length&&t.find(".ui-autocomplete").addClass("bp-hide"),e.addClass("bp-hide")}),s(document).on("click",".bb-rl-network-search-subnav .search-nav li a",function(e){e.preventDefault();var a=this,e=(s(this).addClass("loading"),s.post(BP_SEARCH.ajaxurl,{action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,subset:s(this).parent().data("item"),s:BP_SEARCH.search_term,view:"content"}));return e.done(function(e){var t;s(a).removeClass("loading"),""!=e&&((t=s(".bp-search-page")).after(e),t.remove()),s(".bb-rl-network-search-subnav .search-nav li").removeClass("active current selected"),s(a).parent("li").addClass("active current"),n()}),e.fail(function(){s(a).removeClass("loading")}),!1}),s(document).on("click",".bp-search-results-wrapper .pagination-links a",function(e){e.preventDefault();var a=this,e=(s(this).addClass("loading"),{action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,subset:s(this).parent().data("item"),s:BP_SEARCH.search_term,view:"content",list:s(this).data("pagenumber")}),t=s(".bb-rl-network-search-subnav .search-nav li.active").data("item"),t=(e.subset=t,s.post(BP_SEARCH.ajaxurl,e));return t.done(function(e){var t;s(a).removeClass("loading"),""!=e&&((t=s(".bp-search-page")).after(e),t.remove())}),t.fail(function(){s(a).removeClass("loading")}),!1}),s(document).on("keydown",function(e){"Escape"!==e.key&&27!==e.keyCode||s("#bb-rl-network-search-modal").addClass("bp-hide")}),s("body.bp-nouveau").on("click",".bp-search-page button.friendship-button, .bp-search-page button.group-button",function(){window.location=this.getAttribute("data-bp-nonce")})});