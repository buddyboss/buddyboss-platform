function bp_ps_clear_form_elements(e){var e=jQuery(e).closest("form"),a=new Event("change");e.find(":input").each(function(){switch(this.type){case"password":case"select-multiple":case"select-one":case"text":case"email":case"date":case"url":case"search":case"textarea":jQuery(this).val("");break;case"checkbox":case"radio":this.checked=!1,this.dispatchEvent(a)}}),jQuery.removeCookie("bp_ps_request",{path:"/"}),e.find(".submit").trigger("click")}jQuery(document).ready(function(c){BP_SEARCH.cache=[];var r=[];function n(){var s,o;"1"==BP_SEARCH.enable_ajax_search&&(s=c(document).height(),o=c("body").hasClass("rtl"),c(BP_SEARCH.autocomplete_selector).each(function(){var e,a,n=c(this),t=n.find('input[name="s"], input[type=search]');0<t.length&&(e=(a=t.offset()).top+t.outerHeight(),s-e<400&&a.top,r.push(t),a=t.parents("form").find(".bb-rl-search-results-container"),c(t).autocomplete({source:function(e,a){n.find(".bb-rl-network-search-clear").removeClass("bp-hide");var t=e.term;t in BP_SEARCH.cache?a(BP_SEARCH.cache[t]):(e={action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,search_term:e.term,per_page:BP_SEARCH.per_page,subset:n.find('select[name="subset"]').val()||""},a({value:'<div class="loading-msg"><span class="bb_global_search_spinner"></span>'+BP_SEARCH.loading_msg+"</div>"}),c.ajax({url:BP_SEARCH.ajaxurl,dataType:"json",data:e,success:function(e){BP_SEARCH.cache[t]=e,a(e)}}))},minLength:2,delay:500,select:function(e,a){a=c(a.item.value).find("a").attr("href");return a&&(window.location=a),!1},focus:function(){return c(".ui-autocomplete li").removeClass("ui-state-hover"),c(".ui-autocomplete").find("li:has(a.ui-state-focus)").addClass("ui-state-hover"),!1},open:function(){c(".bp-search-ac").outerWidth(c(this).outerWidth())},appendTo:a,position:{my:"left top",at:"left bottom",of:t,collision:"flip"},close:function(){c(".ui-autocomplete").show()}}).data("ui-autocomplete")._renderItem=function(e,a){return e.addClass("bp-search-ac"),0!=n.parents("header").length&&e.addClass("bp-search-ac-header"),""!=a.type_label?(c(e).data("current_cat",a.type),c("<li>").attr("class","bbls-"+a.type+"-type bbls-category").append("<div>"+a.value+"</div>").appendTo(e)):c("<li>").attr("class","bbls-"+a.type+"-type bbls-sub-item").append('<a class="x">'+a.value+"</a>").appendTo(e)})}),BP_SEARCH.forums_autocomplete&&c("#bbp-search-form, #bbp-search-index-form").each(function(){var e,a,t,n=c(this).find("#bbp_search");0<n.length&&(t={},a=(e=n.offset()).top+n.outerHeight(),t=o?{my:"right top",at:"right bottom",collision:"none"}:{my:"left top",at:"left bottom",collision:"none"},(a=s-a)<400&&e.top>a&&(t.collision="none flipfit"),c(n).autocomplete({source:function(e,a){var t=e.term;t in BP_SEARCH.cache?a(BP_SEARCH.cache[t]):(e={action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,search_term:e.term,forum_search_term:!0,per_page:15},a({value:'<div class="loading-msg"><span class="bb_global_search_spinner"></span><span>'+BP_SEARCH.loading_msg+"</span></div>"}),c.ajax({url:BP_SEARCH.ajaxurl,dataType:"json",data:e,success:function(e){BP_SEARCH.cache[t]=e,a(e)}}))},minLength:2,select:function(e,a){return window.location=c(a.item.value).find("a").attr("href"),!1},focus:function(){return c(".ui-autocomplete li").removeClass("ui-state-hover"),c(".ui-autocomplete").find("li:has(a.ui-state-focus)").addClass("ui-state-hover"),!1},open:function(){c(".bp-search-ac").outerWidth(c(this).outerWidth())},position:t}).data("ui-autocomplete")._renderItem=function(e,a){return e.addClass("bp-search-ac"),c("body.forum-archive").length&&e.addClass("bp-forum-search-ac-header"),c("#bbp_search").length&&e.addClass("bp-forum-search-ac-header"),c("body.bbp-search.forum-search").length&&e.addClass("bp-forum-search-ac-header"),""!=a.type_label?(c(e).data("current_cat",a.type),c("<li>").attr("class","bbls-"+a.type+"-type bbls-category").append('<span class="bb-cat-title">'+a.value+"</span>").appendTo(e)):c("<li>").attr("class","bbls-"+a.type+"-type bbls-sub-item").append('<a class="x">'+a.value+"</a>").appendTo(e)})}))}n(),c([BP_SEARCH.autocomplete_selector,BP_SEARCH.form_selector].filter(Boolean).join(",")).each(function(){var t=c(this);c('input[name="bp_search"]',t).length||(c("<input>").attr({type:"hidden",name:"bp_search",value:"1"}).appendTo(t),c("<input>").attr({type:"hidden",name:"view",value:"content"}).appendTo(t)),t.find('select[name="subset"]').on("change",function(){var e,a=t.find('input[name="s"], input[type=search]');0<a.length&&2<=a.val().length&&(e=a.val(),delete BP_SEARCH.cache[e],a.autocomplete("search",e))})}),c(document).on("click",".bb-rl-network-search-clear",function(e){e.preventDefault();var a=c(e.currentTarget),t=a.closest("#search-form"),e=t.find("#search");e.val("");t=t.find(".search-filter-label");t.length&&t.text(bbReadyLaunchFront.filter_all),e.focus(),c(".ui-autocomplete").fadeOut(),a.addClass("bp-hide")}),c(document).on("click",".bb-rl-network-search-subnav .search-nav li a",function(e){e.preventDefault();var t=this;c(this).addClass("loading");e=c.post(BP_SEARCH.ajaxurl,{action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,subset:c(this).parent().data("item"),s:BP_SEARCH.search_term,view:"content"});return e.done(function(e){var a;c(t).removeClass("loading"),""!=e&&((a=c(".bp-search-page")).after(e),a.remove()),c(".bb-rl-network-search-subnav .search-nav li").removeClass("active current selected"),c(t).parent("li").addClass("active current"),n()}),e.fail(function(){c(t).removeClass("loading")}),!1}),c(document).on("click",".bp-search-results-wrapper .pagination-links a",function(e){e.preventDefault();var t=this;c(this).addClass("loading");var a={action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,subset:c(this).parent().data("item"),s:BP_SEARCH.search_term,view:"content",list:c(this).data("pagenumber")},e=c(".bb-rl-network-search-subnav .search-nav li.active").data("item");a.subset=e;a=c.post(BP_SEARCH.ajaxurl,a);return a.done(function(e){var a;c(t).removeClass("loading"),""!=e&&((a=c(".bp-search-page")).after(e),a.remove())}),a.fail(function(){c(t).removeClass("loading")}),!1}),c("body.bp-nouveau").on("click",".bp-search-page button.friendship-button, .bp-search-page button.group-button",function(){window.location=this.getAttribute("data-bp-nonce")})});