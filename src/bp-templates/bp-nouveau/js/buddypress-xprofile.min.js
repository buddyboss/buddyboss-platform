window.bp=window.bp||{},function(e,i){if("undefined"!=typeof BP_Nouveau){var t=i("#profile-edit-form .repeater_group_outer").length;if(t>0){var r=[];i("#profile-edit-form .repeater_group_outer").each(function(){var e=i(this);r.push(e.data("set_no")),t>1&&e.find(".repeater_group_inner").hide();var a="";e.find(".editfield").each(function(){var e=i(this).find("input[type=text],input[type=number],input[type=email],input[type=phone],input:checked,textarea,select").val();if(""!==i.trim(e))return a=i.trim(e),!1}),e.find(".repeater_set_title").html(a)}),i("#profile-edit-form").append('<input type="hidden" name="repeater_set_sequence" value="'+r.join(",")+'">'),i(".repeater_sets_sortable").sortable({items:".repeater_group_outer",update:function(){var e=[];i("#profile-edit-form .repeater_group_outer").each(function(){e.push(i(this).data("set_no"))}),i('#profile-edit-form [name="repeater_set_sequence"]').val(e.join(","))}})}i("#profile-edit-form .repeater_group_outer .repeater_set_edit").click(function(e){e.preventDefault(),i(this).closest(".repeater_group_outer").find(".repeater_group_inner").slideToggle(),i(this).parents(".repeater_group_outer").toggleClass("active")}),i("#profile-edit-form .repeater_group_outer .repeater_set_delete").click(function(e){var t=i(this);if(e.preventDefault(),!t.hasClass("disabled")&&confirm(BP_Nouveau.confirm_delete_set)){var r=[];t.closest(".repeater_group_outer").find(".editfield").each(function(){var e=i(this).find("input,textarea,select").attr("name");e=(e=e.replace("field_","")).replace("[]",""),r.push(e)}),t.closest(".repeater_group_outer").remove();var a=[];i("#profile-edit-form .repeater_group_outer").each(function(){a.push(i(this).data("set_no"))}),i('#profile-edit-form [name="repeater_set_sequence"]').val(a.join(","));for(var n=i('#profile-edit-form [name="field_ids"]').val().split(","),o=[],l=0;l<n.length;l++){for(var d=!1,s=0;s<r.length;s++)if(n[l]===r[s]){d=!0;break}d||o.push(n[l])}o=o.join(","),i('#profile-edit-form [name="field_ids"]').val(o),i('#profile-edit-form [name="deleted_field_ids"]').length||i("#profile-edit-form").append('<input type="hidden" name="deleted_field_ids" >'),i('#profile-edit-form [name="deleted_field_ids"]').val(r.join(",")),i("#profile-edit-form .repeater_group_outer").length}}),i("#profile-edit-form #btn_add_repeater_set").click(function(e){e.preventDefault();var t=i(this);t.hasClass("disabled")||(t.addClass("disabled"),i.ajax({url:ajaxurl,method:"POST",data:{action:"bp_xprofile_add_repeater_set",_wpnonce:t.data("nonce"),group:t.data("group")},success:function(){window.location.reload()}}))}),i(".field-visibility-settings").addClass("bp-hide"),i(".visibility-toggle-link").attr("aria-expanded","false"),i(".visibility-toggle-link").on("click",function(e){e.preventDefault(),i(this).attr("aria-expanded","true"),i(this).parent().addClass("field-visibility-settings-hide bp-hide").siblings(".field-visibility-settings").removeClass("bp-hide").addClass("field-visibility-settings-open")}),i(".field-visibility-settings-close").on("click",function(e){e.preventDefault();var t=i(this).parent(),r=i(".iradio_minimal").length>0?t.find("input:checked").parent().next(".field-visibility-text").text():t.find("input:checked").parent().text();t.removeClass("field-visibility-settings-open").addClass("bp-hide").siblings(".field-visibility-settings-toggle").children(".current-visibility-level").text(r).end().addClass("bp-show").removeClass("field-visibility-settings-hide bp-hide"),i(".visibility-toggle-link").attr("aria-expanded","false")}),i("#profile-edit-form input:not(:submit), #profile-edit-form textarea, #profile-edit-form select, #signup_form input:not(:submit), #signup_form textarea, #signup_form select").change(function(){var e=!0;i("#profile-edit-form #btn_add_repeater_set").addClass("disabled"),i("#profile-edit-form input:submit, #signup_form input:submit").on("click",function(){e=!1,i("#profile-edit-form #btn_add_repeater_set").removeClass("disabled")}),window.onbeforeunload=function(){if(e)return BP_Nouveau.unsaved_changes}}),window.clear=function(e){e&&(e=e.replace("[","\\[").replace("]","\\]"),i("#"+e+" option").length?i.each(i("#"+e+" option"),function(e,t){i(t).prop("selected",!1)}):i("#"+e+" [type=radio]").length&&i.each(i("#"+e+" [type=radio]"),function(e,t){i(t).prop("checked",!1)}))}}}(bp,jQuery);