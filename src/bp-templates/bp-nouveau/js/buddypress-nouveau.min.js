window.wp=window.wp||{},window.bp=window.bp||{},function(h){"undefined"!=typeof BP_Nouveau&&(bp.Nouveau={start:function(){this.setupGlobals(),this.prepareDocument(),this.initObjects(),this.setHeartBeat(),this.addListeners(),this.switchGridList(),this.sendInvitesRevokeAccess(),this.sentInvitesFormValidate(),this.registerPopUp(),this.loginPopUp(),this.reportPopUp(),this.reportActions(),this.reportedPopup(),this.togglePassword(),this.enableSubmitOnLegalAgreement(),this.profileNotificationSetting(),"undefined"!=typeof BB_Nouveau_Presence&&this.userPresenceStatus();var r=this;h(document).on("bb_trigger_toast_message",function(e,t,a,i,o,n,s){r.bbToastMessage(t,a,i,o,n,s)}),bp.Nouveau.lazyLoad(".lazy"),h(window).on("scroll resize",function(){bp.Nouveau.lazyLoad(".lazy")})},bbToastMessage:function(e,t,a,i,o,n){var s,r,d,l,c,p,u;function b(){h(r).removeClass("pull-animation").addClass("close-item").delay(500).remove()}t&&""!=t.trim()&&(s="unique-"+Math.floor(1e6*Math.random()),r="."+s,d="",n=n&&"number"==typeof n?1e3*n:5e3,null!==i&&(d="has-url"),p=c=l="",p+='<div class="toast-messages-icon"><i class="bb-icon bb-icon-'+(c=a?"success"===(l=a)?"check":"warning"===l?"exclamation-triangle":"info":c)+'"></i></div>',p+='<div class="toast-messages-content">',e&&(p+='<span class="toast-messages-title">'+e+"</span>"),t&&(p+='<span class="toast-messages-content">'+t+"</span>"),p+="</div>",p+='<div class="actions"><a class="action-close primary" data-bp-tooltip-pos="left" data-bp-tooltip="'+BP_Nouveau.close+'"><i class="bb-icon bb-icon-times" aria-hidden="true"></i></a></div>',p+=i?'<a class="toast-messages-url" href="'+i+'"></a>':"",h((h(".bb-toast-messages-enable").length||(h(".bb-onscreen-notification-enable ul.notification-list").length?(u=h(".bb-onscreen-notification").hasClass("bb-position-left")?"left":"right",u=h('<div class="bb-toast-messages-enable bb-toast-messages-enable-mobile-support"><div class="bb-toast-messages bb-position-'+u+' single-toast-messages"><ul class="toast-messages-list bb-toast-messages-list"></u></div></div>'),h(".bb-onscreen-notification").show(),h(u).insertBefore(".bb-onscreen-notification-enable ul.notification-list")):(u=h('<div class="bb-toast-messages-enable bb-toast-messages-enable-mobile-support"><div class="bb-toast-messages bb-position-right single-toast-messages"><ul class="toast-messages-list bb-toast-messages-list"></u></div></div>'),h("body").append(u))),".bb-toast-messages-enable .toast-messages-list")).append('<li class="item-list read-item pull-animation bp-message-'+l+" "+s+" "+d+'"> '+p+" </li>"),o&&setInterval(function(){b()},n),h(r+" .actions .action-close").on("click",function(){b()}))},setupGlobals:function(){this.ajax_request=null,this.objects=h.map(BP_Nouveau.objects,function(e){return e}),this.objectNavParent=BP_Nouveau.object_nav_parent,this.heartbeat=wp.heartbeat||!1,this.querystring=this.getLinkParams()},prepareDocument:function(){var a;h("body").hasClass("no-js")&&h("body").removeClass("no-js").addClass("js"),BP_Nouveau.warnings&&"undefined"!=typeof console&&console.warn&&h.each(BP_Nouveau.warnings,function(e,t){console.warn(t)}),h(".buddypress_object_nav .widget-title").length&&(a=h(".buddypress_object_nav .widget-title").html(),h("body").find('*:contains("'+a+'")').each(function(e,t){h(t).hasClass("widget-title")||a!==h(t).html()||h(t).is("a")||h(t).remove()}))},getStorage:function(e,t){e=(e=sessionStorage.getItem(e))?JSON.parse(e):{};return void 0!==t?e[t]||!1:e},setStorage:function(e,t,a){var i=this.getStorage(e);return void 0===a&&void 0!==i[t]?delete i[t]:i[t]=a,sessionStorage.setItem(e,JSON.stringify(i)),null!==sessionStorage.getItem(e)},getLinkParams:function(e,t){e=e?-1!==e.indexOf("?")?"?"+e.split("?")[1]:"":document.location.search;if(!e)return null;e=e.replace(/(^\?)/,"").split("&").map(function(e){return this[(e=e.split("="))[0]]=e[1],this}.bind({}))[0];return t?e[t]:e},urlDecode:function(e,t){var a=t||{amp:"&",lt:"<",gt:">",quot:'"',"#039":"'"};return decodeURIComponent(e.replace(/\+/g," ")).replace(/&([^;]+);/g,function(e,t){return a[t]||""})},ajax:function(e,t,a){this.ajax_request&&void 0===a&&this.ajax_request.abort();e=h.extend({},bp.Nouveau.getStorage("bp-"+t),{nonce:BP_Nouveau.nonces[t]},e);return void 0!==BP_Nouveau.customizer_settings&&(e.customized=BP_Nouveau.customizer_settings),void 0!==BP_Nouveau.modbypass&&(e.modbypass=BP_Nouveau.modbypass),this.ajax_request=h.post(BP_Nouveau.ajaxurl,e,"json"),this.ajax_request},inject:function(e,t,a){h(e).length&&t&&(("append"===(a=a||"reset")?h(e).append(t):"prepend"===a?h(e).prepend(t):h(e).html(t)).find("li.activity-item").each(this.hideSingleUrl),"undefined"==typeof bp_mentions&&void 0===bp.mentions||(h(".bp-suggestions").bp_mentions(bp.mentions.users),h("#whats-new").on("inserted.atwho",function(){var e;window.getSelection&&document.createRange?(e=window.getSelection&&window.getSelection())&&0<e.rangeCount&&(window.activityCaretPosition=e.getRangeAt(0)):window.activityCaretPosition=document.selection.createRange()})))},hideSingleUrl:function(){var e=h(this).find(".activity-inner > p").removeAttr("br").removeAttr("a").text(),t="",a="",i="",o=0;if(0<=e.indexOf("http://")?(i=e.indexOf("http://"),o=1):0<=e.indexOf("https://")?(i=e.indexOf("https://"),o=1):0<=e.indexOf("www.")&&(i=e.indexOf("www"),o=1),1===o){for(var n=i;n<e.length&&(" "!==e[n]&&"\n"!==e[n]);n++)t+=e[n];""!==t&&(a=h.trim(e.replace(t,""))),0===h.trim(a).length&&0!==h(this).find("iframe").length&&""!==t&&h(this).find(".activity-inner > p:first").hide()}},objectRequest:function(i){var e,o=this;if((i=h.extend({object:"",scope:null,filter:null,target:"#buddypress [data-bp-list]",search_terms:"",page:1,extras:null,caller:null,template:null,method:"reset"},i)).object&&i.target)return"activity"==i.object&&"#buddypress [data-bp-list] ul.bp-list"==i.target&&(i.target="#buddypress [data-bp-list] ul.bp-list:not(#bb-media-model-container ul.bp-list)"),["members","activity","media","document"].includes(i.object)&&!h(this.objectNavParent+' [data-bp-scope="'+i.scope+'"]').length&&(i.scope="all"),i.search_terms&&(i.search_terms=i.search_terms.replace(/</g,"&lt;").replace(/>/g,"&gt;")),null!==i.scope&&this.setStorage("bp-"+i.object,"scope",i.scope),null!==i.filter&&this.setStorage("bp-"+i.object,"filter",i.filter),null!==i.extras&&this.setStorage("bp-"+i.object,"extras",i.extras),h(this.objectNavParent+" [data-bp-object]").each(function(){h(this).removeClass("selected loading")}),(h(this.objectNavParent+' [data-bp-scope="'+i.scope+'"]').length?h(this.objectNavParent+' [data-bp-scope="'+i.scope+'"], #object-nav li.current'):h(this.objectNavParent+" [data-bp-scope]:eq(0), #object-nav li.current")).addClass("selected loading"),h('#buddypress [data-bp-filter="'+i.object+'"] option[value="'+i.filter+'"]').prop("selected",!0),"friends"===i.object||"group_members"===i.object?(i.template=i.object,i.object="members"):"group_requests"===i.object?(i.object="groups",i.template="group_requests"):"group_subgroups"===i.object?(i.object="groups",i.template="group_subgroups"):"notifications"===i.object&&(i.object="members",i.template="member_notifications"),e=h.extend({action:i.object+"_filter"},i),this.ajax(e,i.object).done(function(e){if(!1!==e.success&&!_.isUndefined(e.data)){if(!h("body.group-members.members.buddypress").length||_.isUndefined(e.data)||_.isUndefined(e.data.count)||h("body.group-members.members.buddypress ul li#members-groups-li").find("span").text(e.data.count),h(o.objectNavParent+' [data-bp-scope="'+i.scope+'"]').removeClass("loading"),h(o.objectNavParent+' [data-bp-scope="'+i.scope+'"]').find("span").text(""),_.isUndefined(e.data)||_.isUndefined(e.data.count)||h(o.objectNavParent+' [data-bp-scope="'+i.scope+'"]').find("span").text(e.data.count),!_.isUndefined(e.data)&&!_.isUndefined(e.data.scopes))for(var t in e.data.scopes)h(o.objectNavParent+' [data-bp-scope="'+t+'"]').find("span").text(e.data.scopes[t]);var a;"reset"!==i.method?(o.inject(i.target,e.data.contents,i.method),h(i.target).trigger("bp_ajax_"+i.method,h.extend(i,{response:e.data}))):"pag-bottom"===i.caller?(a=null,a=h("#subnav").length?h("#subnav").parent():h(i.target),h("html,body").animate({scrollTop:a.offset().top},"slow",function(){h(i.target).fadeOut(100,function(){o.inject(this,e.data.contents,i.method),h(this).fadeIn(100),h(i.target).trigger("bp_ajax_request",h.extend(i,{response:e.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3)})})):h(i.target).fadeOut(100,function(){o.inject(this,e.data.contents,i.method),h(this).fadeIn(100),h(i.target).trigger("bp_ajax_request",h.extend(i,{response:e.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3)}),setTimeout(function(){o.reportPopUp(),o.reportedPopup()},1e3)}})},initObjects:function(){var i,o=this,n={},s="all",r="",d=null,l=null;h.each(this.objects,function(e,t){var a;h('#buddypress [data-bp-list="'+t+'"][data-ajax="false"]').length||(i=o.getStorage("bp-"+t),void 0!==(a=window.location.hash.substr(1))&&"following"==a?s=a:void 0!==i.scope&&(s=i.scope),void 0!==i.extras&&"notifications"!==t&&(d=i.extras),h('#buddypress [data-bp-filter="'+t+'"]').length&&(void 0!==i.filter?(l=i.filter,h('#buddypress [data-bp-filter="'+t+'"] option[value="'+l+'"]').prop("selected",!0)):"-1"!==h('#buddypress [data-bp-filter="'+t+'"]').val()&&"0"!==h('#buddypress [data-bp-filter="'+t+'"]').val()&&(l=h('#buddypress [data-bp-filter="'+t+'"]').val())),h(this.objectNavParent+' [data-bp-object="'+t+'"]').length&&(h(this.objectNavParent+' [data-bp-object="'+t+'"]').each(function(){h(this).removeClass("selected")}),h(this.objectNavParent+' [data-bp-scope="'+t+'"], #object-nav li.current').addClass("selected")),null!==o.querystring&&(void 0!==o.querystring[t+"_search"]?r=decodeURI(o.querystring[t+"_search"]):void 0!==o.querystring.s&&(r=decodeURI(o.querystring.s)),r&&h('#buddypress [data-bp-search="'+t+'"] input[type=search]').val(r)),h('#buddypress [data-bp-list="'+t+'"]').length&&(n={object:t,scope:s,filter:l,search_terms:r,extras:d},h('#buddypress [data-bp-member-type-filter="'+t+'"]').length?n.member_type_id=h('#buddypress [data-bp-member-type-filter="'+t+'"]').val():h('#buddypress [data-bp-group-type-filter="'+t+'"]').length&&(n.group_type=h('#buddypress [data-bp-group-type-filter="'+t+'"]').val()),o.objectRequest(n)))})},setHeartBeat:function(){void 0!==BP_Nouveau.pulse&&this.heartbeat&&(this.heartbeat.interval(Number(BP_Nouveau.pulse)),h.fn.extend({"heartbeat-send":function(){return this.bind("heartbeat-send")}}),h.fn.extend({"heartbeat-tick":function(){return this.bind("heartbeat-tick")}}))},addListeners:function(){h("[data-bp-disable-input]").on("change",this.toggleDisabledInput),h(this.objectNavParent+" .bp-navs").on("click","a",this,this.scopeQuery),h(document).on("change","#buddypress [data-bp-filter]",this,this.filterQuery),h(document).on("change","#buddypress [data-bp-group-type-filter]",this,this.typeGroupFilterQuery),h(document).on("change","#buddypress [data-bp-member-type-filter]",this,this.typeMemberFilterQuery),h("#buddypress [data-bp-search]").on("submit","form",this,this.searchQuery),h("#buddypress [data-bp-search] form").on("search","input[type=search]",this.resetSearch),h("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .bp-messages-content").on("click","[data-bp-btn-action]",this,this.buttonAction),h("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("blur","[data-bp-btn-action]",this,this.buttonRevert),h("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("mouseover","[data-bp-btn-action]",this,this.buttonHover),h("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("mouseout","[data-bp-btn-action]",this,this.buttonHoverout),h("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("mouseover",".awaiting_response_friend",this,this.awaitingButtonHover),h("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list, #buddypress .messages-screen").on("mouseout",".awaiting_response_friend",this,this.awaitingButtonHoverout),h(document).on("click","#buddypress .bb-leave-group-popup .bb-confirm-leave-group",this.leaveGroupAction),h(document).on("click","#buddypress .bb-leave-group-popup .bb-close-leave-group",this.leaveGroupClose),h(document).on("click","#buddypress .bb-remove-connection .bb-confirm-remove-connection",this.removeConnectionAction),h(document).on("click","#buddypress .bb-remove-connection .bb-close-remove-connection",this.removeConnectionClose),h(document).on("click","#buddypress table.invite-settings .field-actions .field-actions-remove, #buddypress table.invite-settings .field-actions-add",this,this.addRemoveInvite),h(document).on("click",".show-action-popup",this.showActionPopup),h(document).on("click","#message-threads .block-member",this.threadListBlockPopup),h(document).on("click","#message-threads .report-content",this.threadListReportPopup),h(document).on("click",".bb-close-action-popup, .action-popup-overlay",this.closeActionPopup),h(document).on("keyup",this,this.keyUp),h("[data-bp-close]").on("click",this,this.closeNotice),h("#buddypress [data-bp-list]").on("click","[data-bp-pagination] a",this,this.paginateAction),h(document).on("click",this.closePickersOnClick),document.addEventListener("keydown",this.closePickersOnEsc),h(document).on("click","#item-header a.position-change-cover-image, .header-cover-reposition-wrap a.cover-image-save, .header-cover-reposition-wrap a.cover-image-cancel",this.coverPhotoCropper),h(document).on("click","#cover-photo-alert .bb-model-close-button",this.coverPhotoCropperAlert),h(document).on("click",this.toggleMoreOption.bind(this)),h(document).on("heartbeat-send",this.bbHeartbeatSend.bind(this)),h(document).on("heartbeat-tick",this.bbHeartbeatTick.bind(this)),bp.Nouveau.notificationRemovedAction(),bp.Nouveau.removeAllNotification(),bp.Nouveau.setTitle(),h(document).on("click",".more-following .count-more",this.bbWidgetMoreFollowing)},bbHeartbeatSend:function(e,t){t.onScreenNotifications=!0,h("#buddypress").trigger("bb_heartbeat_send",t)},bbHeartbeatTick:function(e,t){bp.Nouveau.bbInjectOnScreenNotifications(e,t)},bbInjectOnScreenNotifications:function(e,t){var a,i,o,n,s,r;"1"==h(".bb-onscreen-notification").data("enable")&&(void 0===t.on_screen_notifications&&""===t.on_screen_notifications||(a=h(".bb-onscreen-notification"),r=(i=a.find(".notification-list")).data("removed-items"),o=i.data("animated-items"),n=[],s=h(h.parseHTML("<ul>"+t.on_screen_notifications+"</ul>")),h.each(r,function(e,t){t=s.find("[data-notification-id="+t+"]");t.length&&t.closest(".read-item").remove()}),(r=s.find(".read-item")).each(function(e,t){var a=h(t).find(".actions .action-close").data("notification-id");"-1"==h.inArray(a,o)?(h(t).addClass("pull-animation"),o.push(a),n.push(a)):h(t).removeClass("pull-animation")}),n.length&&r.each(function(e,t){var a=h(t).find(".actions .action-close").data("notification-id");"-1"==h.inArray(a,n)&&(h(t).removeClass("recent-item"),(t=i.data("border-items")).push(a),i.attr("data-border-items",JSON.stringify(t)))}),i.attr("data-animated-items",JSON.stringify(o)),r.length&&(a.removeClass("close-all-items"),r.eq(2).nextAll().addClass("bb-more-item"),3<r.length?i.addClass("bb-more-than-3"):i.removeClass("bb-more-than-3"),a.show(),i.empty().html(r),bp.Nouveau.visibilityOnScreenClearButton(),bp.Nouveau.notificationBorder(),bp.Nouveau.notificationAutoHide(),bp.Nouveau.browserTabFlashNotification(),bp.Nouveau.browserTabCountNotification())))},notificationBorder:function(){var e=h(".bb-onscreen-notification").find(".notification-list"),i=e.data("border-items");e.find(".read-item").each(function(e,t){var a=h(t).find(".actions .action-close").data("notification-id");"-1"==h.inArray(a,i)&&h(t).addClass("recent-item")}),e.attr("data-border-items",JSON.stringify(i))},browserTabCountNotification:function(){var e=h(".bb-onscreen-notification"),t=e.find(".notification-list").find(".read-item"),a=h("html").find("title"),e=e.data("title-tag");0<t.length?a.text("("+t.length+") "+e):a.text(e)},browserTabFlashNotification:function(){1==h(".bb-onscreen-notification").data("broser-tab")&&(window.bbFlashNotification&&clearInterval(window.bbFlashNotification),document.hidden&&(window.bbFlashNotification=setInterval(bp.Nouveau.flashTitle,2e3)))},flashTitle:function(){var e=h(".bb-onscreen-notification"),t=e.find(".notification-list"),a=t.find(".read-item"),i=a.first().find(".notification-content .bb-full-link a").text(),o=h("html").find("title"),n=e.attr("data-title-tag"),s=e.attr("data-flash-status"),r=t.data("flash-items");if(document.hidden||(a.each(function(e,t){t=h(t).find(".actions .action-close").attr("data-notification-id");"-1"==h.inArray(t,r)&&r.push(t)}),t.attr("data-flash-items",JSON.stringify(r))),!document.hidden&&window.bbFlashNotification||a.length<=0)return clearInterval(window.bbFlashNotification),e.attr("data-flash-status","default_title"),void o.text(n);"default_title"===s?(o.text("("+a.length+") "+n),a=a.first().find(".actions .action-close").attr("data-notification-id"),"-1"==h.inArray(a,r)&&e.attr("data-flash-status","notification")):"notification"===s&&(o.text(i),e.attr("data-flash-status","default_title"))},notificationAutoHide:function(){var i,e=h(".bb-onscreen-notification"),o=e.find(".notification-list"),n=o.data("auto-removed-items"),e=e.data("visibility");"never"!==e&&((i=parseInt(e))<=0||(o.find(".read-item").each(function(e,t){var a=h(t).find(".actions .action-close").data("notification-id");"-1"==h.inArray(a,n)&&(n.push(a),setTimeout(function(){o.find(".actions .action-close[data-notification-id="+a+"]").length&&o.find(".actions .action-close[data-notification-id="+a+"]").trigger("click")},1e3*i))}),o.attr("data-auto-removed-items",JSON.stringify(n))))},notificationRemovedAction:function(){h(".bb-onscreen-notification .notification-list").on("click",".action-close",function(e){e.preventDefault(),bp.Nouveau.removeOnScreenNotification(this)})},removeOnScreenNotification:function(e){var t=h(e).closest(".notification-list"),a=h(e).closest(".read-item"),i=h(e).data("notification-id"),o=t.data("removed-items");a.addClass("close-item"),setTimeout(function(){o.push(i),t.attr("data-removed-items",JSON.stringify(o)),a.remove(),bp.Nouveau.browserTabCountNotification(),bp.Nouveau.visibilityOnScreenClearButton();var e=t.find(".read-item");e.length<4&&t.removeClass("bb-more-than-3"),e.slice(0,3).removeClass("bb-more-item")},500)},removeAllNotification:function(){h(".bb-onscreen-notification .bb-remove-all-notification").on("click",".action-close",function(e){e.preventDefault();var t=h(this).closest(".bb-onscreen-notification").find(".notification-list"),e=t.find(".read-item"),a=t.data("removed-items");e.each(function(e,t){t=h(t).find(".actions .action-close").data("notification-id");t&&a.push(t)}),t.attr("data-removed-items",JSON.stringify(a)),e.remove(),bp.Nouveau.browserTabCountNotification(),bp.Nouveau.visibilityOnScreenClearButton(),t.closest(".bb-onscreen-notification").addClass("close-all-items"),h(".toast-messages-list > li").each(function(){h(this).removeClass("pull-animation").addClass("close-item").delay(500).remove()}),h(".toast-messages-list > li").each(function(){h(this).removeClass("pull-animation").addClass("close-item").delay(500).remove()}),t.removeClass("bb-more-than-3")})},setTitle:function(){var e=h("html head").find("title").text();h(".bb-onscreen-notification").attr("data-title-tag",e)},visibilityOnScreenClearButton:function(){var e=h(".bb-onscreen-notification");1<e.find(".notification-list").find(".read-item").length?(e.removeClass("single-notification"),e.addClass("active-button"),e.find(".bb-remove-all-notification .action-close").fadeIn(600)):(e.addClass("single-notification"),e.removeClass("active-button"),e.find(".bb-remove-all-notification .action-close").fadeOut(200))},switchGridList:function(){var t=this,a=!1,i=h(".grid-filters").data("object");"group_members"===i&&(a=!0),"friends"===i?i="members":"group_requests"===i?i="groups":"notifications"===i&&(i="members");var e=t.getStorage("bp-"+i),o={};void 0!==e.extras&&void 0!==(o=e.extras).layout&&(h(".grid-filters .layout-view").removeClass("active"),("list"===o.layout?h(".grid-filters .layout-list-view"):h(".grid-filters .layout-grid-view")).addClass("active")),h(document).on("click",".grid-filters .layout-view",function(e){e.preventDefault(),h(this).hasClass("layout-list-view")?(h(".layout-grid-view").removeClass("active"),h(this).addClass("active"),h(".bp-list").removeClass("grid"),o.layout="list"):(h(".layout-list-view").removeClass("active"),h(this).addClass("active"),h(".bp-list").addClass("grid"),o.layout="grid"),a?t.setStorage("bp-group_members","extras",o):t.setStorage("bp-"+i,"extras",o)})},sentInvitesFormValidate:function(){h("body.send-invites #send-invite-form #member-invites-table").length&&h("body.send-invites #send-invite-form").submit(function(){var e,t,a="",i=[],o=[],n="",s="",r="",d="",l=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,c=h("body.send-invites #send-invite-form #error-message-empty-name-field").val(),p=h("body.send-invites #send-invite-form #error-message-invalid-email-address-field").val(),u=h("body.send-invites #send-invite-form #error-message-required-field").val(),b=h("body.send-invites #send-invite-form #error-message-empty-subject-field").length,m=h("body.send-invites #send-invite-form #error-message-empty-body-field").length;if(1===b&&(n=h("body.send-invites #send-invite-form #bp-member-invites-custom-subject").val(),s=h("body.send-invites #send-invite-form #error-message-empty-subject-field").val()),1===m&&(r=tinyMCE.get("bp-member-invites-custom-content").getContent(),d=h("body.send-invites #send-invite-form #error-message-empty-body-field").val()),1===b&&1===m){var f=h("body.send-invites #send-invite-form #error-message-empty-subject-body-field").val();if(""===n&&""===r){if(!confirm(f))return!1}else if(""!==n&&""===r){if(!confirm(d))return!1}else if(""===n&&""!==r&&!confirm(s))return!1}else if(0===b&&1===m){if(""===r&&!confirm(d))return!1}else if(1===b&&0===m&&""===n&&!confirm(s))return!1;if(h("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){h(this).find('input[type="text"]').removeAttr("style"),h(this).find('input[type="email"]').removeAttr("style")}),h("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){e=h.trim(h(this).find('input[type="text"]').val()),a=h(this).find("input").attr("id"),t=h.trim(h(this).find('input[type="email"]').val()),""===e&&""===t?0:""!==e&&""===t?(a=h(this).find('input[type="email"]').attr("id"),i.push(a)):""===e&&""!==t?(a=h(this).find('input[type="text"]').attr("id"),i.push(a)):l.test(t)?o.push(1):(a=h(this).find('input[type="email"]').attr("id"),i.push(a))}),h(".span_error").remove(),0!==i.length)return i.forEach(function(e){h("#"+e).attr("style","border:1px solid #ef3e46"),-1!==e.indexOf("email_")?h("#"+e).after('<span class="span_error" style="color:#ef3e46">'+p+"</span>"):h("#"+e).after('<span class="span_error" style="color:#ef3e46">'+c+"</span>")}),h("html, body").animate({scrollTop:h("#item-body").offset().top},2e3),alert(u),!1;if(h("#email_0_email_error").length&&h("#email_0_email_error").remove(),0===o.length){n=h("#invitee_0_title").val(),s=h("#email_0_email").val();return""===n&&""===s?(h("#invitee_0_title").attr("style","border:1px solid #ef3e46"),h("#invitee_0_title").focus(),h("#email_0_email").attr("style","border:1px solid #ef3e46"),!1):(""!==n&&""===s?(h("#email_0_email").attr("style","border:1px solid #ef3e46"),h("#email_0_email").focus()):(l.test(s)||(h("#email_0_email").attr("style","border:1px solid #ef3e46"),h("#email_0_email").focus(),h("#email_0_email_error").remove(),h("#email_0_email").after('<span id="email_0_email_error" style="color:#ef3e46">'+p+"</span>")),alert(u)),!1)}})},sendInvitesRevokeAccess:function(){h("body.sent-invites #member-invites-table").length&&h("body.sent-invites #member-invites-table tr td span a.revoked-access").click(function(e){e.preventDefault();var t=h(this).attr("data-name"),a=h(this).attr("id"),e=h(this).attr("data-revoke-access");if(!confirm(t))return!1;h.ajax({url:e,type:"post",data:{item_id:a},success:function(){window.location.reload(!0)}})})},toggleDisabledInput:function(){var e=h(this).attr("data-bp-disable-input");h(e).prop("disabled",!0)&&!h(this).hasClass("enabled")?(h(this).addClass("enabled").removeClass("disabled"),h(e).prop("disabled",!1)):h(e).prop("disabled",!1)&&h(this).hasClass("enabled")&&(h(this).removeClass("enabled").addClass("disabled"),h(e).attr("disabled","disabled"))},keyUp:function(e){var t=e.data;27===e.keyCode&&t.buttonRevertAll()},scopeQuery:function(e){var t,a,i=e.data,o=h(e.currentTarget).parent(),n="",s=null,r={};if(o.hasClass("no-ajax")||h(e.currentTarget).hasClass("no-ajax")||!o.attr("data-bp-scope"))return e;if(t=o.data("bp-scope"),a=o.data("bp-object"),!t||!a)return e;e.preventDefault();var e=i.getStorage("bp-"+a);void 0!==e.extras&&"notifications"!==a&&(s=e.extras),e=h("#buddypress").find('[data-bp-filter="'+a+'"]').first().val(),h('#buddypress [data-bp-search="'+a+'"] input[type=search]').length&&(n=h('#buddypress [data-bp-search="'+a+'"] input[type=search]').val()),o.hasClass("dynamic")&&o.find("a span").html(""),r={object:a,scope:t,filter:e,search_terms:n,page:1,extras:s},h('#buddypress [data-bp-member-type-filter="'+a+'"]').length?r.member_type_id=h('#buddypress [data-bp-member-type-filter="'+a+'"]').val():h('#buddypress [data-bp-group-type-filter="'+a+'"]').length&&(r.group_type=h('#buddypress [data-bp-group-type-filter="'+a+'"]').val()),i.objectRequest(r)},filterQuery:function(e){var t=e.data,a=h(e.target).data("bp-filter"),i="all",o=h(e.target).val(),n="",s=!1;if(!a)return e;h(t.objectNavParent+" [data-bp-object].selected").length&&(i=h(t.objectNavParent+" [data-bp-object].selected").data("bp-scope")),h('#buddypress [data-bp-search="'+a+'"] input[type=search]').length&&(n=h('#buddypress [data-bp-search="'+a+'"] input[type=search]').val());e=t.getStorage("bp-"+(a="friends"===a?"members":a));void 0!==e.extras&&"notifications"!==a&&(s=e.extras),"members"===a?t.objectRequest({object:a,scope:i,filter:o,search_terms:n,page:1,extras:s,template:null,member_type_id:h('#buddypress [data-bp-member-type-filter="'+a+'"]').val()}):"groups"===a?t.objectRequest({object:a,scope:i,filter:o,search_terms:n,page:1,extras:s,template:null,group_type:h('#buddypress [data-bp-group-type-filter="'+a+'"]').val()}):t.objectRequest({object:a,scope:i,filter:o,search_terms:n,page:1,extras:s,template:null})},typeGroupFilterQuery:function(e){var t=e.data,a=h(e.target).data("bp-group-type-filter"),i="all",o=null,n=null,s="";if(!a)return e;void 0!==(e=t.getStorage("bp-"+a)).extras&&"notifications"!==a&&(n=e.extras),h('#buddypress [data-bp-filter="'+a+'"]').length&&(void 0!==e.filter?(o=e.filter,h('#buddypress [data-bp-filter="'+a+'"] option[value="'+o+'"]').prop("selected",!0)):"-1"!==h('#buddypress [data-bp-filter="'+a+'"]').val()&&"0"!==h('#buddypress [data-bp-filter="'+a+'"]').val()&&(o=h('#buddypress [data-bp-filter="'+a+'"]').val())),h(t.objectNavParent+" [data-bp-object].selected").length&&(i=h(t.objectNavParent+" [data-bp-object].selected").data("bp-scope")),h('#buddypress [data-bp-search="'+a+'"] input[type=search]').length&&(s=h('#buddypress [data-bp-search="'+a+'"] input[type=search]').val()),t.objectRequest({object:a,scope:i,filter:o,search_terms:s,page:1,template:null,extras:n,group_type:h('#buddypress [data-bp-group-type-filter="'+a+'"]').val()})},typeMemberFilterQuery:function(e){var t=e.data,a=h(e.target).data("bp-member-type-filter"),i="all",o=null,n=null,s="";if(!a)return e;void 0!==(e=t.getStorage("bp-"+(a="friends"===a?"members":a))).extras&&"notifications"!==a&&(n=e.extras),h('#buddypress [data-bp-filter="'+a+'"]').length&&(void 0!==e.filter?(o=e.filter,h('#buddypress [data-bp-filter="'+a+'"] option[value="'+o+'"]').prop("selected",!0)):"-1"!==h('#buddypress [data-bp-filter="'+a+'"]').val()&&"0"!==h('#buddypress [data-bp-filter="'+a+'"]').val()&&(o=h('#buddypress [data-bp-filter="'+a+'"]').val())),h(t.objectNavParent+" [data-bp-object].selected").length&&(i=h(t.objectNavParent+" [data-bp-object].selected").data("bp-scope")),h('#buddypress [data-bp-search="'+a+'"] input[type=search]').length&&(s=h('#buddypress [data-bp-search="'+a+'"] input[type=search]').val()),t.objectRequest({object:a,scope:i,filter:o,search_terms:s,page:1,template:null,extras:n,member_type_id:h('#buddypress [data-bp-member-type-filter="'+a+'"]').val()})},searchQuery:function(e){var t,a,i,o=e.data,n="all",s=!1;if(h(e.delegateTarget).hasClass("no-ajax")||void 0===h(e.delegateTarget).data("bp-search"))return e;e.preventDefault(),t=h(e.delegateTarget).data("bp-search"),a=h("#buddypress").find('[data-bp-filter="'+t+'"]').first().val(),i=h(e.delegateTarget).find("input[type=search]").first().val(),h(o.objectNavParent+" [data-bp-object]").length&&(n=h(o.objectNavParent+' [data-bp-object="'+t+'"].selected').data("bp-scope"));e=o.getStorage("bp-"+t);void 0!==e.extras&&"notifications"!==t&&(s=e.extras),o.objectRequest({object:t,scope:n,filter:a,search_terms:i,page:1,extras:s,template:null})},showSearchSubmit:function(e){h(e.delegateTarget).find("[type=submit]").addClass("bp-show"),h("[type=submit]").hasClass("bp-hide")&&h("[type=submit]").removeClass("bp-hide")},resetSearch:function(e){h(e.target).val()?h(e.delegateTarget).find("[type=submit]").show():h(e.delegateTarget).submit()},buttonAction:function(e){var i=e.data,o=h(e.currentTarget),n=o.data("bp-btn-action"),t=o.data("bp-nonce"),s=o.closest("[data-bp-item-id]"),a=s.data("bp-item-id"),r=o.closest(".list-wrap"),d=s.data("bp-item-component"),l="",c=s.data("bp-used-to-component");if(!n||!a||!d)return e;if(e.preventDefault(),o.hasClass("bp-toggle-action-button"))return h(document.body).hasClass("buddyboss-theme")&&void 0!==o.data("balloon")?o.attr("data-balloon",o.data("title")):o.text(o.data("title")),o.removeClass("bp-toggle-action-button"),o.addClass("bp-toggle-action-button-clicked"),!1;if(void 0!==o.data("only-admin"))return void 0!==BP_Nouveau.only_admin_notice&&window.alert(BP_Nouveau.only_admin_notice),!1;if("is_friend"!==n&&(void 0!==BP_Nouveau[n+"_confirm"]&&!1===window.confirm(BP_Nouveau[n+"_confirm"])||o.hasClass("pending")))return!1;var p=h(".bb-leave-group-popup"),u=h(o).data("bb-group-name"),e=h(o).data("bb-group-link");if("leave_group"===n&&"true"!==h(o).attr("data-popup-shown")){if(p.length)return p.find(".bb-leave-group-content .bb-group-name").html('<a href="'+e+'">'+u+"</a>"),h("body").find('[data-current-anchor="true"]').removeClass("bp-toggle-action-button bp-toggle-action-button-hover").addClass("bp-toggle-action-button-clicked"),p.show(),h(o).attr("data-current-anchor","true"),h(o).attr("data-popup-shown","true"),!1}else h("body").find('[data-popup-shown="true"]').attr("data-popup-shown","false"),h("body").find('[data-current-anchor="true"]').attr("data-current-anchor","false"),p.find(".bb-leave-group-content .bb-group-name").html(""),p.hide();e=h(".bb-remove-connection"),u=h(o).data("bb-user-name"),p=h(o).data("bb-user-link");if("is_friend"===n&&"opened"!==h(o).attr("data-popup-shown")){if(e.length)return e.find(".bb-remove-connection-content .bb-user-name").html('<a href="'+p+'">'+u+"</a>"),h("body").find('[data-current-anchor="true"]').removeClass("bp-toggle-action-button bp-toggle-action-button-hover").addClass("bp-toggle-action-button-clicked"),e.show(),h(o).attr("data-current-anchor","true"),h(o).attr("data-popup-shown","opened"),!1}else h("body").find('[data-popup-shown="opened"]').attr("data-popup-shown","closed"),h("body").find('[data-current-anchor="true"]').attr("data-current-anchor","false"),e.find(".bb-remove-connection-content .bb-user-name").html(""),e.hide();l=t?i.getLinkParams(t,"_wpnonce"):i.getLinkParams(o.prop("href"),"_wpnonce"),u={is_friend:"remove_friend",not_friends:"add_friend",pending:"withdraw_friendship",accept_friendship:"accept_friendship",reject_friendship:"reject_friendship"};"members"===d&&void 0!==u[n]&&(n=u[n],d="friends");e={not_following:"follow",following:"unfollow"};"members"===d&&void 0!==e[n]&&(n=e[n],d="follow"),o.addClass("pending loading");t="";h(document.body).hasClass("directory")&&h(document.body).hasClass("members")||h(document.body).hasClass("group-members")?t="directory":h(document.body).hasClass("bp-user")&&(t="single");u="primary",e="single"===t?o.closest(".header-dropdown"):o.closest(".footer-button-wrap");void 0!==e.length&&0<e.length&&(u="secondary"),c=void 0===c?d:c,i.ajax({action:d+"_"+n,item_id:a,current_page:t,button_clicked:u,component:c,_wpnonce:l},d,!0).done(function(e){var t,a;{if(!1!==e.success)return"groups"===d&&void 0!==e.data.is_group&&e.data.is_group?void 0!==e.data.group_url&&e.data.group_url?window.location=e.data.group_url:window.location.reload():(h("#friends-personal-li").length&&(a=h("#friends-personal-li a span"),t=h("#friends-personal-li a"),(void 0!==e.data.is_user&&e.data.is_user&&void 0!==e.data.friend_count||void 0!==e.data.friend_count)&&(0<e.data.friend_count?a.length?h(a).html(e.data.friend_count):h(t).append('<span class="count">'+e.data.friend_count+"</span>"):h(a).hide())),void 0!==e.data.is_user&&e.data.is_user?(o.parent().html(e.data.feedback),void s.fadeOut(1500)):void 0!==e.data.is_user&&!e.data.is_user&&void 0!==e.data.group_url&&e.data.group_url?window.location=e.data.group_url:(h(i.objectNavParent+' [data-bp-scope="personal"]').length&&(a=Number(h(i.objectNavParent+' [data-bp-scope="personal"] span').html())||0,-1!==h.inArray(n,["leave_group","remove_friend"])?--a:-1!==h.inArray(n,["join_group"])&&(a+=1),a<0&&(a=0),h(i.objectNavParent+' [data-bp-scope="personal"] span').html(a)),"follow"===d&&0<s.find(".followers-wrap").length&&void 0!==e.data.count&&""!==e.data.count&&s.find(".followers-wrap").replaceWith(e.data.count),void o.parent().replaceWith(e.data.contents)));r.prepend(e.data.feedback),o.removeClass("pending loading"),s.find(".bp-feedback").length?(s.find(".bp-feedback").show(),s.find(".bp-feedback").fadeOut(6e3)):"groups"===d&&"join_group"===n&&(s.append(e.data.feedback),s.find(".bp-feedback").fadeOut(6e3))}})},buttonRevert:function(e){e=h(e.currentTarget);e.hasClass("bp-toggle-action-button-clicked")&&!e.hasClass("loading")&&(h(document.body).hasClass("buddyboss-theme")&&void 0!==e.data("balloon")?e.attr("data-balloon",e.data("title-displayed")):e.text(e.data("title-displayed")),e.removeClass("bp-toggle-action-button-clicked"),e.addClass("bp-toggle-action-button"))},buttonHover:function(e){var t=h(e.currentTarget),a=t.data("bp-btn-action"),i=t.closest("[data-bp-item-id]"),o=i.data("bp-item-id"),i=i.data("bp-item-component");return a&&o&&i?(e.preventDefault(),t.hasClass("bp-toggle-action-button")?(h(document.body).hasClass("buddyboss-theme")&&void 0!==t.data("balloon")&&(t.hasClass("following")||t.attr("data-balloon",t.data("title").replace(/<(.|\n)*?>/g,"")),t.find("span").html(t.data("title"))),t.html(t.data("title")),t.removeClass("bp-toggle-action-button"),t.addClass("bp-toggle-action-button-hover"),!1):void 0):e},buttonHoverout:function(e){e=h(e.currentTarget);e.hasClass("bp-toggle-action-button-hover")&&!e.hasClass("loading")&&(h(document.body).hasClass("buddyboss-theme")&&void 0!==e.data("balloon")&&(e.hasClass("following")||e.attr("data-balloon",e.data("title-displayed").replace(/<(.|\n)*?>/g,"")),e.find("span").html(e.data("title-displayed"))),e.html(e.data("title-displayed")),e.removeClass("bp-toggle-action-button-hover"),e.addClass("bp-toggle-action-button"))},awaitingButtonHover:function(e){var t=h(e.currentTarget);if(e.preventDefault(),t.hasClass("bp-toggle-action-button"))return h(document.body).hasClass("buddyboss-theme")&&void 0!==t.data("balloon")&&(t.hasClass("following")||t.attr("data-balloon",t.data("title").replace(/<(.|\n)*?>/g,"")),t.find("span").html(t.data("title"))),t.html(t.data("title")),t.removeClass("bp-toggle-action-button"),t.addClass("bp-toggle-action-button-hover"),!1},awaitingButtonHoverout:function(e){e=h(e.currentTarget);e.hasClass("bp-toggle-action-button-hover")&&!e.hasClass("loading")&&(h(document.body).hasClass("buddyboss-theme")&&void 0!==e.data("balloon")&&(e.hasClass("following")||e.attr("data-balloon",e.data("title-displayed").replace(/<(.|\n)*?>/g,"")),e.find("span").html(e.data("title-displayed"))),e.html(e.data("title-displayed")),e.removeClass("bp-toggle-action-button-hover"),e.addClass("bp-toggle-action-button"))},leaveGroupAction:function(e){e.preventDefault(),h("body").find('[data-current-anchor="true"]').removeClass("bp-toggle-action-button bp-toggle-action-button-hover").addClass("bp-toggle-action-button-clicked"),h("body").find('[data-current-anchor="true"]').trigger("click")},leaveGroupClose:function(e){e.preventDefault();e=h(e.currentTarget),e=h(e).closest(".bb-leave-group-popup");h("body").find('[data-current-anchor="true"]').attr("data-current-anchor","false"),h("body").find('[data-popup-shown="true"]').attr("data-popup-shown","false"),e.find(".bb-leave-group-content .bb-group-name").html(""),e.hide()},removeConnectionAction:function(e){e.preventDefault(),h("body").find('[data-current-anchor="true"]').removeClass("bp-toggle-action-button bp-toggle-action-button-hover").addClass("bp-toggle-action-button-clicked"),h("body").find('[data-current-anchor="true"]').trigger("click")},removeConnectionClose:function(e){e.preventDefault();e=h(e.currentTarget),e=h(e).closest(".bb-remove-connection");h("body").find('[data-current-anchor="true"]').attr("data-current-anchor","false"),h("body").find('[data-popup-shown="opened"]').attr("data-popup-shown","closed"),e.find(".bb-remove-connection-content .bb-user-name").html(""),e.hide()},buttonRevertAll:function(){h.each(h("#buddypress [data-bp-btn-action]"),function(){h(this).hasClass("bp-toggle-action-button-clicked")&&!h(this).hasClass("loading")&&(h(document.body).hasClass("buddyboss-theme")&&void 0!==h(this).data("balloon")?h(this).attr("data-balloon",h(this).data("title-displayed")):h(this).text(h(this).data("title-displayed")),h(this).removeClass("bp-toggle-action-button-clicked"),h(this).addClass("bp-toggle-action-button"),h(this).trigger("blur"))})},addRemoveInvite:function(e){var t=e.currentTarget,a=h(t).closest("tbody");if(h(t).hasClass("field-actions-remove")){if(!(1<h(this).closest("tr").siblings().length))return;h(this).closest("tr").remove(),a.find(".field-actions-add.disabled").removeClass("disabled")}else if(h(t).hasClass("field-actions-add")){if(h(t).hasClass("disabled"))return;e=h(this).closest("tr").prev("tr").html();h("<tr>"+e+"</tr>").insertBefore(h(this).closest("tr")),20<a.find("tr").length&&h(t).addClass("disabled")}a=a.find("tr:not(:last-child)");h.each(a,function(e){h(this).find(".field-name > input").attr("name","invitee["+e+"][]"),h(this).find(".field-name > input").attr("id","invitee_"+e+"_title"),h(this).find(".field-email > input").attr("name","email["+e+"][]"),h(this).find(".field-email > input").attr("id","email_"+e+"_email"),h(this).find(".field-member-type > select").attr("name","member-type["+e+"][]"),h(this).find(".field-member-type > select").attr("id","member_type_"+e+"_member_type")})},closeNotice:function(e){var t=h(e.currentTarget);e.preventDefault(),"clear"===t.data("bp-close")&&(void 0!==h.cookie("bp-message")&&h.removeCookie("bp-message"),void 0!==h.cookie("bp-message-type")&&h.removeCookie("bp-message-type")),t.closest(".bp-feedback").hasClass("bp-sitewide-notice")&&bp.Nouveau.ajax({action:"messages_dismiss_sitewide_notice"},"messages"),t.closest(".bp-feedback").remove()},paginateAction:function(e){var t,a=e.data,i=h(e.currentTarget),o=null,n=null,s=null,r=null,d=i.closest("[data-bp-pagination]").data("bp-pagination")||null;if(null===d)return e;e.preventDefault(),null!==(e=h(e.delegateTarget).data("bp-list")||null)&&(void 0!==(t=a.getStorage("bp-"+e)).scope&&(o=t.scope),void 0!==t.filter&&(n=t.filter),void 0!==t.extras&&(r=t.extras)),null!==e&&(void 0!==(t=a.getStorage("bp-"+e)).scope&&(o=t.scope),void 0!==t.filter&&(n=t.filter),void 0!==t.extras&&(r=t.extras));d={object:e,scope:o,filter:n,search_terms:s=h('#buddypress [data-bp-search="'+e+'"] input[type=search]').length?h('#buddypress [data-bp-search="'+e+'"] input[type=search]').val():s,extras:r,caller:i.closest("[data-bp-pagination]").hasClass("bottom")?"pag-bottom":"",page:a.getLinkParams(i.prop("href"),d)||1};h("#buddypress [data-bp-group-type-filter]").length&&(d.group_type=h("#buddypress [data-bp-group-type-filter]").val()),h("#buddypress [data-bp-member-type-filter]").length&&(d.member_type_id=h("#buddypress [data-bp-member-type-filter]").val()),a.objectRequest(d)},enableSubmitOnLegalAgreement:function(){h("body #buddypress #register-page #signup-form #legal_agreement").length&&(h("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!0),h(document).on("change","body #buddypress #register-page #signup-form #legal_agreement",function(){h(this).prop("checked")?h("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!1):h("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!0)}))},registerPopUp:function(){h(".popup-modal-register").length&&h(".popup-modal-register").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),h(".popup-modal-dismiss").length&&h(".popup-modal-dismiss").click(function(e){e.preventDefault(),h.magnificPopup.close()})},loginPopUp:function(){h(".popup-modal-login").length&&h(".popup-modal-login").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),h(".popup-modal-dismiss").length&&h(".popup-modal-dismiss").click(function(e){e.preventDefault(),h.magnificPopup.close()})},threadListBlockPopup:function(e){e.preventDefault();var t=h(this).data("bp-content-id"),a=h(this).data("bp-content-type"),i=h(this).data("bp-nonce"),o=h(this).attr("href");void 0!==t&&void 0!==a&&void 0!==i&&(h(document).find(".bp-report-form-err").empty(),(e=h(o)).find(".bp-content-id").val(t),e.find(".bp-content-type").val(a),e.find(".bp-nonce").val(i)),0<h("#message-threads .block-member").length&&h("#message-threads .block-member").magnificPopup({items:{src:o,type:"inline"}}).magnificPopup("open")},threadListReportPopup:function(e){e.preventDefault();var t=h(this).data("bp-content-id"),a=h(this).data("bp-content-type"),i=h(this).data("bp-nonce"),o=h(this).attr("href"),n=h(this).attr("reported_type"),e=h(o);void 0!==t&&void 0!==a&&void 0!==i&&(h(document).find(".bp-report-form-err").empty(),e.find(".bp-content-id").val(t),e.find(".bp-content-type").val(a),e.find(".bp-nonce").val(i)),0<h("#message-threads .report-content").length&&(h("#bb-report-content .form-item-category").show(),h("user_report"===a?"#bb-report-content .form-item-category.content":"#bb-report-content .form-item-category.members").hide(),h('#bb-report-content .form-item-category:visible:first label input[type="radio"]').attr("checked",!0),h('#bb-report-content .form-item-category:visible label input[type="radio"]').length||(h("#report-category-other").attr("checked",!0),h("#report-category-other").trigger("click"),h('label[for="report-category-other"]').hide()),void 0!==n&&e.find(".bp-reported-type").text(n),h("#message-threads .report-content").magnificPopup({items:{src:o,type:"inline"}}).magnificPopup("open"))},reportPopUp:function(){0<h(".report-content, .block-member").length&&h(".report-content, .block-member").magnificPopup({type:"inline",midClick:!0,callbacks:{open:function(){console.log("called"),h("#notes-error").hide();var e=this.currItem.el.data("bp-content-id"),t=this.currItem.el.data("bp-content-type"),a=this.currItem.el.data("bp-nonce"),i=this.currItem.el.attr("reported_type");h("#bb-report-content .form-item-category").show(),h("user_report"===t?"#bb-report-content .form-item-category.content":"#bb-report-content .form-item-category.members").hide(),h('#bb-report-content .form-item-category:visible:first label input[type="radio"]').attr("checked",!0),h('#bb-report-content .form-item-category:visible label input[type="radio"]').length||(h("#report-category-other").attr("checked",!0),h("#report-category-other").trigger("click"),h('label[for="report-category-other"]').hide());var o=h("#content-report");o.find(".bp-reported-type").text(this.currItem.el.data("reported_type")),void 0!==i&&o.find(".bp-reported-type").text(i),void 0!==e&&void 0!==t&&void 0!==a&&(h(document).find(".bp-report-form-err").empty(),(i=h(".mfp-content")).find(".bp-content-id").val(e),i.find(".bp-content-type").val(t),i.find(".bp-nonce").val(a))}}})},reportActions:function(){var i=this;h(document).on("click",".bb-cancel-report-content",function(e){e.preventDefault(),h("form#bb-report-content").trigger("reset"),h(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").addClass("bp-hide"),h(this).closest(".moderation-popup").find(".mfp-close").trigger("click")}),h(document).on("click","input[type=radio][name=report_category]",function(){"other"===this.value?h(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").removeClass("bp-hide"):h(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").addClass("bp-hide")}),h("#bb-report-content").submit(function(t){if(h("#report-category-other").is(":checked")&&""===h("#report-note").val())return h("#notes-error").show(),!1;h("#bb-report-content").find(".report-submit").addClass("loading"),h(".bp-report-form-err").empty();var a={action:"bp_moderation_content_report"};h.each(h(this).serializeArray(),function(e,t){a[t.name]=t.value}),h.post(BP_Nouveau.ajaxurl,a,function(e){e.success?(i.resetReportPopup(),i.changeReportButtonStatus(e.data),h("#bb-report-content").find(".report-submit").removeClass("loading"),h(".mfp-close").trigger("click"),jQuery(document).trigger("bb_trigger_toast_message",["",e.data.toast_message,"info",null,!0])):(h("#bb-report-content").find(".report-submit").removeClass("loading"),i.handleReportError(e.data.message.errors,t.currentTarget))})}),h("#bb-block-member").submit(function(t){h("#bb-block-member").find(".report-submit").addClass("loading"),h(".bp-report-form-err").empty();var a={action:"bp_moderation_block_member"};h.each(h(this).serializeArray(),function(e,t){a[t.name]=t.value}),h.post(BP_Nouveau.ajaxurl,a,function(e){e.success?(i.resetReportPopup(),i.changeReportButtonStatus(e.data),h("#bb-block-member").find(".report-submit").removeClass("loading"),h(".mfp-close").trigger("click"),e.data.redirect&&(location.href=e.data.redirect)):(h("#bb-block-member").find(".report-submit").removeClass("loading"),i.handleReportError(e.data.message.errors,t.currentTarget))})})},resetReportPopup:function(){h("form#bb-report-content").trigger("reset");var e=h(".mfp-content");e.find(".bp-content-id").val(""),e.find(".bp-content-type").val(""),e.find(".bp-nonce").val(""),e.find(".bp-report-form-err").empty()},changeReportButtonStatus:function(e){var t=this;h("[data-bp-content-id="+e.button.button_attr.item_id+"][data-bp-content-type="+e.button.button_attr.item_type+"]").each(function(){h(this).removeAttr("data-bp-content-id"),h(this).removeAttr("data-bp-content-type"),h(this).removeAttr("data-bp-nonce"),h(this).html(e.button.link_text),h(this).attr("class",e.button.button_attr.class),h(this).attr("reported_type",e.button.button_attr.reported_type),h(this).attr("href",e.button.button_attr.href),setTimeout(function(){t.reportedPopup()},1)})},reportedPopup:function(){0<h(".reported-content").length&&h(".reported-content").magnificPopup({type:"inline",midClick:!0,callbacks:{open:function(){var e=void 0!==this.currItem.el.attr("reported_type")?this.currItem.el.attr("reported_type"):this.currItem.el.data("reported_type");void 0!==e&&h("#reported-content").find(".bp-reported-type").text(e)}}})},handleReportError:function(e,t){var a="";e.bp_moderation_missing_data?a=e.bp_moderation_missing_data:e.bp_moderation_already_reported?a=e.bp_moderation_already_reported:e.bp_moderation_missing_error?a=e.bp_moderation_missing_error:e.bp_moderation_invalid_access?a=e.bp_moderation_invalid_access:e.bp_moderation_invalid_item_id&&(a=e.bp_moderation_invalid_item_id),jQuery(t).closest(".bb-report-type-wrp").find(".bp-report-form-err").html(a)},togglePassword:function(){h(document).on("click",".bb-toggle-password",function(e){e.preventDefault();var t=h(this),e=t.next("input");t.toggleClass("bb-show-pass"),t.hasClass("bb-show-pass")?e.attr("type","text"):e.attr("type","password")})},closePickersOnClick:function(e){e=h(e.target);_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||e.closest(".post-emoji").length||e.is(".emojioneemoji,.emojibtn")||h(".post-emoji.active, .emojionearea-button.active").removeClass("active")},closePickersOnEsc:function(e){"Escape"!==e.key&&27!==e.keyCode||_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||h(".post-emoji.active, .emojionearea-button.active").removeClass("active")},lazyLoad:function(e){var t=h(e);if(t.length)for(var a=0;a<t.length;a++){var i=!1;try{h(t[a]).is(":in-viewport")&&(i=!0)}catch(e){console.error(e.message),!i&&t[a].getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)+window.scrollY&&(i=!0)}i&&t[a].getAttribute("data-src")&&(t[a].src=t[a].getAttribute("data-src"),t[a].removeAttribute("data-src"),h(t[a]).on("load",function(){h(this).removeClass("lazy")}),h(document).trigger("bp_nouveau_lazy_load",{element:t[a]}))}},coverPhotoCropper:function(e){var t,a,i,o,n,s;if(h(e.currentTarget).hasClass("position-change-cover-image")){var r=h(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").height(),d=(r-h(e.currentTarget).closest("#header-cover-image").height())/2,l=h(e.currentTarget);if(r<=l.closest("#header-cover-image").height())return h("body").append('<div id="cover-photo-alert" style="display: block;" class="open-popup"><transition name="modal"><div class="modal-mask bb-white bbm-model-wrap"><div class="modal-wrapper"><div id="boss-media-create-album-popup" class="modal-container has-folderlocationUI"><header class="bb-model-header"><h4>'+BP_Nouveau.media.cover_photo_size_error_header+'</h4><a class="bb-model-close-button" id="bp-media-create-folder-close" href="#"><span class="dashicons dashicons-no-alt"></span></a></header><div class="bb-field-wrap"><p>'+BP_Nouveau.media.cover_photo_size_error_description+"</p></div></div></div></div></transition></div>"),void e.preventDefault();t=h(e.currentTarget).closest("#header-cover-image").height(),a=h(e.currentTarget).closest("#header-cover-image").width(),i=Number(h(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").css("top").replace("px","")),o=h(e.currentTarget).closest("#header-cover-image").width()/h(e.currentTarget).closest("#header-cover-image").find(".header-cover-reposition-wrap img")[0].width,l.closest("#cover-image-container").find(".header-cover-reposition-wrap").show(),(r=h(".header-cover-reposition-wrap img")).guillotine({width:a,height:t,eventOnChange:"guillotinechange",init:{scale:o,y:i&&h(e.currentTarget).closest("#header-cover-image").hasClass("has-position")?-i:d,w:a,h:t}}),r.on("guillotinechange",function(e,t){l.closest("#cover-image-container").find(".header-cover-img").attr("data-top",-t.y)})}else h(e.currentTarget).hasClass("cover-image-save")?(n=h(e.currentTarget),s=h(e.currentTarget).closest("#cover-image-container").find(".header-cover-img"),n.addClass("loading"),h.post(BP_Nouveau.ajaxurl,{action:"save_cover_position",position:s.attr("data-top")}).done(function(e){e.success&&e.data&&""!==e.data.content?(n.removeClass("loading"),n.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide(),n.closest("#header-cover-image:not(.has-position)").addClass("has-position"),s.css({top:e.data.content+"px"})):(n.removeClass("loading"),n.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide())}).fail(function(){n.removeClass("loading"),n.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide()})):h(e.currentTarget).hasClass("cover-image-cancel")&&((r=h(".header-cover-reposition-wrap img")).guillotine({width:0,height:0,init:{scale:1,y:0,w:0,h:0}}),r.guillotine("remove"),h(e.currentTarget).closest("#cover-image-container").find(".header-cover-reposition-wrap").hide(),h(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").attr("data-top",""));e.preventDefault()},coverPhotoCropperAlert:function(e){e.preventDefault(),h("#cover-photo-alert").remove()},toggleMoreOption:function(e){h(e.target).hasClass("bb_more_options_action")||h(e.target).parent().hasClass("bb_more_options_action")?(e.preventDefault(),h(e.target).closest(".bb_more_options").find(".bb_more_options_list").hasClass("is_visible")?h(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible"):(h(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible"),h(e.target).closest(".bb_more_options").find(".bb_more_options_list").addClass("is_visible"))):(h(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible"),h(".optionsOpen").removeClass("optionsOpen"))},getVideoThumb:function(s,r){var e,t=new FileReader;t.onload=function(){var a,e=new Blob([t.result],{type:s.type}),i=URL.createObjectURL(e),o=document.createElement("video");o.src=i;var n=setInterval(function(){var e,t;0<o.readyState&&(a=o.duration.toFixed(2),e=function(){t()&&(o.removeEventListener("timeupdate",e),o.pause())},o.addEventListener("loadeddata",function(){t()&&o.removeEventListener("timeupdate",e)}),t=function(){var e=document.createElement("canvas");e.width=o.videoWidth,e.height=o.videoHeight,e.getContext("2d").drawImage(o,0,0,e.width,e.height);var t=e.toDataURL(),a=1e5<t.length;return a&&((e=document.createElement("img")).src=t,s.previewElement?(h(s.previewElement).find(r).find("img").length?h(s.previewElement).find(r).find("img").attr("src",t):h(s.previewElement).find(r).append(e),h(s.previewElement).closest(".dz-preview").addClass("dz-has-thumbnail")):h(r).find("img").length?h(r).find("img").attr("src",t):h(r).append(e),URL.revokeObjectURL(i)),a},o.addEventListener("timeupdate",e),o.preload="metadata",o.src=i,o.muted=!0,o.playsInline=!0,null!=a&&(o.currentTime=Math.floor(a)),o.play(),clearInterval(n))},500)},s.dataURL?((e=new XMLHttpRequest).open("GET",s.dataURL,!0),e.responseType="blob",e.onload=function(){var e;200==this.status&&(e=this.response,t.readAsArrayBuffer(e))},e.send()):t.readAsArrayBuffer(s)},bbWidgetMoreFollowing:function(e){e=h(e.currentTarget).attr("href").split("#");if(1<e.length){e=e.pop();if(e&&0<h('[data-bp-scope="'+e+'"]').length)return h('[data-bp-scope="'+e+'"] a').trigger("click"),!1}},mediumEditorButtonsWarp:function(e){var t;e.hasClass("wrappingInitialised")||(e.addClass("wrappingInitialised"),t=0,e.find(".medium-editor-toolbar-actions > li").each(function(){t+=h(this).outerWidth()}),t>e.width()-10?(e.data("childerWith",t),t>e.width()&&(0===e.find(".medium-editor-toolbar-actions .medium-editor-action-more").length&&e.find(".medium-editor-toolbar-actions").append('<li class="medium-editor-action-more"><button class="medium-editor-action medium-editor-action-more-button"><b></b></button><ul></ul></li>'),e.find(".medium-editor-action-more").show(),t+=e.find(".medium-editor-toolbar-actions .medium-editor-action-more").outerWidth(),h(e.find(".medium-editor-action").get().reverse()).each(function(){h(this).hasClass("medium-editor-action-more-button")||t>e.width()&&(t-=h(this).outerWidth(),e.find(".medium-editor-action-more > ul").prepend(h(this).parent()))}))):e.find(".medium-editor-toolbar-actions .medium-editor-action-more").length&&(h(e.find(".medium-editor-action-more ul > li")).each(function(){t+35<e.width()&&(t+=h(this).outerWidth(),h(this).insertBefore(e.find(".medium-editor-action-more")))}),0===e.find(".medium-editor-action-more ul > li").length&&e.find(".medium-editor-action-more").hide()),h(e).find(".medium-editor-action-more-button").on("click",function(e){e.preventDefault(),h(this).parent(".medium-editor-action-more").toggleClass("active")}),h(e).find(".medium-editor-action-more ul .medium-editor-action").on("click",function(e){e.preventDefault(),h(this).closest(".medium-editor-action-more").toggleClass("active")}),h(window).one("resize",function(){e.removeClass("wrappingInitialised"),h(e).find(".medium-editor-action-more-button").unbind("click"),h(e).find(".medium-editor-action-more ul .medium-editor-action").unbind("click")}))},isURL:function(e){return/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,24}(:[0-9]{1,5})?(\/.*)?$/.test(h.trim(e))},closeActionPopup:function(e){e.preventDefault(),h(this).closest(".bb-action-popup").hide()},showActionPopup:function(e){e.preventDefault(),h(h(e.currentTarget).attr("href")).show()},profileNotificationSetting:function(){var t=this;t.profileNotificationSettingInputs([".email",".web",".app"]),h(".notification_info .notification_learn_more").click(function(e){e.preventDefault(),h(this).find("a span").toggleClass(function(){return h(this).hasClass("bb-icon-chevron-down")?"bb-icon-chevron-up":"bb-icon-chevron-down"}),h(this).toggleClass("show").parent().find(".notification_type").toggleClass("show")}),h(".main-notification-settings").each(function(){t.NotificationMobileDropdown(h(this).find("tr:not( .notification_heading )"))}),h(document).on("click",".bb-mobile-setting ul li",function(e){e.preventDefault(),h(this).find("input").is(":checked")?h(this).find("input").prop("checked",!1):h(this).find("input").prop("checked",!0),h(h("input#"+h(this).find("label").attr("data-for"))).trigger("click"),t.NotificationMobileDropdown(h(this).closest("tr"))}),h(document).on("click",".bb-mobile-setting .bb-mobile-setting-anchor",function(){h(this).parent().toggleClass("active"),h(".bb-mobile-setting").not(h(this).parent()).removeClass("active")}),h(document).on("click",function(e){h(e.target).hasClass("bb-mobile-setting-anchor")||h(".bb-mobile-setting").removeClass("active")})},profileNotificationSettingInputs:function(t){for(var e=0;e<t.length;e++)!function(e){h(document).on("click",".main-notification-settings th"+t[e]+' input[type="checkbox"]',function(){h(this).is(":checked")?(h(".main-notification-settings").find("td"+t[e]).removeClass("disabled").find("input").prop("disabled",!1),h(".main-notification-settings").find(".bb-mobile-setting li"+t[e]).removeClass("disabled").find("input").prop("disabled",!1)):(h(".main-notification-settings").find("td"+t[e]).addClass("disabled").find("input").prop("disabled",!0),h(".main-notification-settings").find(".bb-mobile-setting li"+t[e]).addClass("disabled").find("input").prop("disabled",!0))})}(e)},NotificationMobileDropdown:function(e){var t=h(".main-notification-settings").data("text-all"),a=h(".main-notification-settings").data("text-none");e.each(function(){var i="",o="",e=h(this).find("td").length?"td":"th",n=0;h(this).find(e+":not(:first-child)").each(function(){var e,t,a;h(this).find('input[type="checkbox"]').length&&(e=h(this).find("label").text(),t=h(this).find("input").is(":checked")?"checked":"",a=h(this).hasClass("disabled")?" disabled":"",o+='<li class="'+e.toLowerCase()+a+'"><input type="checkbox" class="bs-styled-checkbox" '+t+' /><label data-for="'+h(this).find('input[type="checkbox"]').attr("id")+'">'+e+"</label></li>"),h(this).find("input:checked").length&&(i+=""===i?h(this).find('input[type="checkbox"] + label').text().trim():", "+h(this).find('input[type="checkbox"] + label').text().trim(),n++)}),i=n===h(this).find(e+':not(:first-child) input[type="checkbox"]').length?t:""===i?a:i,0===h(this).find(e+":first-child .bb-mobile-setting").length?h(this).find(e+":first-child").append('<div class="bb-mobile-setting"><span class="bb-mobile-setting-anchor">'+i+"</span><ul></ul></div>"):h(this).find(e+":first-child .bb-mobile-setting .bb-mobile-setting-anchor").text(i),h(this).find(e+":first-child .bb-mobile-setting ul").html(""),h(this).find(e+":first-child .bb-mobile-setting ul").append(o)})},dropZoneGlobalProgress:function(a){0==h(a.element).find(".dz-global-progress").length&&(h(a.element).append('<div class="dz-global-progress"><div class="dz-progress-bar-full"><span class="dz-progress"></span></div><p></p><span class="bb-icon-f bb-icon-times dz-remove-all"></span></div>'),h(a.element).addClass("dz-progress-view"),h(a.element).find(".dz-remove-all").click(function(){h.each(a.files,function(e,t){a.removeFile(t)})}));var e="",t=0,i=0;1==a.files.length?(h(a.element).addClass("dz-single-view"),e="Uploading <strong>"+a.files[0].name+"</strong>",t=a.files[0].upload.progress):(h(a.element).removeClass("dz-single-view"),i=0,h.each(a.files,function(e,t){i+=t.upload.progress}),t=i/a.files.length,e="Uploading <strong>"+a.files.length+" files</strong>"),h(a.element).find(".dz-global-progress .dz-progress").css("width",t+"%"),h(a.element).find(".dz-global-progress > p").html(e)},userPresenceStatus:function(){var e=1e3*parseInt(BB_Nouveau_Presence.presence_time_span);bp.Nouveau.userPresenceChecker(e),""!==BB_Nouveau_Presence.heartbeat_enabled&&parseInt(BB_Nouveau_Presence.presence_interval)<=60?(h(document).on("heartbeat-send",function(e,t){var a;void 0!==window.bb_is_user_active&&!0===window.bb_is_user_active&&(a=bp.Nouveau.getPageUserIDs(),t.presence_users=a.join(","))}),h(document).on("heartbeat-tick",function(e,t){t.users_presence&&bp.Nouveau.updateUsersPresence(t.users_presence)})):setInterval(function(){var e={};void 0!==window.bb_is_user_active&&!0===window.bb_is_user_active&&(e.ids=bp.Nouveau.getPageUserIDs()),h.ajax({type:"POST",url:"/wp-json/buddyboss/v1/members/presence",data:e,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",BB_Nouveau_Presence.rest_nonce)},success:function(e){e&&bp.Nouveau.updateUsersPresence(e)}})},6e4)},getPageUserIDs:function(){var t=[],e=h(document).find(".member-status[data-bb-user-id]");return 0<e.length&&e.each(function(){var e=h(this).attr("data-bb-user-id");-1==h.inArray(parseInt(e),t)&&t.push(parseInt(e))}),t},updateUsersPresence:function(e){e&&0<e.length&&h.each(e,function(e,t){bp.Nouveau.updateUserPresence(t.id,t.status)})},updateUserPresence:function(e,t){h(document).find('.member-status[data-bb-user-id="'+e+'"]').removeClass("offline online").addClass(t).attr("data-bb-user-presence",t)},userPresenceChecker:function(e){var t=setTimeout(function(){window.bb_is_user_active=!1},e);document.onmousemove=document.mousedown=document.mouseup=document.onkeydown=document.onkeyup=document.focus=function(){clearTimeout(t),t=setTimeout(function(){window.bb_is_user_active=!1},e),window.bb_is_user_active=!0}}},bp.Nouveau.start())}((bp,jQuery));