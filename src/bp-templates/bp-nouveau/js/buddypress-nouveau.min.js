window.wp=window.wp||{},window.bp=window.bp||{},function(e,t){"undefined"!=typeof BP_Nouveau&&(bp.Nouveau={start:function(){this.setupGlobals(),this.prepareDocument(),this.initObjects(),this.setHeartBeat(),this.addListeners(),this.switchGridList(),this.sendInvitesRevokeAccess(),this.sentInvitesFormValidate(),this.registerPopUp(),this.loginPopUp(),t.ajaxPrefilter(this.memberPreFilter),t.ajaxPrefilter(this.groupPreFilter),bp.Nouveau.lazyLoad(".lazy"),bp.Nouveau.documentCodeMirror(),t(window).on("scroll resize",function(){bp.Nouveau.lazyLoad(".lazy"),bp.Nouveau.documentCodeMirror()})},setupGlobals:function(){this.ajax_request=null,this.objects=t.map(BP_Nouveau.objects,function(e){return e}),this.objectNavParent=BP_Nouveau.object_nav_parent,this.heartbeat=wp.heartbeat||!1,this.querystring=this.getLinkParams()},prepareDocument:function(){if(t("body").hasClass("no-js")&&t("body").removeClass("no-js").addClass("js"),BP_Nouveau.warnings&&"undefined"!=typeof console&&console.warn&&t.each(BP_Nouveau.warnings,function(e,t){console.warn(t)}),t(".buddypress_object_nav .widget-title").length){var e=t(".buddypress_object_nav .widget-title").html();t("body").find('*:contains("'+e+'")').each(function(a,i){t(i).hasClass("widget-title")||e!==t(i).html()||t(i).is("a")||t(i).remove()})}},getStorage:function(e,t){var a=sessionStorage.getItem(e);return a=a?JSON.parse(a):{},void 0!==t?a[t]||!1:a},setStorage:function(e,t,a){var i=this.getStorage(e);return void 0===a&&void 0!==i[t]?delete i[t]:i[t]=a,sessionStorage.setItem(e,JSON.stringify(i)),null!==sessionStorage.getItem(e)},setLocalStorage:function(e,t,a){var i=this.getLocalStorage(e);return void 0===a&&void 0!==i[t]?delete i[t]:i[t]=a,localStorage.setItem(e,JSON.stringify(i)),null!==localStorage.getItem(e)},getLocalStorage:function(e,t){var a=localStorage.getItem(e);return a=a?JSON.parse(a):{},void 0!==t?a[t]||!1:a},getLinkParams:function(e,t){var a;if(!(a=e?-1!==e.indexOf("?")?"?"+e.split("?")[1]:"":document.location.search))return null;var i=a.replace(/(^\?)/,"").split("&").map(function(e){return e=e.split("="),this[e[0]]=e[1],this}.bind({}))[0];return t?i[t]:i},urlDecode:function(e,t){var a=t||{amp:"&",lt:"<",gt:">",quot:'"',"#039":"'"};return decodeURIComponent(e.replace(/\+/g," ")).replace(/&([^;]+);/g,function(e,t){return a[t]||""})},ajax:function(e,a,i){this.ajax_request&&void 0===i&&this.ajax_request.abort();var s=t.extend({},bp.Nouveau.getStorage("bp-"+a),{nonce:BP_Nouveau.nonces[a]},e);return void 0!==BP_Nouveau.customizer_settings&&(s.customized=BP_Nouveau.customizer_settings),this.ajax_request=t.post(BP_Nouveau.ajaxurl,s,"json"),this.ajax_request},inject:function(e,a,i){t(e).length&&a&&("append"===(i=i||"reset")?t(e).append(a).find("li.activity-item").each(this.hideSingleUrl):"prepend"===i?t(e).prepend(a).find("li.activity-item").each(this.hideSingleUrl):t(e).html(a).find("li.activity-item").each(this.hideSingleUrl),"undefined"==typeof bp_mentions&&void 0===bp.mentions||t(".bp-suggestions").bp_mentions(bp.mentions.users))},hideSingleUrl:function(){var e=t(this).find(".activity-inner > p").removeAttr("br").removeAttr("a").text(),a="",i="",s="",o=0;if(0<=e.indexOf("http://")?(s=e.indexOf("http://"),o=1):0<=e.indexOf("https://")?(s=e.indexOf("https://"),o=1):0<=e.indexOf("www.")&&(s=e.indexOf("www"),o=1),1===o){for(var r=s;r<e.length&&(" "!==e[r]&&"\n"!==e[r]);r++)a+=e[r];""!==a&&(i=t.trim(e.replace(a,""))),0>=i.length&&t(this).find(".activity-inner > .activity-link-preview-container ").length&&t(this).find(".activity-inner > p:first a").hide()}},objectRequest:function(e){var a={},i=this;if((e=t.extend({object:"",scope:null,filter:null,target:"#buddypress [data-bp-list]",search_terms:"",page:1,extras:null,caller:null,template:null,method:"reset"},e)).object&&e.target)return"activity"==e.object&&"#buddypress [data-bp-list] ul.bp-list"==e.target&&(e.target="#buddypress [data-bp-list] ul.bp-list:not(#bb-media-model-container ul.bp-list)"),"activity"!=e.object||t(this.objectNavParent+' [data-bp-scope="'+e.scope+'"]').length||(e.scope="all"),e.search_terms&&(e.search_terms=e.search_terms.replace(/</g,"&lt;").replace(/>/g,"&gt;")),null!==e.scope&&this.setStorage("bp-"+e.object,"scope",e.scope),null!==e.filter&&this.setStorage("bp-"+e.object,"filter",e.filter),null!==e.extras&&this.setLocalStorage("bp-"+e.object,"extras",e.extras),t(this.objectNavParent+" [data-bp-object]").each(function(){t(this).removeClass("selected loading")}),t(this.objectNavParent+' [data-bp-scope="'+e.scope+'"]').length?t(this.objectNavParent+' [data-bp-scope="'+e.scope+'"], #object-nav li.current').addClass("selected loading"):t(this.objectNavParent+" [data-bp-scope]:eq(0), #object-nav li.current").addClass("selected loading"),t('#buddypress [data-bp-filter="'+e.object+'"] option[value="'+e.filter+'"]').prop("selected",!0),"friends"===e.object||"group_members"===e.object?(e.template=e.object,e.object="members"):"group_requests"===e.object?(e.object="groups",e.template="group_requests"):"group_subgroups"===e.object?(e.object="groups",e.template="group_subgroups"):"notifications"===e.object&&(e.object="members",e.template="member_notifications"),a=t.extend({action:e.object+"_filter"},e),this.ajax(a,e.object).done(function(a){if(!1!==a.success&&!_.isUndefined(a.data)){if(!t("body.group-members.members.buddypress").length||_.isUndefined(a.data)||_.isUndefined(a.data.count)||t("body.group-members.members.buddypress ul li#members-groups-li").find("span").text(a.data.count),t(i.objectNavParent+' [data-bp-scope="'+e.scope+'"]').removeClass("loading"),t(i.objectNavParent+' [data-bp-scope="'+e.scope+'"]').find("span").text(""),_.isUndefined(a.data)||_.isUndefined(a.data.count)||t(i.objectNavParent+' [data-bp-scope="'+e.scope+'"]').find("span").text(a.data.count),!_.isUndefined(a.data)&&!_.isUndefined(a.data.scopes))for(var s in a.data.scopes)t(i.objectNavParent+' [data-bp-scope="'+s+'"]').find("span").text(a.data.scopes[s]);if("reset"!==e.method)i.inject(e.target,a.data.contents,e.method),t(e.target).trigger("bp_ajax_"+e.method,t.extend(e,{response:a.data}));else if("pag-bottom"===e.caller){var o=null;o=t("#subnav").length?t("#subnav").parent():t(e.target),t("html,body").animate({scrollTop:o.offset().top},"slow",function(){t(e.target).fadeOut(100,function(){i.inject(this,a.data.contents,e.method),t(this).fadeIn(100),t(e.target).trigger("bp_ajax_request",t.extend(e,{response:a.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3),bp.Nouveau.documentCodeMirror&&setTimeout(function(){bp.Nouveau.documentCodeMirror()},500)})})}else t(e.target).fadeOut(100,function(){i.inject(this,a.data.contents,e.method),t(this).fadeIn(100),t(e.target).trigger("bp_ajax_request",t.extend(e,{response:a.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3),bp.Nouveau.documentCodeMirror&&setTimeout(function(){bp.Nouveau.documentCodeMirror()},500)})}})},initObjects:function(){var e=this,a={},i={},s="all",o="",r=null,n=null;t.each(this.objects,function(d,l){a=e.getLocalStorage("bp-"+l);var c=window.location.hash.substr(1);void 0!==c&&"following"==c?s=c:void 0!==a.scope&&(s=a.scope),void 0!==a.extras&&"notifications"!==l&&(r=a.extras),t('#buddypress [data-bp-filter="'+l+'"]').length&&("-1"!==t('#buddypress [data-bp-filter="'+l+'"]').val()&&"0"!==t('#buddypress [data-bp-filter="'+l+'"]').val()?n=t('#buddypress [data-bp-filter="'+l+'"]').val():void 0!==a.filter&&(n=a.filter,t('#buddypress [data-bp-filter="'+l+'"] option[value="'+n+'"]').prop("selected",!0))),t(this.objectNavParent+' [data-bp-object="'+l+'"]').length&&(t(this.objectNavParent+' [data-bp-object="'+l+'"]').each(function(){t(this).removeClass("selected")}),t(this.objectNavParent+' [data-bp-scope="'+l+'"], #object-nav li.current').addClass("selected")),null!==e.querystring&&(void 0!==e.querystring[l+"_search"]?o=e.querystring[l+"_search"]:void 0!==e.querystring.s&&(o=e.querystring.s),o&&t('#buddypress [data-bp-search="'+l+'"] input[type=search]').val(o)),t('#buddypress [data-bp-list="'+l+'"]').length&&(i={object:l,scope:s,filter:n,search_terms:o,extras:r},e.objectRequest(i))})},setHeartBeat:function(){void 0!==BP_Nouveau.pulse&&this.heartbeat&&(this.heartbeat.interval(Number(BP_Nouveau.pulse)),t.fn.extend({"heartbeat-send":function(){return this.bind("heartbeat-send")}}),t.fn.extend({"heartbeat-tick":function(){return this.bind("heartbeat-tick")}}))},addListeners:function(){t("[data-bp-disable-input]").on("change",this.toggleDisabledInput),t(this.objectNavParent+" .bp-navs").on("click","a",this,this.scopeQuery),t(document).on("change","#buddypress [data-bp-filter]",this,this.filterQuery),t(document).on("change","#buddypress [data-bp-group-type-filter]",this,this.typeGroupFilterQuery),t(document).on("change","#buddypress [data-bp-member-type-filter]",this,this.typeMemberFilterQuery),t("#buddypress [data-bp-search]").on("submit","form",this,this.searchQuery),t("#buddypress [data-bp-search] form").on("search","input[type=search]",this.resetSearch),t("#buddypress [data-bp-list], #buddypress #item-header").on("click","[data-bp-btn-action]",this,this.buttonAction),t("#buddypress [data-bp-list], #buddypress #item-header").on("blur","[data-bp-btn-action]",this,this.buttonRevert),t(document).on("keyup",this,this.keyUp),t('#buddypress .activity-list, #buddypress [data-bp-list="activity"], #bb-media-model-container .activity-list, #media-stream').on("click",".ac-document-move, .ac-folder-move",this.openDocumentMove.bind(this)),t('#buddypress .activity-list, #buddypress [data-bp-list="activity"], #bb-media-model-container .activity-list, #media-stream').on("click",".ac-document-close-button, .ac-folder-close-button",this.closeDocumentMove.bind(this)),t("[data-bp-close]").on("click",this,this.closeNotice),t("#buddypress [data-bp-list]").on("click","[data-bp-pagination] a",this,this.paginateAction),t(document).on("click",this.closePickersOnClick),document.addEventListener("keydown",this.closePickersOnEsc)},switchGridList:function(){var e=this,a=t(".grid-filters").data("object");"friends"===a||"group_members"===a?a="members":"group_requests"===a?a="groups":"notifications"===a&&(a="members");var i=e.getLocalStorage("bp-"+a),s={};void 0!==i.extras&&void 0!==(s=i.extras).layout&&(t(".grid-filters .layout-view").removeClass("active"),"list"===s.layout?t(".grid-filters .layout-list-view").addClass("active"):t(".grid-filters .layout-grid-view").addClass("active")),t(document).on("click",".grid-filters .layout-view",function(i){i.preventDefault(),t(this).hasClass("layout-list-view")?(t(".layout-grid-view").removeClass("active"),t(this).addClass("active"),t(".bp-list").removeClass("grid"),s.layout="list"):(t(".layout-list-view").removeClass("active"),t(this).addClass("active"),t(".bp-list").addClass("grid"),s.layout="grid"),!0===t("body").hasClass("group-members")?e.setLocalStorage("bp-group_members","extras",s):e.setLocalStorage("bp-"+a,"extras",s)})},sentInvitesFormValidate:function(){t("body.send-invites #send-invite-form #member-invites-table").length&&t("body.send-invites #send-invite-form").submit(function(){var e=!1,a="",i="",s="",o=[],r=[],n="",d=0,l=0,c="",p="",u="",b="",m=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,f=t("body.send-invites #send-invite-form #error-message-empty-name-field").val(),v=t("body.send-invites #send-invite-form #error-message-invalid-email-address-field").val();if(n=t("body.send-invites #send-invite-form #error-message-required-field").val(),l=t("body.send-invites #send-invite-form #error-message-empty-subject-field").length,d=t("body.send-invites #send-invite-form #error-message-empty-body-field").length,1===l&&(c=t("body.send-invites #send-invite-form #bp-member-invites-custom-subject").val(),p=t("body.send-invites #send-invite-form #error-message-empty-subject-field").val()),1===d&&(u=tinyMCE.get("bp-member-invites-custom-content").getContent(),b=t("body.send-invites #send-invite-form #error-message-empty-body-field").val()),1===l&&1===d){var h=t("body.send-invites #send-invite-form #error-message-empty-subject-body-field").val();if(""===c&&""===u){if(!confirm(h))return!1}else if(""!==c&&""===u){if(!confirm(b))return!1}else if(""===c&&""!==u&&!confirm(p))return!1}else if(0===l&&1===d){if(""===u&&!confirm(b))return!1}else if(1===l&&0===d&&""===c&&!confirm(p))return!1;if(t("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){t(this).find('input[type="text"]').removeAttr("style"),t(this).find('input[type="email"]').removeAttr("style")}),t("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){a=t.trim(t(this).find('input[type="text"]').val()),i=t(this).find("input").attr("id"),s=t.trim(t(this).find('input[type="email"]').val()),""===a&&""===s?e=!1:""!==a&&""===s?(i=t(this).find('input[type="email"]').attr("id"),e=!0,o.push(i)):""===a&&""!==s?(i=t(this).find('input[type="text"]').attr("id"),e=!0,o.push(i)):m.test(s)?(e=!1,r.push(1)):(i=t(this).find('input[type="email"]').attr("id"),e=!0,o.push(i))}),t(".span_error").remove(),0!==o.length)return o.forEach(function(e){t("#"+e).attr("style","border:1px solid #ef3e46"),-1!==e.indexOf("email_")?t("#"+e).after('<span class="span_error" style="color:#ef3e46">'+v+"</span>"):t("#"+e).after('<span class="span_error" style="color:#ef3e46">'+f+"</span>")}),t("html, body").animate({scrollTop:t("#item-body").offset().top},2e3),alert(n),!1;if(t("#email_0_email_error").length&&t("#email_0_email_error").remove(),0===r.length){var g=t("#invitee_0_title").val(),y=t("#email_0_email").val();return""===g&&""===y?(t("#invitee_0_title").attr("style","border:1px solid #ef3e46"),t("#invitee_0_title").focus(),t("#email_0_email").attr("style","border:1px solid #ef3e46"),!1):""!==g&&""===y?(t("#email_0_email").attr("style","border:1px solid #ef3e46"),t("#email_0_email").focus(),!1):(m.test(y)||(t("#email_0_email").attr("style","border:1px solid #ef3e46"),t("#email_0_email").focus(),t("#email_0_email_error").remove(),t("#email_0_email").after('<span id="email_0_email_error" style="color:#ef3e46">'+v+"</span>")),alert(n),!1)}})},sendInvitesRevokeAccess:function(){t("body.sent-invites #member-invites-table").length&&t("body.sent-invites #member-invites-table tr td span a.revoked-access").click(function(e){e.preventDefault();var a=t(this).attr("data-name"),i=t(this).attr("id"),s=t(this).attr("data-revoke-access");if(!confirm(a))return!1;t.ajax({url:s,type:"post",data:{item_id:i},success:function(){window.location.reload(!0)}})})},toggleDisabledInput:function(){var e=t(this).attr("data-bp-disable-input");t(e).prop("disabled",!0)&&!t(this).hasClass("enabled")?(t(this).addClass("enabled").removeClass("disabled"),t(e).removeProp("disabled")):t(e).prop("disabled",!1)&&t(this).hasClass("enabled")&&(t(this).removeClass("enabled").addClass("disabled"),t(e).attr("disabled","disabled"))},keyUp:function(e){var t=e.data;27===e.keyCode&&t.buttonRevertAll()},openDocumentMove:function(e){e.preventDefault();var a;a=t(e.currentTarget).hasClass("ac-document-move")?"#"+t(e.currentTarget).closest("li.activity_update").find(".bp-media-move-file").attr("id"):"#"+t(e.currentTarget).closest("li.activity_update").find(".bp-media-move-folder").attr("id"),t(e.currentTarget).closest(".media-folder_items").length>0&&(a=t(e.currentTarget).hasClass("ac-document-move")?"."+t(e.currentTarget).closest("#media-folder-document-data-table").find(".bp-media-move-file").attr("class"):"."+t(e.currentTarget).closest("#media-folder-document-data-table").find(".bp-media-move-folder").attr("class")),bp.Nouveau.Media.folderLocationUI&&bp.Nouveau.Media.folderLocationUI(a),t(a).show()},closeDocumentMove:function(e){e.preventDefault(),t(e.currentTarget).hasClass("ac-document-close-button")?t(e.currentTarget).closest(".bp-media-move-file").hide():t(e.currentTarget).closest(".bp-media-move-folder").hide()},scopeQuery:function(e){var a,i=e.data,s=t(e.currentTarget).parent(),o="all",r=null,n="",d=null;if(s.hasClass("no-ajax")||t(e.currentTarget).hasClass("no-ajax")||!s.attr("data-bp-scope"))return e;if(o=s.data("bp-scope"),a=s.data("bp-object"),!o||!a)return e;e.preventDefault();var l=i.getLocalStorage("bp-"+a);void 0!==l.extras&&"notifications"!==a&&(d=l.extras),r=t("#buddypress").find('[data-bp-filter="'+a+'"]').first().val(),t('#buddypress [data-bp-search="'+a+'"] input[type=search]').length&&(n=t('#buddypress [data-bp-search="'+a+'"] input[type=search]').val()),s.hasClass("dynamic")&&s.find("a span").html(""),i.objectRequest({object:a,scope:o,filter:r,search_terms:n,page:1,extras:d})},filterQuery:function(e){var a=e.data,i=t(e.target).data("bp-filter"),s="all",o=t(e.target).val(),r="",n=!1;if(!i)return e;t(a.objectNavParent+" [data-bp-object].selected").length&&(s=t(a.objectNavParent+" [data-bp-object].selected").data("bp-scope")),t('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(r=t('#buddypress [data-bp-search="'+i+'"] input[type=search]').val()),"friends"===i&&(i="members");var d=a.getLocalStorage("bp-"+i);void 0!==d.extras&&"notifications"!==i&&(n=d.extras),"members"===i?a.objectRequest({object:i,scope:s,filter:o,search_terms:r,page:1,extras:n,template:null,member_type_id:t('#buddypress [data-bp-member-type-filter="'+i+'"]').val()}):"groups"===i?a.objectRequest({object:i,scope:s,filter:o,search_terms:r,page:1,extras:n,template:null,group_type:t('#buddypress [data-bp-group-type-filter="'+i+'"]').val()}):a.objectRequest({object:i,scope:s,filter:o,search_terms:r,page:1,extras:n,template:null})},typeGroupFilterQuery:function(e){var a=e.data,i=t(e.target).data("bp-group-type-filter"),s="all",o=t(e.target).val(),r="";if(!i)return e;t(a.objectNavParent+" [data-bp-object].selected").length&&(s=t(a.objectNavParent+" [data-bp-object].selected").data("bp-scope")),t('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(r=t('#buddypress [data-bp-search="'+i+'"] input[type=search]').val()),"friends"===i&&(i="members"),a.objectRequest({object:i,scope:s,filter:o,search_terms:r,page:1,template:null,group_type:t('#buddypress [data-bp-group-type-filter="'+i+'"]').val()})},typeMemberFilterQuery:function(e){var a=e.data,i=t(e.target).data("bp-member-type-filter"),s="all",o=t(e.target).val(),r="";if(!i)return e;t(a.objectNavParent+" [data-bp-object].selected").length&&(s=t(a.objectNavParent+" [data-bp-object].selected").data("bp-scope")),t('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(r=t('#buddypress [data-bp-search="'+i+'"] input[type=search]').val()),"friends"===i&&(i="members"),a.objectRequest({object:i,scope:s,filter:o,search_terms:r,page:1,template:null,member_type_id:t('#buddypress [data-bp-member-type-filter="'+i+'"]').val()})},searchQuery:function(e){var a,i=e.data,s="all",o=null,r="",n=!1;if(t(e.delegateTarget).hasClass("no-ajax")||void 0===t(e.delegateTarget).data("bp-search"))return e;e.preventDefault(),a=t(e.delegateTarget).data("bp-search"),o=t("#buddypress").find('[data-bp-filter="'+a+'"]').first().val(),r=t(e.delegateTarget).find("input[type=search]").first().val(),t(i.objectNavParent+" [data-bp-object]").length&&(s=t(i.objectNavParent+' [data-bp-object="'+a+'"].selected').data("bp-scope"));var d=i.getLocalStorage("bp-"+a);void 0!==d.extras&&"notifications"!==a&&(n=d.extras),i.objectRequest({object:a,scope:s,filter:o,search_terms:r,page:1,extras:n,template:null})},showSearchSubmit:function(e){t(e.delegateTarget).find("[type=submit]").addClass("bp-show"),t("[type=submit]").hasClass("bp-hide")&&t("[type=submit]").removeClass("bp-hide")},resetSearch:function(e){t(e.target).val()?t(e.delegateTarget).find("[type=submit]").show():t(e.delegateTarget).submit()},buttonAction:function(e){var a=e.data,i=t(e.currentTarget),s=i.data("bp-btn-action"),o=i.data("bp-nonce"),r=i.closest("[data-bp-item-id]"),n=r.data("bp-item-id"),d=i.closest(".list-wrap"),l=r.data("bp-item-component"),c="";if(!s||!n||!l)return e;if(e.preventDefault(),i.hasClass("bp-toggle-action-button"))return t(document.body).hasClass("buddyboss-theme")&&void 0!==i.data("balloon")?i.attr("data-balloon",i.data("title")):i.text(i.data("title")),i.removeClass("bp-toggle-action-button"),i.addClass("bp-toggle-action-button-clicked"),!1;if(void 0!==i.data("only-admin"))return void 0!==BP_Nouveau.only_admin_notice&&window.alert(BP_Nouveau.only_admin_notice),!1;if(void 0!==BP_Nouveau[s+"_confirm"]&&!1===window.confirm(BP_Nouveau[s+"_confirm"])||i.hasClass("pending"))return!1;c=o?(c=o.split("?_wpnonce="))[1]:a.getLinkParams(i.prop("href"),"_wpnonce");var p={is_friend:"remove_friend",not_friends:"add_friend",pending:"withdraw_friendship",accept_friendship:"accept_friendship",reject_friendship:"reject_friendship"};"members"===l&&void 0!==p[s]&&(s=p[s],l="friends");var u={not_following:"follow",following:"unfollow"};"members"===l&&void 0!==u[s]&&(s=u[s],l="follow"),i.addClass("pending loading"),a.ajax({action:l+"_"+s,item_id:n,_wpnonce:c},l,!0).done(function(e){if(!1===e.success)d.prepend(e.data.feedback),i.removeClass("pending loading"),r.find(".bp-feedback").fadeOut(6e3);else{if("groups"===l&&void 0!==e.data.is_group&&e.data.is_group)return window.location.reload();if(t("#friends-personal-li").length){var o=t("#friends-personal-li a span"),n=t("#friends-personal-li a");void 0!==e.data.is_user&&e.data.is_user&&void 0!==e.data.friend_count?e.data.friend_count>0?o.length?t(o).html(e.data.friend_count):t(n).append('<span class="count">'+e.data.friend_count+"</span>"):t(o).hide():void 0!==e.data.friend_count&&(e.data.friend_count>0?o.length?t(o).html(e.data.friend_count):t(n).append('<span class="count">'+e.data.friend_count+"</span>"):t(o).hide())}if(void 0!==e.data.is_user&&e.data.is_user)return i.parent().html(e.data.feedback),void r.fadeOut(1500);if(t(a.objectNavParent+' [data-bp-scope="personal"]').length){var c=Number(t(a.objectNavParent+' [data-bp-scope="personal"] span').html())||0;-1!==t.inArray(s,["leave_group","remove_friend"])?c-=1:-1!==t.inArray(s,["join_group"])&&(c+=1),c<0&&(c=0),t(a.objectNavParent+' [data-bp-scope="personal"] span').html(c)}i.parent().replaceWith(e.data.contents)}})},buttonRevert:function(e){var a=t(e.currentTarget);a.hasClass("bp-toggle-action-button-clicked")&&!a.hasClass("loading")&&(t(document.body).hasClass("buddyboss-theme")&&void 0!==a.data("balloon")?a.attr("data-balloon",a.data("title-displayed")):a.text(a.data("title-displayed")),a.removeClass("bp-toggle-action-button-clicked"),a.addClass("bp-toggle-action-button"))},buttonRevertAll:function(){t.each(t("#buddypress [data-bp-btn-action]"),function(){t(this).hasClass("bp-toggle-action-button-clicked")&&!t(this).hasClass("loading")&&(t(document.body).hasClass("buddyboss-theme")&&void 0!==t(this).data("balloon")?t(this).attr("data-balloon",t(this).data("title-displayed")):t(this).text(t(this).data("title-displayed")),t(this).removeClass("bp-toggle-action-button-clicked"),t(this).addClass("bp-toggle-action-button"),t(this).trigger("blur"))})},closeNotice:function(e){var a=t(e.currentTarget);e.preventDefault(),"clear"===a.data("bp-close")&&(void 0!==t.cookie("bp-message")&&t.removeCookie("bp-message"),void 0!==t.cookie("bp-message-type")&&t.removeCookie("bp-message-type")),a.closest(".bp-feedback").hasClass("bp-sitewide-notice")&&bp.Nouveau.ajax({action:"messages_dismiss_sitewide_notice"},"messages"),a.closest(".bp-feedback").remove()},paginateAction:function(e){var a,i,s,o=e.data,r=t(e.currentTarget),n=null,d=null,l=null,c=null;if(null===(a=r.closest("[data-bp-pagination]").data("bp-pagination")||null))return e;e.preventDefault(),null!==(i=t(e.delegateTarget).data("bp-list")||null)&&(void 0!==(s=o.getLocalStorage("bp-"+i)).scope&&(n=s.scope),void 0!==s.filter&&(d=s.filter),void 0!==s.extras&&(c=s.extras)),null!==i&&(void 0!==(s=o.getStorage("bp-"+i)).scope&&(n=s.scope),void 0!==s.filter&&(d=s.filter),void 0!==s.extras&&(c=s.extras)),t('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(l=t('#buddypress [data-bp-search="'+i+'"] input[type=search]').val());var p={object:i,scope:n,filter:d,search_terms:l,extras:c,caller:r.closest("[data-bp-pagination]").hasClass("bottom")?"pag-bottom":"",page:o.getLinkParams(r.prop("href"),a)||1};o.objectRequest(p)},registerPopUp:function(){t(".popup-modal-register").length&&t(".popup-modal-register").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),t(".popup-modal-dismiss").length&&t(".popup-modal-dismiss").click(function(e){e.preventDefault(),t.magnificPopup.close()})},loginPopUp:function(){t(".popup-modal-login").length&&t(".popup-modal-login").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),t(".popup-modal-dismiss").length&&t(".popup-modal-dismiss").click(function(e){e.preventDefault(),t.magnificPopup.close()})},groupPreFilter:function(e){if("string"==typeof e.data&&-1!==e.data.indexOf("action=groups_filter")){var a=t("#group-type-order-by").find(":selected").val();void 0!==a&&(e.data+="&group_type="+a)}},mediaPreFilter:function(e){if("string"==typeof e.data&&-1!==e.data.indexOf("action=media_filter")){var a=t("#buddypress [data-bp-media-type]").attr("data-bp-media-type");e.data+=void 0!==a?"&type="+a:"&type=media"}},memberPreFilter:function(e){if("string"==typeof e.data&&-1!==e.data.indexOf("action=members_filter")){var a=t("#member-type-order-by").find(":selected").val();void 0!==a&&(e.data+="&member_type_id="+a)}},closePickersOnClick:function(e){var a=t(e.target);_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||a.closest(".post-emoji").length||a.is(".emojioneemoji,.emojibtn")||t(".emojionearea-button.active").removeClass("active")},closePickersOnEsc:function(e){"Escape"!==e.key&&27!==e.keyCode||_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||t(".emojionearea-button.active").removeClass("active")},lazyLoad:function(e){var a=t(e);if(a.length)for(var i=0;i<a.length;i++){var s=!1;try{t(a[i]).is(":in-viewport")&&(s=!0)}catch(e){console.error(e.message),!s&&a[i].getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)+window.scrollY&&(s=!0)}s&&a[i].getAttribute("data-src")&&(a[i].src=a[i].getAttribute("data-src"),a[i].removeAttribute("data-src"),t(a[i]).on("load",function(){t(this).removeClass("lazy")}),t(document).trigger("bp_nouveau_lazy_load",{element:a[i]}))}},documentCodeMirror:function(){t(".document-text:not(.loaded)").each(function(){var e=t(this),a=e.attr("data-extension"),i=e.attr("data-extension");if("html"==a&&(i="text/html"),"js"==a)CodeMirror(e[0],{value:e.find(".document-text-file-data-hidden").val(),lineNumbers:!0,theme:"default",readOnly:!0,lineWrapping:!0});else CodeMirror(e[0],{value:e.find(".document-text-file-data-hidden").val(),mode:i,lineNumbers:!0,theme:"default",readOnly:!0,lineWrapping:!0});e.addClass("loaded"),e.parent().height()>150&&e.closest(".document-text-wrap").addClass("is_large")}),t(".bb-activity-media-elem.document-activity").closest(".activity-inner").hasClass("documemt-activity")||t(".bb-activity-media-elem.document-activity").closest(".activity-content").addClass("documemt-activity")}},bp.Nouveau.start())}(bp,jQuery);