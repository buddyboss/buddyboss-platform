window.wp=window.wp||{},window.bp=window.bp||{},function(g){"undefined"!=typeof BP_Nouveau&&(bp.Nouveau={start:function(){this.setupGlobals(),this.prepareDocument(),this.initObjects(),this.setHeartBeat(),this.addListeners(),this.switchGridList(),this.sendInvitesRevokeAccess(),this.sentInvitesFormValidate(),this.registerPopUp(),this.loginPopUp(),bp.Nouveau.lazyLoad(".lazy"),g(window).on("scroll resize",function(){bp.Nouveau.lazyLoad(".lazy")})},setupGlobals:function(){this.ajax_request=null,this.objects=g.map(BP_Nouveau.objects,function(e){return e}),this.objectNavParent=BP_Nouveau.object_nav_parent,this.heartbeat=wp.heartbeat||!1,this.querystring=this.getLinkParams()},prepareDocument:function(){var a;g("body").hasClass("no-js")&&g("body").removeClass("no-js").addClass("js"),BP_Nouveau.warnings&&"undefined"!=typeof console&&console.warn&&g.each(BP_Nouveau.warnings,function(e,t){console.warn(t)}),g(".buddypress_object_nav .widget-title").length&&(a=g(".buddypress_object_nav .widget-title").html(),g("body").find('*:contains("'+a+'")').each(function(e,t){g(t).hasClass("widget-title")||a!==g(t).html()||g(t).is("a")||g(t).remove()}))},getStorage:function(e,t){var a=(a=sessionStorage.getItem(e))?JSON.parse(a):{};return void 0!==t?a[t]||!1:a},setStorage:function(e,t,a){var i=this.getStorage(e);return void 0===a&&void 0!==i[t]?delete i[t]:i[t]=a,sessionStorage.setItem(e,JSON.stringify(i)),null!==sessionStorage.getItem(e)},getLinkParams:function(e,t){var a=e?-1!==e.indexOf("?")?"?"+e.split("?")[1]:"":document.location.search;if(!a)return null;var i=a.replace(/(^\?)/,"").split("&").map(function(e){return this[(e=e.split("="))[0]]=e[1],this}.bind({}))[0];return t?i[t]:i},urlDecode:function(e,t){var a=t||{amp:"&",lt:"<",gt:">",quot:'"',"#039":"'"};return decodeURIComponent(e.replace(/\+/g," ")).replace(/&([^;]+);/g,function(e,t){return a[t]||""})},ajax:function(e,t,a){this.ajax_request&&void 0===a&&this.ajax_request.abort();var i=g.extend({},bp.Nouveau.getStorage("bp-"+t),{nonce:BP_Nouveau.nonces[t]},e);return void 0!==BP_Nouveau.customizer_settings&&(i.customized=BP_Nouveau.customizer_settings),this.ajax_request=g.post(BP_Nouveau.ajaxurl,i,"json"),this.ajax_request},inject:function(e,t,a){g(e).length&&t&&("append"===(a=a||"reset")?g(e).append(t).find("li.activity-item").each(this.hideSingleUrl):"prepend"===a?g(e).prepend(t).find("li.activity-item").each(this.hideSingleUrl):g(e).html(t).find("li.activity-item").each(this.hideSingleUrl),"undefined"==typeof bp_mentions&&void 0===bp.mentions||g(".bp-suggestions").bp_mentions(bp.mentions.users))},hideSingleUrl:function(){var e=g(this).find(".activity-inner > p").removeAttr("br").removeAttr("a").text(),t="",a="",i="",s=0;if(0<=e.indexOf("http://")?(i=e.indexOf("http://"),s=1):0<=e.indexOf("https://")?(i=e.indexOf("https://"),s=1):0<=e.indexOf("www.")&&(i=e.indexOf("www"),s=1),1===s){for(var r=i;r<e.length&&(" "!==e[r]&&"\n"!==e[r]);r++)t+=e[r];""!==t&&(a=g.trim(e.replace(t,""))),a.length<=0&&(g(this).find(".activity-inner > .activity-link-preview-container ").length||g(this).hasClass("wp-link-embed"))&&g(this).find(".activity-inner > p:first a").hide()}},objectRequest:function(i){var e,s=this;if((i=g.extend({object:"",scope:null,filter:null,target:"#buddypress [data-bp-list]",search_terms:"",page:1,extras:null,caller:null,template:null,method:"reset"},i)).object&&i.target)return"activity"==i.object&&"#buddypress [data-bp-list] ul.bp-list"==i.target&&(i.target="#buddypress [data-bp-list] ul.bp-list:not(#bb-media-model-container ul.bp-list)"),"activity"!=i.object||g(this.objectNavParent+' [data-bp-scope="'+i.scope+'"]').length||(i.scope="all"),i.search_terms&&(i.search_terms=i.search_terms.replace(/</g,"&lt;").replace(/>/g,"&gt;")),null!==i.scope&&this.setStorage("bp-"+i.object,"scope",i.scope),null!==i.filter&&this.setStorage("bp-"+i.object,"filter",i.filter),null!==i.extras&&this.setStorage("bp-"+i.object,"extras",i.extras),g(this.objectNavParent+" [data-bp-object]").each(function(){g(this).removeClass("selected loading")}),g(this.objectNavParent+' [data-bp-scope="'+i.scope+'"]').length?g(this.objectNavParent+' [data-bp-scope="'+i.scope+'"], #object-nav li.current').addClass("selected loading"):g(this.objectNavParent+" [data-bp-scope]:eq(0), #object-nav li.current").addClass("selected loading"),g('#buddypress [data-bp-filter="'+i.object+'"] option[value="'+i.filter+'"]').prop("selected",!0),"friends"===i.object||"group_members"===i.object?(i.template=i.object,i.object="members"):"group_requests"===i.object?(i.object="groups",i.template="group_requests"):"group_subgroups"===i.object?(i.object="groups",i.template="group_subgroups"):"notifications"===i.object&&(i.object="members",i.template="member_notifications"),e=g.extend({action:i.object+"_filter"},i),this.ajax(e,i.object).done(function(e){if(!1!==e.success&&!_.isUndefined(e.data)){if(!g("body.group-members.members.buddypress").length||_.isUndefined(e.data)||_.isUndefined(e.data.count)||g("body.group-members.members.buddypress ul li#members-groups-li").find("span").text(e.data.count),g(s.objectNavParent+' [data-bp-scope="'+i.scope+'"]').removeClass("loading"),g(s.objectNavParent+' [data-bp-scope="'+i.scope+'"]').find("span").text(""),_.isUndefined(e.data)||_.isUndefined(e.data.count)||g(s.objectNavParent+' [data-bp-scope="'+i.scope+'"]').find("span").text(e.data.count),!_.isUndefined(e.data)&&!_.isUndefined(e.data.scopes))for(var t in e.data.scopes)g(s.objectNavParent+' [data-bp-scope="'+t+'"]').find("span").text(e.data.scopes[t]);var a;"reset"!==i.method?(s.inject(i.target,e.data.contents,i.method),g(i.target).trigger("bp_ajax_"+i.method,g.extend(i,{response:e.data}))):"pag-bottom"===i.caller?(a=null,a=g("#subnav").length?g("#subnav").parent():g(i.target),g("html,body").animate({scrollTop:a.offset().top},"slow",function(){g(i.target).fadeOut(100,function(){s.inject(this,e.data.contents,i.method),g(this).fadeIn(100),g(i.target).trigger("bp_ajax_request",g.extend(i,{response:e.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3)})})):g(i.target).fadeOut(100,function(){s.inject(this,e.data.contents,i.method),g(this).fadeIn(100),g(i.target).trigger("bp_ajax_request",g.extend(i,{response:e.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3)})}})},initObjects:function(){var i=this,s={},r={},n="all",o="",d=null,l=null;g.each(this.objects,function(e,t){s=i.getStorage("bp-"+t);var a=window.location.hash.substr(1);void 0!==a&&"following"==a?n=a:void 0!==s.scope&&(n=s.scope),void 0!==s.extras&&"notifications"!==t&&(d=s.extras),g('#buddypress [data-bp-filter="'+t+'"]').length&&(void 0!==s.filter?(l=s.filter,g('#buddypress [data-bp-filter="'+t+'"] option[value="'+l+'"]').prop("selected",!0)):"-1"!==g('#buddypress [data-bp-filter="'+t+'"]').val()&&"0"!==g('#buddypress [data-bp-filter="'+t+'"]').val()&&(l=g('#buddypress [data-bp-filter="'+t+'"]').val())),g(this.objectNavParent+' [data-bp-object="'+t+'"]').length&&(g(this.objectNavParent+' [data-bp-object="'+t+'"]').each(function(){g(this).removeClass("selected")}),g(this.objectNavParent+' [data-bp-scope="'+t+'"], #object-nav li.current').addClass("selected")),null!==i.querystring&&(void 0!==i.querystring[t+"_search"]?o=i.querystring[t+"_search"]:void 0!==i.querystring.s&&(o=i.querystring.s),o&&g('#buddypress [data-bp-search="'+t+'"] input[type=search]').val(o)),g('#buddypress [data-bp-list="'+t+'"]').length&&(r={object:t,scope:n,filter:l,search_terms:o,extras:d},g('#buddypress [data-bp-member-type-filter="'+t+'"]').length?r.member_type_id=g('#buddypress [data-bp-member-type-filter="'+t+'"]').val():g('#buddypress [data-bp-group-type-filter="'+t+'"]').length&&(r.group_type=g('#buddypress [data-bp-group-type-filter="'+t+'"]').val()),i.objectRequest(r))})},setHeartBeat:function(){void 0!==BP_Nouveau.pulse&&this.heartbeat&&(this.heartbeat.interval(Number(BP_Nouveau.pulse)),g.fn.extend({"heartbeat-send":function(){return this.bind("heartbeat-send")}}),g.fn.extend({"heartbeat-tick":function(){return this.bind("heartbeat-tick")}}))},addListeners:function(){g("[data-bp-disable-input]").on("change",this.toggleDisabledInput),g(this.objectNavParent+" .bp-navs").on("click","a",this,this.scopeQuery),g(document).on("change","#buddypress [data-bp-filter]",this,this.filterQuery),g(document).on("change","#buddypress [data-bp-group-type-filter]",this,this.typeGroupFilterQuery),g(document).on("change","#buddypress [data-bp-member-type-filter]",this,this.typeMemberFilterQuery),g("#buddypress [data-bp-search]").on("submit","form",this,this.searchQuery),g("#buddypress [data-bp-search] form").on("search","input[type=search]",this.resetSearch),g("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list").on("click","[data-bp-btn-action]",this,this.buttonAction),g("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list").on("blur","[data-bp-btn-action]",this,this.buttonRevert),g(document).on("click","#buddypress table.invite-settings .field-actions .field-actions-remove, #buddypress table.invite-settings .field-actions-add",this,this.addRemoveInvite),g(document).on("keyup",this,this.keyUp),g("[data-bp-close]").on("click",this,this.closeNotice),g("#buddypress [data-bp-list]").on("click","[data-bp-pagination] a",this,this.paginateAction),g(document).on("click",this.closePickersOnClick),document.addEventListener("keydown",this.closePickersOnEsc),g(document).on("click","#item-header a.position-change-cover-image, .header-cover-reposition-wrap a.cover-image-save, .header-cover-reposition-wrap a.cover-image-cancel",this.coverPhotoCropper)},switchGridList:function(){var t=this,a=!1,i=g(".grid-filters").data("object");"group_members"===i&&(a=!0),"friends"===i?i="members":"group_requests"===i?i="groups":"notifications"===i&&(i="members");var e=t.getStorage("bp-"+i),s={};void 0!==e.extras&&void 0!==(s=e.extras).layout&&(g(".grid-filters .layout-view").removeClass("active"),"list"===s.layout?g(".grid-filters .layout-list-view").addClass("active"):g(".grid-filters .layout-grid-view").addClass("active")),g(document).on("click",".grid-filters .layout-view",function(e){e.preventDefault(),g(this).hasClass("layout-list-view")?(g(".layout-grid-view").removeClass("active"),g(this).addClass("active"),g(".bp-list").removeClass("grid"),s.layout="list"):(g(".layout-list-view").removeClass("active"),g(this).addClass("active"),g(".bp-list").addClass("grid"),s.layout="grid"),a?t.setStorage("bp-group_members","extras",s):t.setStorage("bp-"+i,"extras",s)})},sentInvitesFormValidate:function(){g("body.send-invites #send-invite-form #member-invites-table").length&&g("body.send-invites #send-invite-form").submit(function(){var e="",t="",a="",i=[],s=[],r="",n="",o="",d="",l=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,p=g("body.send-invites #send-invite-form #error-message-empty-name-field").val(),c=g("body.send-invites #send-invite-form #error-message-invalid-email-address-field").val(),u=g("body.send-invites #send-invite-form #error-message-required-field").val(),b=g("body.send-invites #send-invite-form #error-message-empty-subject-field").length,f=g("body.send-invites #send-invite-form #error-message-empty-body-field").length;if(1===b&&(r=g("body.send-invites #send-invite-form #bp-member-invites-custom-subject").val(),n=g("body.send-invites #send-invite-form #error-message-empty-subject-field").val()),1===f&&(o=tinyMCE.get("bp-member-invites-custom-content").getContent(),d=g("body.send-invites #send-invite-form #error-message-empty-body-field").val()),1===b&&1===f){var m=g("body.send-invites #send-invite-form #error-message-empty-subject-body-field").val();if(""===r&&""===o){if(!confirm(m))return!1}else if(""!==r&&""===o){if(!confirm(d))return!1}else if(""===r&&""!==o&&!confirm(n))return!1}else if(0===b&&1===f){if(""===o&&!confirm(d))return!1}else if(1===b&&0===f&&""===r&&!confirm(n))return!1;if(g("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){g(this).find('input[type="text"]').removeAttr("style"),g(this).find('input[type="email"]').removeAttr("style")}),g("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){e=g.trim(g(this).find('input[type="text"]').val()),t=g(this).find("input").attr("id"),a=g.trim(g(this).find('input[type="email"]').val()),""===e&&""===a?0:""!==e&&""===a?(t=g(this).find('input[type="email"]').attr("id"),i.push(t)):""===e&&""!==a?(t=g(this).find('input[type="text"]').attr("id"),i.push(t)):l.test(a)?s.push(1):(t=g(this).find('input[type="email"]').attr("id"),i.push(t))}),g(".span_error").remove(),0!==i.length)return i.forEach(function(e){g("#"+e).attr("style","border:1px solid #ef3e46"),-1!==e.indexOf("email_")?g("#"+e).after('<span class="span_error" style="color:#ef3e46">'+c+"</span>"):g("#"+e).after('<span class="span_error" style="color:#ef3e46">'+p+"</span>")}),g("html, body").animate({scrollTop:g("#item-body").offset().top},2e3),alert(u),!1;if(g("#email_0_email_error").length&&g("#email_0_email_error").remove(),0===s.length){var v=g("#invitee_0_title").val(),h=g("#email_0_email").val();return""===v&&""===h?(g("#invitee_0_title").attr("style","border:1px solid #ef3e46"),g("#invitee_0_title").focus(),g("#email_0_email").attr("style","border:1px solid #ef3e46"),!1):(""!==v&&""===h?(g("#email_0_email").attr("style","border:1px solid #ef3e46"),g("#email_0_email").focus()):(l.test(h)||(g("#email_0_email").attr("style","border:1px solid #ef3e46"),g("#email_0_email").focus(),g("#email_0_email_error").remove(),g("#email_0_email").after('<span id="email_0_email_error" style="color:#ef3e46">'+c+"</span>")),alert(u)),!1)}})},sendInvitesRevokeAccess:function(){g("body.sent-invites #member-invites-table").length&&g("body.sent-invites #member-invites-table tr td span a.revoked-access").click(function(e){e.preventDefault();var t=g(this).attr("data-name"),a=g(this).attr("id"),i=g(this).attr("data-revoke-access");if(!confirm(t))return!1;g.ajax({url:i,type:"post",data:{item_id:a},success:function(){window.location.reload(!0)}})})},toggleDisabledInput:function(){var e=g(this).attr("data-bp-disable-input");g(e).prop("disabled",!0)&&!g(this).hasClass("enabled")?(g(this).addClass("enabled").removeClass("disabled"),g(e).removeProp("disabled")):g(e).prop("disabled",!1)&&g(this).hasClass("enabled")&&(g(this).removeClass("enabled").addClass("disabled"),g(e).attr("disabled","disabled"))},keyUp:function(e){var t=e.data;27===e.keyCode&&t.buttonRevertAll()},scopeQuery:function(e){var t,a,i,s=e.data,r=g(e.currentTarget).parent(),n="",o=null,d={};if(r.hasClass("no-ajax")||g(e.currentTarget).hasClass("no-ajax")||!r.attr("data-bp-scope"))return e;if(t=r.data("bp-scope"),a=r.data("bp-object"),!t||!a)return e;e.preventDefault();var l=s.getStorage("bp-"+a);void 0!==l.extras&&"notifications"!==a&&(o=l.extras),i=g("#buddypress").find('[data-bp-filter="'+a+'"]').first().val(),g('#buddypress [data-bp-search="'+a+'"] input[type=search]').length&&(n=g('#buddypress [data-bp-search="'+a+'"] input[type=search]').val()),r.hasClass("dynamic")&&r.find("a span").html(""),d={object:a,scope:t,filter:i,search_terms:n,page:1,extras:o},g('#buddypress [data-bp-member-type-filter="'+a+'"]').length?d.member_type_id=g('#buddypress [data-bp-member-type-filter="'+a+'"]').val():g('#buddypress [data-bp-group-type-filter="'+a+'"]').length&&(d.group_type=g('#buddypress [data-bp-group-type-filter="'+a+'"]').val()),s.objectRequest(d)},filterQuery:function(e){var t=e.data,a=g(e.target).data("bp-filter"),i="all",s=g(e.target).val(),r="",n=!1;if(!a)return e;g(t.objectNavParent+" [data-bp-object].selected").length&&(i=g(t.objectNavParent+" [data-bp-object].selected").data("bp-scope")),g('#buddypress [data-bp-search="'+a+'"] input[type=search]').length&&(r=g('#buddypress [data-bp-search="'+a+'"] input[type=search]').val()),"friends"===a&&(a="members");var o=t.getStorage("bp-"+a);void 0!==o.extras&&"notifications"!==a&&(n=o.extras),"members"===a?t.objectRequest({object:a,scope:i,filter:s,search_terms:r,page:1,extras:n,template:null,member_type_id:g('#buddypress [data-bp-member-type-filter="'+a+'"]').val()}):"groups"===a?t.objectRequest({object:a,scope:i,filter:s,search_terms:r,page:1,extras:n,template:null,group_type:g('#buddypress [data-bp-group-type-filter="'+a+'"]').val()}):t.objectRequest({object:a,scope:i,filter:s,search_terms:r,page:1,extras:n,template:null})},typeGroupFilterQuery:function(e){var t,a=e.data,i=g(e.target).data("bp-group-type-filter"),s="all",r=null,n=null,o="";if(!i)return e;void 0!==(t=a.getStorage("bp-"+i)).extras&&"notifications"!==i&&(n=t.extras),g('#buddypress [data-bp-filter="'+i+'"]').length&&(void 0!==t.filter?(r=t.filter,g('#buddypress [data-bp-filter="'+i+'"] option[value="'+r+'"]').prop("selected",!0)):"-1"!==g('#buddypress [data-bp-filter="'+i+'"]').val()&&"0"!==g('#buddypress [data-bp-filter="'+i+'"]').val()&&(r=g('#buddypress [data-bp-filter="'+i+'"]').val())),g(a.objectNavParent+" [data-bp-object].selected").length&&(s=g(a.objectNavParent+" [data-bp-object].selected").data("bp-scope")),g('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(o=g('#buddypress [data-bp-search="'+i+'"] input[type=search]').val()),a.objectRequest({object:i,scope:s,filter:r,search_terms:o,page:1,template:null,extras:n,group_type:g('#buddypress [data-bp-group-type-filter="'+i+'"]').val()})},typeMemberFilterQuery:function(e){var t,a=e.data,i=g(e.target).data("bp-member-type-filter"),s="all",r=null,n=null,o="";if(!i)return e;"friends"===i&&(i="members"),void 0!==(t=a.getStorage("bp-"+i)).extras&&"notifications"!==i&&(n=t.extras),g('#buddypress [data-bp-filter="'+i+'"]').length&&(void 0!==t.filter?(r=t.filter,g('#buddypress [data-bp-filter="'+i+'"] option[value="'+r+'"]').prop("selected",!0)):"-1"!==g('#buddypress [data-bp-filter="'+i+'"]').val()&&"0"!==g('#buddypress [data-bp-filter="'+i+'"]').val()&&(r=g('#buddypress [data-bp-filter="'+i+'"]').val())),g(a.objectNavParent+" [data-bp-object].selected").length&&(s=g(a.objectNavParent+" [data-bp-object].selected").data("bp-scope")),g('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(o=g('#buddypress [data-bp-search="'+i+'"] input[type=search]').val()),a.objectRequest({object:i,scope:s,filter:r,search_terms:o,page:1,template:null,extras:n,member_type_id:g('#buddypress [data-bp-member-type-filter="'+i+'"]').val()})},searchQuery:function(e){var t,a,i,s=e.data,r="all",n=!1;if(g(e.delegateTarget).hasClass("no-ajax")||void 0===g(e.delegateTarget).data("bp-search"))return e;e.preventDefault(),t=g(e.delegateTarget).data("bp-search"),a=g("#buddypress").find('[data-bp-filter="'+t+'"]').first().val(),i=g(e.delegateTarget).find("input[type=search]").first().val(),g(s.objectNavParent+" [data-bp-object]").length&&(r=g(s.objectNavParent+' [data-bp-object="'+t+'"].selected').data("bp-scope"));var o=s.getStorage("bp-"+t);void 0!==o.extras&&"notifications"!==t&&(n=o.extras),s.objectRequest({object:t,scope:r,filter:a,search_terms:i,page:1,extras:n,template:null})},showSearchSubmit:function(e){g(e.delegateTarget).find("[type=submit]").addClass("bp-show"),g("[type=submit]").hasClass("bp-hide")&&g("[type=submit]").removeClass("bp-hide")},resetSearch:function(e){g(e.target).val()?g(e.delegateTarget).find("[type=submit]").show():g(e.delegateTarget).submit()},buttonAction:function(e){var s=e.data,r=g(e.currentTarget),n=r.data("bp-btn-action"),t=r.data("bp-nonce"),o=r.closest("[data-bp-item-id]"),a=o.data("bp-item-id"),d=r.closest(".list-wrap"),l=o.data("bp-item-component"),i="";if(!n||!a||!l)return e;if(e.preventDefault(),r.hasClass("bp-toggle-action-button"))return g(document.body).hasClass("buddyboss-theme")&&void 0!==r.data("balloon")?r.attr("data-balloon",r.data("title")):r.text(r.data("title")),r.removeClass("bp-toggle-action-button"),r.addClass("bp-toggle-action-button-clicked"),!1;if(void 0!==r.data("only-admin"))return void 0!==BP_Nouveau.only_admin_notice&&window.alert(BP_Nouveau.only_admin_notice),!1;if(void 0!==BP_Nouveau[n+"_confirm"]&&!1===window.confirm(BP_Nouveau[n+"_confirm"])||r.hasClass("pending"))return!1;i=t?(i=t.split("?_wpnonce="))[1]:s.getLinkParams(r.prop("href"),"_wpnonce");var p={is_friend:"remove_friend",not_friends:"add_friend",pending:"withdraw_friendship",accept_friendship:"accept_friendship",reject_friendship:"reject_friendship"};"members"===l&&void 0!==p[n]&&(n=p[n],l="friends");var c={not_following:"follow",following:"unfollow"};"members"===l&&void 0!==c[n]&&(n=c[n],l="follow"),r.addClass("pending loading"),s.ajax({action:l+"_"+n,item_id:a,_wpnonce:i},l,!0).done(function(e){if(!1===e.success)d.prepend(e.data.feedback),r.removeClass("pending loading"),o.find(".bp-feedback").fadeOut(6e3);else{if("groups"===l&&void 0!==e.data.is_group&&e.data.is_group)return window.location.reload();var t,a,i;if(g("#friends-personal-li").length&&(t=g("#friends-personal-li a span"),a=g("#friends-personal-li a"),(void 0!==e.data.is_user&&e.data.is_user&&void 0!==e.data.friend_count||void 0!==e.data.friend_count)&&(0<e.data.friend_count?t.length?g(t).html(e.data.friend_count):g(a).append('<span class="count">'+e.data.friend_count+"</span>"):g(t).hide())),void 0!==e.data.is_user&&e.data.is_user)return r.parent().html(e.data.feedback),void o.fadeOut(1500);g(s.objectNavParent+' [data-bp-scope="personal"]').length&&(i=Number(g(s.objectNavParent+' [data-bp-scope="personal"] span').html())||0,-1!==g.inArray(n,["leave_group","remove_friend"])?--i:-1!==g.inArray(n,["join_group"])&&(i+=1),i<0&&(i=0),g(s.objectNavParent+' [data-bp-scope="personal"] span').html(i)),r.parent().replaceWith(e.data.contents)}})},buttonRevert:function(e){var t=g(e.currentTarget);t.hasClass("bp-toggle-action-button-clicked")&&!t.hasClass("loading")&&(g(document.body).hasClass("buddyboss-theme")&&void 0!==t.data("balloon")?t.attr("data-balloon",t.data("title-displayed")):t.text(t.data("title-displayed")),t.removeClass("bp-toggle-action-button-clicked"),t.addClass("bp-toggle-action-button"))},buttonRevertAll:function(){g.each(g("#buddypress [data-bp-btn-action]"),function(){g(this).hasClass("bp-toggle-action-button-clicked")&&!g(this).hasClass("loading")&&(g(document.body).hasClass("buddyboss-theme")&&void 0!==g(this).data("balloon")?g(this).attr("data-balloon",g(this).data("title-displayed")):g(this).text(g(this).data("title-displayed")),g(this).removeClass("bp-toggle-action-button-clicked"),g(this).addClass("bp-toggle-action-button"),g(this).trigger("blur"))})},addRemoveInvite:function(e){var t=e.currentTarget,a=g(t).closest("tbody");if(g(t).hasClass("field-actions-remove")){if(!(1<g(this).closest("tr").siblings().length))return;g(this).closest("tr").remove(),a.find(".field-actions-add.disabled").removeClass("disabled")}else if(g(t).hasClass("field-actions-add")){if(g(t).hasClass("disabled"))return;var i=g(this).closest("tr").prev("tr").html();g("<tr>"+i+"</tr>").insertBefore(g(this).closest("tr")),20<a.find("tr").length&&g(t).addClass("disabled")}var s=a.find("tr:not(:last-child)");g.each(s,function(e){g(this).find(".field-name > input").attr("name","invitee["+e+"][]"),g(this).find(".field-name > input").attr("id","invitee_"+e+"_title"),g(this).find(".field-email > input").attr("name","email["+e+"][]"),g(this).find(".field-email > input").attr("id","email_"+e+"_email")})},closeNotice:function(e){var t=g(e.currentTarget);e.preventDefault(),"clear"===t.data("bp-close")&&(void 0!==g.cookie("bp-message")&&g.removeCookie("bp-message"),void 0!==g.cookie("bp-message-type")&&g.removeCookie("bp-message-type")),t.closest(".bp-feedback").hasClass("bp-sitewide-notice")&&bp.Nouveau.ajax({action:"messages_dismiss_sitewide_notice"},"messages"),t.closest(".bp-feedback").remove()},paginateAction:function(e){var t,a,i=e.data,s=g(e.currentTarget),r=null,n=null,o=null,d=null,l=s.closest("[data-bp-pagination]").data("bp-pagination")||null;if(null===l)return e;e.preventDefault(),null!==(t=g(e.delegateTarget).data("bp-list")||null)&&(void 0!==(a=i.getStorage("bp-"+t)).scope&&(r=a.scope),void 0!==a.filter&&(n=a.filter),void 0!==a.extras&&(d=a.extras)),null!==t&&(void 0!==(a=i.getStorage("bp-"+t)).scope&&(r=a.scope),void 0!==a.filter&&(n=a.filter),void 0!==a.extras&&(d=a.extras)),g('#buddypress [data-bp-search="'+t+'"] input[type=search]').length&&(o=g('#buddypress [data-bp-search="'+t+'"] input[type=search]').val());var p={object:t,scope:r,filter:n,search_terms:o,extras:d,caller:s.closest("[data-bp-pagination]").hasClass("bottom")?"pag-bottom":"",page:i.getLinkParams(s.prop("href"),l)||1};i.objectRequest(p)},registerPopUp:function(){g(".popup-modal-register").length&&g(".popup-modal-register").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),g(".popup-modal-dismiss").length&&g(".popup-modal-dismiss").click(function(e){e.preventDefault(),g.magnificPopup.close()})},loginPopUp:function(){g(".popup-modal-login").length&&g(".popup-modal-login").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),g(".popup-modal-dismiss").length&&g(".popup-modal-dismiss").click(function(e){e.preventDefault(),g.magnificPopup.close()})},closePickersOnClick:function(e){var t=g(e.target);_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||t.closest(".post-emoji").length||t.is(".emojioneemoji,.emojibtn")||g(".emojionearea-button.active").removeClass("active")},closePickersOnEsc:function(e){"Escape"!==e.key&&27!==e.keyCode||_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||g(".emojionearea-button.active").removeClass("active")},lazyLoad:function(e){var t=g(e);if(t.length)for(var a=0;a<t.length;a++){var i=!1;try{g(t[a]).is(":in-viewport")&&(i=!0)}catch(e){console.error(e.message),!i&&t[a].getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)+window.scrollY&&(i=!0)}i&&t[a].getAttribute("data-src")&&(t[a].src=t[a].getAttribute("data-src"),t[a].removeAttribute("data-src"),g(t[a]).on("load",function(){g(this).removeClass("lazy")}),g(document).trigger("bp_nouveau_lazy_load",{element:t[a]}))}},coverPhotoCropper:function(e){var t,a,i,s,r;g(e.currentTarget).hasClass("position-change-cover-image")?(a=g(e.currentTarget),i=g(e.currentTarget).closest("#header-cover-image").height(),s=g(e.currentTarget).closest("#header-cover-image").width(),a.closest("#cover-image-container").find(".header-cover-reposition-wrap").show(),(t=g(".header-cover-reposition-wrap img")).guillotine({width:s,height:i,eventOnChange:"guillotinechange"}),t.guillotine("fit"),t.on("guillotinechange",function(e,t){a.closest("#cover-image-container").find(".header-cover-img").attr("data-top",-t.y)})):g(e.currentTarget).hasClass("cover-image-save")?((r=g(e.currentTarget).closest("#cover-image-container").find(".header-cover-img")).css({top:r.attr("data-top")+"px"}),r.attr("data-top",""),g(e.currentTarget).closest("#cover-image-container").find(".header-cover-reposition-wrap").hide()):g(e.currentTarget).hasClass("cover-image-cancel")&&(g(e.currentTarget).closest("#cover-image-container").find(".header-cover-reposition-wrap").hide(),g(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").attr("data-top","")),e.preventDefault()}},bp.Nouveau.start())}((bp,jQuery));