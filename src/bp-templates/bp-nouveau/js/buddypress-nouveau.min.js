window.wp=window.wp||{},window.bp=window.bp||{},function(e,t){"undefined"!=typeof BP_Nouveau&&(bp.Nouveau={start:function(){this.setupGlobals(),this.prepareDocument(),this.initObjects(),this.setHeartBeat(),this.addListeners(),this.switchGridList(),this.sendInvitesRevokeAccess(),this.sentInvitesFormValidate(),this.registerPopUp(),this.loginPopUp(),this.reportPopUp(),this.reportActions(),this.reportedPopup(),this.togglePassword(),this.enableSubmitOnLegalAgreement(),bp.Nouveau.lazyLoad(".lazy"),t(window).on("scroll resize",function(){bp.Nouveau.lazyLoad(".lazy")})},setupGlobals:function(){this.ajax_request=null,this.objects=t.map(BP_Nouveau.objects,function(e){return e}),this.objectNavParent=BP_Nouveau.object_nav_parent,this.heartbeat=wp.heartbeat||!1,this.querystring=this.getLinkParams()},prepareDocument:function(){if(t("body").hasClass("no-js")&&t("body").removeClass("no-js").addClass("js"),BP_Nouveau.warnings&&"undefined"!=typeof console&&console.warn&&t.each(BP_Nouveau.warnings,function(e,t){console.warn(t)}),t(".buddypress_object_nav .widget-title").length){var e=t(".buddypress_object_nav .widget-title").html();t("body").find('*:contains("'+e+'")').each(function(a,i){t(i).hasClass("widget-title")||e!==t(i).html()||t(i).is("a")||t(i).remove()})}},getStorage:function(e,t){var a=sessionStorage.getItem(e);return a=a?JSON.parse(a):{},void 0!==t?a[t]||!1:a},setStorage:function(e,t,a){var i=this.getStorage(e);return void 0===a&&void 0!==i[t]?delete i[t]:i[t]=a,sessionStorage.setItem(e,JSON.stringify(i)),null!==sessionStorage.getItem(e)},getLinkParams:function(e,t){var a;if(!(a=e?-1!==e.indexOf("?")?"?"+e.split("?")[1]:"":document.location.search))return null;var i=a.replace(/(^\?)/,"").split("&").map(function(e){return this[(e=e.split("="))[0]]=e[1],this}.bind({}))[0];return t?i[t]:i},urlDecode:function(e,t){var a=t||{amp:"&",lt:"<",gt:">",quot:'"',"#039":"'"};return decodeURIComponent(e.replace(/\+/g," ")).replace(/&([^;]+);/g,function(e,t){return a[t]||""})},ajax:function(e,a,i){this.ajax_request&&void 0===i&&this.ajax_request.abort();var o=t.extend({},bp.Nouveau.getStorage("bp-"+a),{nonce:BP_Nouveau.nonces[a]},e);return void 0!==BP_Nouveau.customizer_settings&&(o.customized=BP_Nouveau.customizer_settings),void 0!==BP_Nouveau.modbypass&&(o.modbypass=BP_Nouveau.modbypass),this.ajax_request=t.post(BP_Nouveau.ajaxurl,o,"json"),this.ajax_request},inject:function(e,a,i){t(e).length&&a&&("append"===(i=i||"reset")?t(e).append(a).find("li.activity-item").each(this.hideSingleUrl):"prepend"===i?t(e).prepend(a).find("li.activity-item").each(this.hideSingleUrl):t(e).html(a).find("li.activity-item").each(this.hideSingleUrl),"undefined"==typeof bp_mentions&&void 0===bp.mentions||t(".bp-suggestions").bp_mentions(bp.mentions.users))},hideSingleUrl:function(){var e=t(this).find(".activity-inner > p").removeAttr("br").removeAttr("a").text(),a="",i="",o="",r=0;if(0<=e.indexOf("http://")?(o=e.indexOf("http://"),r=1):0<=e.indexOf("https://")?(o=e.indexOf("https://"),r=1):0<=e.indexOf("www.")&&(o=e.indexOf("www"),r=1),1===r){for(var n=o;n<e.length&&(" "!==e[n]&&"\n"!==e[n]);n++)a+=e[n];""!==a&&(i=t.trim(e.replace(a,""))),0===t.trim(i).length&&0!==t(this).find("iframe").length&&""!==a&&t(this).find(".activity-inner > p:first").hide()}},objectRequest:function(e){var a,i=this;if((e=t.extend({object:"",scope:null,filter:null,target:"#buddypress [data-bp-list]",search_terms:"",page:1,extras:null,caller:null,template:null,method:"reset"},e)).object&&e.target)return"activity"==e.object&&"#buddypress [data-bp-list] ul.bp-list"==e.target&&(e.target="#buddypress [data-bp-list] ul.bp-list:not(#bb-media-model-container ul.bp-list)"),["members","activity","media","document"].includes(e.object)&&!t(this.objectNavParent+' [data-bp-scope="'+e.scope+'"]').length&&(e.scope="all"),e.search_terms&&(e.search_terms=e.search_terms.replace(/</g,"&lt;").replace(/>/g,"&gt;")),null!==e.scope&&(t('#buddypress [data-bp-list="'+e.object+'"]').length&&!_.isUndefined(t('#buddypress [data-bp-list="'+e.object+'"]').data("bp-follow"))?(e.scope=t('#buddypress [data-bp-list="'+e.object+'"]').data("bp-follow"),this.setStorage("bp-"+e.object,"scope",e.scope)):this.setStorage("bp-"+e.object,"scope",e.scope)),null!==e.filter&&this.setStorage("bp-"+e.object,"filter",e.filter),null!==e.extras&&this.setStorage("bp-"+e.object,"extras",e.extras),t(this.objectNavParent+" [data-bp-object]").each(function(){t(this).removeClass("selected loading")}),t(this.objectNavParent+' [data-bp-scope="'+e.scope+'"]').length?t(this.objectNavParent+' [data-bp-scope="'+e.scope+'"], #object-nav li.current').addClass("selected loading"):t(this.objectNavParent+" [data-bp-scope]:eq(0), #object-nav li.current").addClass("selected loading"),t('#buddypress [data-bp-filter="'+e.object+'"] option[value="'+e.filter+'"]').prop("selected",!0),"friends"===e.object||"group_members"===e.object?(e.template=e.object,e.object="members"):"group_requests"===e.object?(e.object="groups",e.template="group_requests"):"group_subgroups"===e.object?(e.object="groups",e.template="group_subgroups"):"notifications"===e.object?(e.object="members",e.template="member_notifications"):"members_following"!==e.object&&"members_followers"!==e.object||(e.object="members"),a=t.extend({action:e.object+"_filter"},e),this.ajax(a,e.object).done(function(a){if(!1!==a.success&&!_.isUndefined(a.data)){if(!t("body.group-members.members.buddypress").length||_.isUndefined(a.data)||_.isUndefined(a.data.count)||t("body.group-members.members.buddypress ul li#members-groups-li").find("span").text(a.data.count),t(i.objectNavParent+' [data-bp-scope="'+e.scope+'"]').removeClass("loading"),t(i.objectNavParent+' [data-bp-scope="'+e.scope+'"]').find("span").text(""),_.isUndefined(a.data)||_.isUndefined(a.data.count)||t(i.objectNavParent+' [data-bp-scope="'+e.scope+'"]').find("span").text(a.data.count),!_.isUndefined(a.data)&&!_.isUndefined(a.data.scopes))for(var o in a.data.scopes)t(i.objectNavParent+' [data-bp-scope="'+o+'"]').find("span").text(a.data.scopes[o]);if("reset"!==e.method)i.inject(e.target,a.data.contents,e.method),t(e.target).trigger("bp_ajax_"+e.method,t.extend(e,{response:a.data}));else if("pag-bottom"===e.caller){var r=null;r=t("#subnav").length?t("#subnav").parent():t(e.target),t("html,body").animate({scrollTop:r.offset().top},"slow",function(){t(e.target).fadeOut(100,function(){i.inject(this,a.data.contents,e.method),t(this).fadeIn(100),t(e.target).trigger("bp_ajax_request",t.extend(e,{response:a.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3)})})}else t(e.target).fadeOut(100,function(){i.inject(this,a.data.contents,e.method),t(this).fadeIn(100),t(e.target).trigger("bp_ajax_request",t.extend(e,{response:a.data})),bp.Nouveau.lazyLoad&&setTimeout(function(){bp.Nouveau.lazyLoad(".lazy")},1e3)});setTimeout(function(){i.reportPopUp(),i.reportedPopup()},1e3)}})},initObjects:function(){var e=this,a={},i={},o="all",r="",n=null,s=null;t.each(this.objects,function(d,l){if(!t('#buddypress [data-bp-list="'+l+'"][data-ajax="false"]').length){a=e.getStorage("bp-"+l);var c=window.location.hash.substr(1);void 0===c||"following"!=c&&"followers"!=c?void 0!==a.scope&&(o=a.scope):o=c,void 0!==a.extras&&"notifications"!==l&&(n=a.extras),t('#buddypress [data-bp-filter="'+l+'"]').length&&(void 0!==a.filter?(s=a.filter,t('#buddypress [data-bp-filter="'+l+'"] option[value="'+s+'"]').prop("selected",!0)):"-1"!==t('#buddypress [data-bp-filter="'+l+'"]').val()&&"0"!==t('#buddypress [data-bp-filter="'+l+'"]').val()&&(s=t('#buddypress [data-bp-filter="'+l+'"]').val())),t(this.objectNavParent+' [data-bp-object="'+l+'"]').length&&(t(this.objectNavParent+' [data-bp-object="'+l+'"]').each(function(){t(this).removeClass("selected")}),t(this.objectNavParent+' [data-bp-scope="'+l+'"], #object-nav li.current').addClass("selected")),null!==e.querystring&&(void 0!==e.querystring[l+"_search"]?r=e.querystring[l+"_search"]:void 0!==e.querystring.s&&(r=e.querystring.s),r&&t('#buddypress [data-bp-search="'+l+'"] input[type=search]').val(r)),t('#buddypress [data-bp-list="'+l+'"]').length&&(i={object:l,scope:o,filter:s,search_terms:r,extras:n},t('#buddypress [data-bp-member-type-filter="'+l+'"]').length?i.member_type_id=t('#buddypress [data-bp-member-type-filter="'+l+'"]').val():t('#buddypress [data-bp-group-type-filter="'+l+'"]').length&&(i.group_type=t('#buddypress [data-bp-group-type-filter="'+l+'"]').val()),e.objectRequest(i))}})},setHeartBeat:function(){void 0!==BP_Nouveau.pulse&&this.heartbeat&&(this.heartbeat.interval(Number(BP_Nouveau.pulse)),t.fn.extend({"heartbeat-send":function(){return this.bind("heartbeat-send")}}),t.fn.extend({"heartbeat-tick":function(){return this.bind("heartbeat-tick")}}))},addListeners:function(){t("[data-bp-disable-input]").on("change",this.toggleDisabledInput),t(this.objectNavParent+" .bp-navs").on("click","a",this,this.scopeQuery),t(document).on("change","#buddypress [data-bp-filter]",this,this.filterQuery),t(document).on("change","#buddypress [data-bp-group-type-filter]",this,this.typeGroupFilterQuery),t(document).on("change","#buddypress [data-bp-member-type-filter]",this,this.typeMemberFilterQuery),t("#buddypress [data-bp-search]").on("submit","form",this,this.searchQuery),t("#buddypress [data-bp-search] form").on("search","input[type=search]",this.resetSearch),t("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list").on("click","[data-bp-btn-action]",this,this.buttonAction),t("#buddypress [data-bp-list], #buddypress #item-header, #buddypress.bp-shortcode-wrap .dir-list").on("blur","[data-bp-btn-action]",this,this.buttonRevert),t(document).on("click","#buddypress table.invite-settings .field-actions .field-actions-remove, #buddypress table.invite-settings .field-actions-add",this,this.addRemoveInvite),t(document).on("keyup",this,this.keyUp),t("[data-bp-close]").on("click",this,this.closeNotice),t("#buddypress [data-bp-list]").on("click","[data-bp-pagination] a",this,this.paginateAction),t(document).on("click",this.closePickersOnClick),document.addEventListener("keydown",this.closePickersOnEsc),t(document).on("click","#item-header a.position-change-cover-image, .header-cover-reposition-wrap a.cover-image-save, .header-cover-reposition-wrap a.cover-image-cancel",this.coverPhotoCropper),t(document).on("click","#cover-photo-alert .bb-model-close-button",this.coverPhotoCropperAlert),t(document).on("click",this.toggleMoreOption.bind(this)),t(document).on("heartbeat-send",this.bbHeartbeatSend.bind(this)),t(document).on("heartbeat-tick",this.bbHeartbeatTick.bind(this)),bp.Nouveau.notificationRemovedAction(),bp.Nouveau.removeAllNotification(),bp.Nouveau.setTitle(),t(document).on("click",".more-following .count-more",this.bbWidgetMoreFollowing)},bbHeartbeatSend:function(e,a){a.onScreenNotifications=!0,t("#buddypress").trigger("bb_heartbeat_send",a)},bbHeartbeatTick:function(e,t){bp.Nouveau.bbInjectOnScreenNotifications(e,t)},bbInjectOnScreenNotifications:function(e,a){if("1"==t(".bb-onscreen-notification").data("enable")&&(void 0!==a.on_screen_notifications||""!==a.on_screen_notifications)){var i=t(".bb-onscreen-notification"),o=i.find(".notification-list"),r=o.data("removed-items"),n=o.data("animated-items"),s=[],d=t(t.parseHTML("<ul>"+a.on_screen_notifications+"</ul>"));t.each(r,function(e,t){var a=d.find("[data-notification-id="+t+"]");a.length&&a.closest(".read-item").remove()});var l=d.find(".read-item");l.each(function(e,a){var i=t(a).find(".actions .action-close").data("notification-id");"-1"==t.inArray(i,n)?(t(a).addClass("pull-animation"),n.push(i),s.push(i)):t(a).removeClass("pull-animation")}),s.length&&l.each(function(e,a){var i=t(a).find(".actions .action-close").data("notification-id");if("-1"==t.inArray(i,s)){t(a).removeClass("recent-item");var r=o.data("border-items");r.push(i),o.attr("data-border-items",JSON.stringify(r))}}),o.attr("data-animated-items",JSON.stringify(n)),l.length&&(i.removeClass("close-all-items"),l.eq(2).nextAll().addClass("bb-more-item"),l.length>3?o.addClass("bb-more-than-3"):o.removeClass("bb-more-than-3"),i.show(),o.empty().html(l),bp.Nouveau.visibilityOnScreenClearButton(),bp.Nouveau.notificationBorder(),bp.Nouveau.notificationAutoHide(),bp.Nouveau.browserTabFlashNotification(),bp.Nouveau.browserTabCountNotification())}},notificationBorder:function(){var e=t(".bb-onscreen-notification").find(".notification-list"),a=e.data("border-items");e.find(".read-item").each(function(e,i){var o=t(i).find(".actions .action-close").data("notification-id");"-1"==t.inArray(o,a)&&t(i).addClass("recent-item")}),e.attr("data-border-items",JSON.stringify(a))},browserTabCountNotification:function(){var e=t(".bb-onscreen-notification"),a=e.find(".notification-list").find(".read-item"),i=t("html").find("title"),o=e.data("title-tag");a.length>0?i.text("("+a.length+") "+o):i.text(o)},browserTabFlashNotification:function(){1==t(".bb-onscreen-notification").data("broser-tab")&&(window.bbFlashNotification&&clearInterval(window.bbFlashNotification),document.hidden&&(window.bbFlashNotification=setInterval(bp.Nouveau.flashTitle,2e3)))},flashTitle:function(){var e=t(".bb-onscreen-notification"),a=e.find(".notification-list"),i=a.find(".read-item"),o=i.first().find(".notification-content .bb-full-link a").text(),r=t("html").find("title"),n=e.attr("data-title-tag"),s=e.attr("data-flash-status"),d=a.data("flash-items");if(document.hidden||(i.each(function(e,a){var i=t(a).find(".actions .action-close").attr("data-notification-id");"-1"==t.inArray(i,d)&&d.push(i)}),a.attr("data-flash-items",JSON.stringify(d))),!document.hidden&&window.bbFlashNotification||i.length<=0)return clearInterval(window.bbFlashNotification),e.attr("data-flash-status","default_title"),void r.text(n);if("default_title"===s){r.text("("+i.length+") "+n);var l=i.first().find(".actions .action-close").attr("data-notification-id");"-1"==t.inArray(l,d)&&e.attr("data-flash-status","notification")}else"notification"===s&&(r.text(o),e.attr("data-flash-status","default_title"))},notificationAutoHide:function(){var e=t(".bb-onscreen-notification"),a=e.find(".notification-list"),i=a.data("auto-removed-items"),o=e.data("visibility");if("never"!==o){var r=parseInt(o);r<=0||(a.find(".read-item").each(function(e,o){var n=t(o).find(".actions .action-close").data("notification-id");"-1"==t.inArray(n,i)&&(i.push(n),setTimeout(function(){a.find(".actions .action-close[data-notification-id="+n+"]").length&&a.find(".actions .action-close[data-notification-id="+n+"]").trigger("click")},1e3*r))}),a.attr("data-auto-removed-items",JSON.stringify(i)))}},notificationRemovedAction:function(){t(".bb-onscreen-notification .notification-list").on("click",".action-close",function(e){e.preventDefault(),bp.Nouveau.removeOnScreenNotification(this)})},removeOnScreenNotification:function(e){var a=t(e).closest(".notification-list"),i=t(e).closest(".read-item"),o=t(e).data("notification-id"),r=a.data("removed-items");i.addClass("close-item"),setTimeout(function(){r.push(o),a.attr("data-removed-items",JSON.stringify(r)),i.remove(),bp.Nouveau.browserTabCountNotification(),bp.Nouveau.visibilityOnScreenClearButton();var e=a.find(".read-item");e.length?(e.length<4&&a.removeClass("bb-more-than-3"),e.slice(0,3).removeClass("bb-more-item")):a.closest(".bb-onscreen-notification").hide()},500)},removeAllNotification:function(){t(".bb-onscreen-notification .bb-remove-all-notification").on("click",".action-close",function(e){e.preventDefault();var a=t(this).closest(".bb-onscreen-notification").find(".notification-list"),i=a.find(".read-item"),o=a.data("removed-items");i.each(function(e,a){var i=t(a).find(".actions .action-close").data("notification-id");i&&o.push(i)}),a.attr("data-removed-items",JSON.stringify(o)),i.remove(),bp.Nouveau.browserTabCountNotification(),bp.Nouveau.visibilityOnScreenClearButton(),a.closest(".bb-onscreen-notification").addClass("close-all-items"),t(".bb-onscreen-notification").fadeOut(200),a.removeClass("bb-more-than-3")})},setTitle:function(){var e=t("html").find("title").text();t(".bb-onscreen-notification").attr("data-title-tag",e)},visibilityOnScreenClearButton:function(){var e=t(".bb-onscreen-notification");e.find(".notification-list").find(".read-item").length>1?(e.removeClass("single-notification"),e.addClass("active-button"),e.find(".bb-remove-all-notification .action-close").fadeIn(600)):(e.addClass("single-notification"),e.removeClass("active-button"),e.find(".bb-remove-all-notification .action-close").fadeOut(200))},switchGridList:function(){var e=this,a=!1,i=t(".grid-filters").data("object");"group_members"===i&&(a=!0),"friends"===i?i="members":"group_requests"===i?i="groups":"notifications"===i&&(i="members");var o=e.getStorage("bp-"+i),r={};void 0!==o.extras&&void 0!==(r=o.extras).layout&&(t(".grid-filters .layout-view").removeClass("active"),"list"===r.layout?t(".grid-filters .layout-list-view").addClass("active"):t(".grid-filters .layout-grid-view").addClass("active")),t(document).on("click",".grid-filters .layout-view",function(o){o.preventDefault(),t(this).hasClass("layout-list-view")?(t(".layout-grid-view").removeClass("active"),t(this).addClass("active"),t(".bp-list").removeClass("grid"),r.layout="list"):(t(".layout-list-view").removeClass("active"),t(this).addClass("active"),t(".bp-list").addClass("grid"),r.layout="grid"),a?e.setStorage("bp-group_members","extras",r):e.setStorage("bp-"+i,"extras",r)})},sentInvitesFormValidate:function(){t("body.send-invites #send-invite-form #member-invites-table").length&&t("body.send-invites #send-invite-form").submit(function(){var e,a,i,o="",r="",n="",s=[],d=[],l="",c="",p="",b="",u=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,f=t("body.send-invites #send-invite-form #error-message-empty-name-field").val(),m=t("body.send-invites #send-invite-form #error-message-invalid-email-address-field").val();if(e=t("body.send-invites #send-invite-form #error-message-required-field").val(),i=t("body.send-invites #send-invite-form #error-message-empty-subject-field").length,a=t("body.send-invites #send-invite-form #error-message-empty-body-field").length,1===i&&(l=t("body.send-invites #send-invite-form #bp-member-invites-custom-subject").val(),c=t("body.send-invites #send-invite-form #error-message-empty-subject-field").val()),1===a&&(p=tinyMCE.get("bp-member-invites-custom-content").getContent(),b=t("body.send-invites #send-invite-form #error-message-empty-body-field").val()),1===i&&1===a){var v=t("body.send-invites #send-invite-form #error-message-empty-subject-body-field").val();if(""===l&&""===p){if(!confirm(v))return!1}else if(""!==l&&""===p){if(!confirm(b))return!1}else if(""===l&&""!==p&&!confirm(c))return!1}else if(0===i&&1===a){if(""===p&&!confirm(b))return!1}else if(1===i&&0===a&&""===l&&!confirm(c))return!1;if(t("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){t(this).find('input[type="text"]').removeAttr("style"),t(this).find('input[type="email"]').removeAttr("style")}),t("body.send-invites #send-invite-form #member-invites-table > tbody  > tr").each(function(){o=t.trim(t(this).find('input[type="text"]').val()),r=t(this).find("input").attr("id"),n=t.trim(t(this).find('input[type="email"]').val()),""===o&&""===n?!1:""!==o&&""===n?(r=t(this).find('input[type="email"]').attr("id"),!0,s.push(r)):""===o&&""!==n?(r=t(this).find('input[type="text"]').attr("id"),!0,s.push(r)):u.test(n)?(!1,d.push(1)):(r=t(this).find('input[type="email"]').attr("id"),!0,s.push(r))}),t(".span_error").remove(),0!==s.length)return s.forEach(function(e){t("#"+e).attr("style","border:1px solid #ef3e46"),-1!==e.indexOf("email_")?t("#"+e).after('<span class="span_error" style="color:#ef3e46">'+m+"</span>"):t("#"+e).after('<span class="span_error" style="color:#ef3e46">'+f+"</span>")}),t("html, body").animate({scrollTop:t("#item-body").offset().top},2e3),alert(e),!1;if(t("#email_0_email_error").length&&t("#email_0_email_error").remove(),0===d.length){var h=t("#invitee_0_title").val(),g=t("#email_0_email").val();return""===h&&""===g?(t("#invitee_0_title").attr("style","border:1px solid #ef3e46"),t("#invitee_0_title").focus(),t("#email_0_email").attr("style","border:1px solid #ef3e46"),!1):""!==h&&""===g?(t("#email_0_email").attr("style","border:1px solid #ef3e46"),t("#email_0_email").focus(),!1):(u.test(g)||(t("#email_0_email").attr("style","border:1px solid #ef3e46"),t("#email_0_email").focus(),t("#email_0_email_error").remove(),t("#email_0_email").after('<span id="email_0_email_error" style="color:#ef3e46">'+m+"</span>")),alert(e),!1)}})},sendInvitesRevokeAccess:function(){t("body.sent-invites #member-invites-table").length&&t("body.sent-invites #member-invites-table tr td span a.revoked-access").click(function(e){e.preventDefault();var a=t(this).attr("data-name"),i=t(this).attr("id"),o=t(this).attr("data-revoke-access");if(!confirm(a))return!1;t.ajax({url:o,type:"post",data:{item_id:i},success:function(){window.location.reload(!0)}})})},toggleDisabledInput:function(){var e=t(this).attr("data-bp-disable-input");t(e).prop("disabled",!0)&&!t(this).hasClass("enabled")?(t(this).addClass("enabled").removeClass("disabled"),t(e).prop("disabled",!1)):t(e).prop("disabled",!1)&&t(this).hasClass("enabled")&&(t(this).removeClass("enabled").addClass("disabled"),t(e).attr("disabled","disabled"))},keyUp:function(e){var t=e.data;27===e.keyCode&&t.buttonRevertAll()},scopeQuery:function(e){var a,i,o,r=e.data,n=t(e.currentTarget).parent(),s="",d=null,l={};if(n.hasClass("no-ajax")||t(e.currentTarget).hasClass("no-ajax")||!n.attr("data-bp-scope"))return e;if(a=n.data("bp-scope"),i=n.data("bp-object"),!a||!i)return e;e.preventDefault();var c=r.getStorage("bp-"+i);void 0!==c.extras&&"notifications"!==i&&(d=c.extras),o=t("#buddypress").find('[data-bp-filter="'+i+'"]').first().val(),t('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(s=t('#buddypress [data-bp-search="'+i+'"] input[type=search]').val()),n.hasClass("dynamic")&&n.find("a span").html(""),l={object:i,scope:a,filter:o,search_terms:s,page:1,extras:d},t('#buddypress [data-bp-member-type-filter="'+i+'"]').length?l.member_type_id=t('#buddypress [data-bp-member-type-filter="'+i+'"]').val():t('#buddypress [data-bp-group-type-filter="'+i+'"]').length&&(l.group_type=t('#buddypress [data-bp-group-type-filter="'+i+'"]').val()),r.objectRequest(l)},filterQuery:function(e){var a=e.data,i=t(e.target).data("bp-filter"),o="all",r=t(e.target).val(),n="",s=!1;if(!i)return e;t(a.objectNavParent+" [data-bp-object].selected").length&&(o=t(a.objectNavParent+" [data-bp-object].selected").data("bp-scope")),t('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(n=t('#buddypress [data-bp-search="'+i+'"] input[type=search]').val()),"friends"===i&&(i="members");var d=a.getStorage("bp-"+i);void 0!==d.extras&&"notifications"!==i&&(s=d.extras),"members"===i?a.objectRequest({object:i,scope:o,filter:r,search_terms:n,page:1,extras:s,template:null,member_type_id:t('#buddypress [data-bp-member-type-filter="'+i+'"]').val()}):"groups"===i?a.objectRequest({object:i,scope:o,filter:r,search_terms:n,page:1,extras:s,template:null,group_type:t('#buddypress [data-bp-group-type-filter="'+i+'"]').val()}):a.objectRequest({object:i,scope:o,filter:r,search_terms:n,page:1,extras:s,template:null})},typeGroupFilterQuery:function(e){var a,i=e.data,o=t(e.target).data("bp-group-type-filter"),r="all",n=null,s=null,d="";if(!o)return e;void 0!==(a=i.getStorage("bp-"+o)).extras&&"notifications"!==o&&(s=a.extras),t('#buddypress [data-bp-filter="'+o+'"]').length&&(void 0!==a.filter?(n=a.filter,t('#buddypress [data-bp-filter="'+o+'"] option[value="'+n+'"]').prop("selected",!0)):"-1"!==t('#buddypress [data-bp-filter="'+o+'"]').val()&&"0"!==t('#buddypress [data-bp-filter="'+o+'"]').val()&&(n=t('#buddypress [data-bp-filter="'+o+'"]').val())),t(i.objectNavParent+" [data-bp-object].selected").length&&(r=t(i.objectNavParent+" [data-bp-object].selected").data("bp-scope")),t('#buddypress [data-bp-search="'+o+'"] input[type=search]').length&&(d=t('#buddypress [data-bp-search="'+o+'"] input[type=search]').val()),i.objectRequest({object:o,scope:r,filter:n,search_terms:d,page:1,template:null,extras:s,group_type:t('#buddypress [data-bp-group-type-filter="'+o+'"]').val()})},typeMemberFilterQuery:function(e){var a,i=e.data,o=t(e.target).data("bp-member-type-filter"),r="all",n=null,s=null,d="",l=t(e.target).data("bp-member-type-object");if(!o)return e;"friends"===o&&(o="members"),"followers"!==l&&"following"!==l||(o=o+"_"+l),void 0!==(a=i.getStorage("bp-"+o)).extras&&"notifications"!==o&&(s=a.extras),t('#buddypress [data-bp-filter="'+o+'"]').length&&(void 0!==a.filter?(n=a.filter,t('#buddypress [data-bp-filter="'+o+'"] option[value="'+n+'"]').prop("selected",!0)):"-1"!==t('#buddypress [data-bp-filter="'+o+'"]').val()&&"0"!==t('#buddypress [data-bp-filter="'+o+'"]').val()&&(n=t('#buddypress [data-bp-filter="'+o+'"]').val())),t(i.objectNavParent+" [data-bp-object].selected").length&&(r=t(i.objectNavParent+" [data-bp-object].selected").data("bp-scope")),t('#buddypress [data-bp-search="'+o+'"] input[type=search]').length&&(d=t('#buddypress [data-bp-search="'+o+'"] input[type=search]').val()),"followers"!==l&&"following"!==l||(r=l),i.objectRequest({object:o,scope:r,filter:n,search_terms:d,page:1,template:null,extras:s,member_type_id:t('#buddypress [data-bp-member-type-filter="'+o+'"]').val()})},searchQuery:function(e){var a,i,o,r=e.data,n="all",s=!1;if(t(e.delegateTarget).hasClass("no-ajax")||void 0===t(e.delegateTarget).data("bp-search"))return e;e.preventDefault(),a=t(e.delegateTarget).data("bp-search"),i=t("#buddypress").find('[data-bp-filter="'+a+'"]').first().val(),o=t(e.delegateTarget).find("input[type=search]").first().val(),t(r.objectNavParent+" [data-bp-object]").length&&(n=t(r.objectNavParent+' [data-bp-object="'+a+'"].selected').data("bp-scope"));var d=r.getStorage("bp-"+a);void 0!==d.extras&&"notifications"!==a&&(s=d.extras),r.objectRequest({object:a,scope:n,filter:i,search_terms:o,page:1,extras:s,template:null})},showSearchSubmit:function(e){t(e.delegateTarget).find("[type=submit]").addClass("bp-show"),t("[type=submit]").hasClass("bp-hide")&&t("[type=submit]").removeClass("bp-hide")},resetSearch:function(e){t(e.target).val()?t(e.delegateTarget).find("[type=submit]").show():t(e.delegateTarget).submit()},buttonAction:function(e){var a=e.data,i=t(e.currentTarget),o=i.data("bp-btn-action"),r=i.data("bp-nonce"),n=i.closest("[data-bp-item-id]"),s=n.data("bp-item-id"),d=i.closest(".list-wrap"),l=n.data("bp-item-component"),c="";if(!o||!s||!l)return e;if(e.preventDefault(),i.hasClass("bp-toggle-action-button"))return t(document.body).hasClass("buddyboss-theme")&&void 0!==i.data("balloon")?i.attr("data-balloon",i.data("title")):i.text(i.data("title")),i.removeClass("bp-toggle-action-button"),i.addClass("bp-toggle-action-button-clicked"),!1;if(void 0!==i.data("only-admin"))return void 0!==BP_Nouveau.only_admin_notice&&window.alert(BP_Nouveau.only_admin_notice),!1;if(void 0!==BP_Nouveau[o+"_confirm"]&&!1===window.confirm(BP_Nouveau[o+"_confirm"])||i.hasClass("pending"))return!1;c=r?a.getLinkParams(r,"_wpnonce"):a.getLinkParams(i.prop("href"),"_wpnonce");var p={is_friend:"remove_friend",not_friends:"add_friend",pending:"withdraw_friendship",accept_friendship:"accept_friendship",reject_friendship:"reject_friendship"};"members"===l&&void 0!==p[o]&&(o=p[o],l="friends");var b={not_following:"follow",following:"unfollow"};"members"===l&&void 0!==b[o]&&(o=b[o],l="follow"),i.addClass("pending loading"),a.ajax({action:l+"_"+o,item_id:s,_wpnonce:c},l,!0).done(function(e){if(!1===e.success)d.prepend(e.data.feedback),i.removeClass("pending loading"),n.find(".bp-feedback").length?(n.find(".bp-feedback").show(),n.find(".bp-feedback").fadeOut(6e3)):"groups"===l&&"join_group"===o&&(n.append(e.data.feedback),n.find(".bp-feedback").fadeOut(6e3));else{if("groups"===l&&void 0!==e.data.is_group&&e.data.is_group)return void 0!==e.data.group_url&&e.data.group_url?window.location=e.data.group_url:window.location.reload();if(t("#friends-personal-li").length){var r=t("#friends-personal-li a span"),s=t("#friends-personal-li a");void 0!==e.data.is_user&&e.data.is_user&&void 0!==e.data.friend_count?e.data.friend_count>0?r.length?t(r).html(e.data.friend_count):t(s).append('<span class="count">'+e.data.friend_count+"</span>"):t(r).hide():void 0!==e.data.friend_count&&(e.data.friend_count>0?r.length?t(r).html(e.data.friend_count):t(s).append('<span class="count">'+e.data.friend_count+"</span>"):t(r).hide())}if(void 0!==e.data.is_user&&e.data.is_user)return i.parent().html(e.data.feedback),void n.fadeOut(1500);if(void 0!==e.data.is_user&&!e.data.is_user&&void 0!==e.data.group_url&&e.data.group_url)return window.location=e.data.group_url;if(t(a.objectNavParent+' [data-bp-scope="personal"]').length){var c=Number(t(a.objectNavParent+' [data-bp-scope="personal"] span').html())||0;-1!==t.inArray(o,["leave_group","remove_friend"])?c-=1:-1!==t.inArray(o,["join_group"])&&(c+=1),c<0&&(c=0),t(a.objectNavParent+' [data-bp-scope="personal"] span').html(c)}i.parent().replaceWith(e.data.contents)}})},buttonRevert:function(e){var a=t(e.currentTarget);a.hasClass("bp-toggle-action-button-clicked")&&!a.hasClass("loading")&&(t(document.body).hasClass("buddyboss-theme")&&void 0!==a.data("balloon")?a.attr("data-balloon",a.data("title-displayed")):a.text(a.data("title-displayed")),a.removeClass("bp-toggle-action-button-clicked"),a.addClass("bp-toggle-action-button"))},buttonRevertAll:function(){t.each(t("#buddypress [data-bp-btn-action]"),function(){t(this).hasClass("bp-toggle-action-button-clicked")&&!t(this).hasClass("loading")&&(t(document.body).hasClass("buddyboss-theme")&&void 0!==t(this).data("balloon")?t(this).attr("data-balloon",t(this).data("title-displayed")):t(this).text(t(this).data("title-displayed")),t(this).removeClass("bp-toggle-action-button-clicked"),t(this).addClass("bp-toggle-action-button"),t(this).trigger("blur"))})},addRemoveInvite:function(e){var a=e.currentTarget,i=t(a).closest("tbody");if(t(a).hasClass("field-actions-remove")){if(!(t(this).closest("tr").siblings().length>1))return;t(this).closest("tr").remove(),i.find(".field-actions-add.disabled").removeClass("disabled")}else if(t(a).hasClass("field-actions-add")){if(t(a).hasClass("disabled"))return;var o=t(this).closest("tr").prev("tr").html();t("<tr>"+o+"</tr>").insertBefore(t(this).closest("tr")),i.find("tr").length>20&&t(a).addClass("disabled")}var r=i.find("tr:not(:last-child)");t.each(r,function(e){t(this).find(".field-name > input").attr("name","invitee["+e+"][]"),t(this).find(".field-name > input").attr("id","invitee_"+e+"_title"),t(this).find(".field-email > input").attr("name","email["+e+"][]"),t(this).find(".field-email > input").attr("id","email_"+e+"_email"),t(this).find(".field-member-type > select").attr("name","member-type["+e+"][]"),t(this).find(".field-member-type > select").attr("id","member_type_"+e+"_member_type")})},closeNotice:function(e){var a=t(e.currentTarget);e.preventDefault(),"clear"===a.data("bp-close")&&(void 0!==t.cookie("bp-message")&&t.removeCookie("bp-message"),void 0!==t.cookie("bp-message-type")&&t.removeCookie("bp-message-type")),a.closest(".bp-feedback").hasClass("bp-sitewide-notice")&&bp.Nouveau.ajax({action:"messages_dismiss_sitewide_notice"},"messages"),a.closest(".bp-feedback").remove()},paginateAction:function(e){var a,i,o,r=e.data,n=t(e.currentTarget),s=null,d=null,l=null,c=null;if(null===(a=n.closest("[data-bp-pagination]").data("bp-pagination")||null))return e;e.preventDefault(),null!==(i=t(e.delegateTarget).data("bp-list")||null)&&(void 0!==(o=r.getStorage("bp-"+i)).scope&&(s=o.scope),void 0!==o.filter&&(d=o.filter),void 0!==o.extras&&(c=o.extras)),null!==i&&(void 0!==(o=r.getStorage("bp-"+i)).scope&&(s=o.scope),void 0!==o.filter&&(d=o.filter),void 0!==o.extras&&(c=o.extras)),t('#buddypress [data-bp-search="'+i+'"] input[type=search]').length&&(l=t('#buddypress [data-bp-search="'+i+'"] input[type=search]').val());var p={object:i,scope:s,filter:d,search_terms:l,extras:c,caller:n.closest("[data-bp-pagination]").hasClass("bottom")?"pag-bottom":"",page:r.getLinkParams(n.prop("href"),a)||1};t("#buddypress [data-bp-group-type-filter]").length&&(p.group_type=t("#buddypress [data-bp-group-type-filter]").val()),t("#buddypress [data-bp-member-type-filter]").length&&(p.member_type_id=t("#buddypress [data-bp-member-type-filter]").val()),r.objectRequest(p)},enableSubmitOnLegalAgreement:function(){t("body #buddypress #register-page #signup-form #legal_agreement").length&&(t("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!0),t(document).on("change","body #buddypress #register-page #signup-form #legal_agreement",function(){t(this).prop("checked")?t("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!1):t("body #buddypress #register-page #signup-form .submit #signup_submit").prop("disabled",!0)}))},registerPopUp:function(){t(".popup-modal-register").length&&t(".popup-modal-register").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),t(".popup-modal-dismiss").length&&t(".popup-modal-dismiss").click(function(e){e.preventDefault(),t.magnificPopup.close()})},loginPopUp:function(){t(".popup-modal-login").length&&t(".popup-modal-login").magnificPopup({type:"inline",preloader:!1,fixedBgPos:!0,fixedContentPos:!0}),t(".popup-modal-dismiss").length&&t(".popup-modal-dismiss").click(function(e){e.preventDefault(),t.magnificPopup.close()})},reportPopUp:function(){if(t(".report-content, .block-member").length>0){var e=this;t(".report-content, .block-member").magnificPopup({type:"inline",midClick:!0,callbacks:{open:function(){var a=this.currItem.el.data("bp-content-id"),i=this.currItem.el.data("bp-content-type"),o=this.currItem.el.data("bp-nonce"),r=this.currItem.el.attr("reported_type");void 0!==r&&t("#content-report").find(".bp-reported-type").text(r);void 0!==a&&void 0!==i&&void 0!==o&&(t(document).find(".bp-report-form-err").empty(),e.setFormValues({contentId:a,contentType:i,nonce:o}))}}})}},reportActions:function(){var e=this;t(document).on("click",".bb-cancel-report-content",function(e){e.preventDefault(),t("form#bb-report-content").trigger("reset"),t(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").addClass("bp-hide"),t(this).closest(".moderation-popup").find(".mfp-close").trigger("click")}),t(document).on("click","input[type=radio][name=report_category]",function(){"other"===this.value?(t(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").removeClass("bp-hide"),t(this).closest(".moderation-popup").find(".bp-other-report-cat").prop("required",!0)):(t(this).closest(".moderation-popup").find(".bp-other-report-cat").closest(".form-item").addClass("bp-hide"),t(this).closest(".moderation-popup").find(".bp-other-report-cat").prop("required",!1))}),t("#bb-report-content").submit(function(a){t("#bb-report-content").find(".report-submit").addClass("loading"),t(".bp-report-form-err").empty();var i={action:"bp_moderation_content_report"};t.each(t(this).serializeArray(),function(e,t){i[t.name]=t.value}),t.post(BP_Nouveau.ajaxurl,i,function(i){i.success?(e.resetReportPopup(),e.changeReportButtonStatus(i.data),t("#bb-report-content").find(".report-submit").removeClass("loading"),t(".mfp-close").trigger("click")):(t("#bb-report-content").find(".report-submit").removeClass("loading"),e.handleReportError(i.data.message.errors,a.currentTarget))})}),t("#bb-block-member").submit(function(a){t("#bb-block-member").find(".report-submit").addClass("loading"),t(".bp-report-form-err").empty();var i={action:"bp_moderation_block_member"};t.each(t(this).serializeArray(),function(e,t){i[t.name]=t.value}),t.post(BP_Nouveau.ajaxurl,i,function(i){i.success?(e.resetReportPopup(),e.changeReportButtonStatus(i.data),t("#bb-block-member").find(".report-submit").removeClass("loading"),t(".mfp-close").trigger("click"),i.data.redirect&&(location.href=i.data.redirect)):(t("#bb-block-member").find(".report-submit").removeClass("loading"),e.handleReportError(i.data.message.errors,a.currentTarget))})})},resetReportPopup:function(){t("form#bb-report-content").trigger("reset");var e=t(".mfp-content");e.find(".bp-content-id").val(""),e.find(".bp-content-type").val(""),e.find(".bp-nonce").val(""),e.find(".bp-report-form-err").empty()},changeReportButtonStatus:function(e){var a=this;t("[data-bp-content-id="+e.button.button_attr.item_id+"][data-bp-content-type="+e.button.button_attr.item_type+"]").each(function(){t(this).removeAttr("data-bp-content-id"),t(this).removeAttr("data-bp-content-type"),t(this).removeAttr("data-bp-nonce"),t(this).html(e.button.link_text),t(this).attr("class",e.button.button_attr.class),t(this).attr("reported_type",e.button.button_attr.reported_type),t(this).attr("href",e.button.button_attr.href),setTimeout(function(){a.reportedPopup()},1)})},reportedPopup:function(){t(".reported-content").length>0&&t(".reported-content").magnificPopup({type:"inline",midClick:!0,callbacks:{open:function(){var e=this.currItem.el.attr("reported_type");void 0!==e&&t("#reported-content").find(".bp-reported-type").text(e)}}})},handleReportError:function(e,t){var a="";e.bp_moderation_missing_data?a=e.bp_moderation_missing_data:e.bp_moderation_already_reported?a=e.bp_moderation_already_reported:e.bp_moderation_missing_error?a=e.bp_moderation_missing_error:e.bp_moderation_invalid_access?a=e.bp_moderation_invalid_access:e.bp_moderation_invalid_item_id&&(a=e.bp_moderation_invalid_item_id),jQuery(t).closest(".bb-report-type-wrp").find(".bp-report-form-err").html(a)},setFormValues:function(e){var a=t(".mfp-content");a.find(".bp-content-id").val(e.contentId),a.find(".bp-content-type").val(e.contentType),a.find(".bp-nonce").val(e.nonce)},togglePassword:function(){t(document).on("click",".bb-toggle-password",function(e){e.preventDefault();var a=t(this),i=a.next("input");a.toggleClass("bb-show-pass"),a.hasClass("bb-show-pass")?i.attr("type","text"):i.attr("type","password")})},closePickersOnClick:function(e){var a=t(e.target);_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||a.closest(".post-emoji").length||a.is(".emojioneemoji,.emojibtn")||t(".emojionearea-button.active").removeClass("active")},closePickersOnEsc:function(e){"Escape"!==e.key&&27!==e.keyCode||_.isUndefined(BP_Nouveau.media)||_.isUndefined(BP_Nouveau.media.emoji)||t(".emojionearea-button.active").removeClass("active")},lazyLoad:function(e){var a=t(e);if(a.length)for(var i=0;i<a.length;i++){var o=!1;try{t(a[i]).is(":in-viewport")&&(o=!0)}catch(e){console.error(e.message),!o&&a[i].getBoundingClientRect().top<=(window.innerHeight||document.documentElement.clientHeight)+window.scrollY&&(o=!0)}o&&a[i].getAttribute("data-src")&&(a[i].src=a[i].getAttribute("data-src"),a[i].removeAttribute("data-src"),t(a[i]).on("load",function(){t(this).removeClass("lazy")}),t(document).trigger("bp_nouveau_lazy_load",{element:a[i]}))}},coverPhotoCropper:function(e){var a,i,o,r,n;if(t(e.currentTarget).hasClass("position-change-cover-image")){var s=t(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").height(),d=(s-t(e.currentTarget).closest("#header-cover-image").height())/2,l=t(e.currentTarget);if(s<=l.closest("#header-cover-image").height())return t("body").append('<div id="cover-photo-alert" style="display: block;" class="open-popup"><transition name="modal"><div class="modal-mask bb-white bbm-model-wrap"><div class="modal-wrapper"><div id="boss-media-create-album-popup" class="modal-container has-folderlocationUI"><header class="bb-model-header"><h4>'+BP_Nouveau.media.cover_photo_size_error_header+'</h4><a class="bb-model-close-button" id="bp-media-create-folder-close" href="#"><span class="dashicons dashicons-no-alt"></span></a></header><div class="bb-field-wrap"><p>'+BP_Nouveau.media.cover_photo_size_error_description+"</p></div></div></div></div></transition></div>"),void e.preventDefault();i=t(e.currentTarget).closest("#header-cover-image").height(),o=t(e.currentTarget).closest("#header-cover-image").width(),r=Number(t(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").css("top").replace("px","")),n=t(e.currentTarget).closest("#header-cover-image").width()/t(e.currentTarget).closest("#header-cover-image").find(".header-cover-reposition-wrap img")[0].width,l.closest("#cover-image-container").find(".header-cover-reposition-wrap").show(),(a=t(".header-cover-reposition-wrap img")).guillotine({width:o,height:i,eventOnChange:"guillotinechange",init:{scale:n,y:r&&t(e.currentTarget).closest("#header-cover-image").hasClass("has-position")?-r:d,w:o,h:i}}),a.on("guillotinechange",function(e,t){l.closest("#cover-image-container").find(".header-cover-img").attr("data-top",-t.y)})}else if(t(e.currentTarget).hasClass("cover-image-save")){var c=t(e.currentTarget),p=t(e.currentTarget).closest("#cover-image-container").find(".header-cover-img");c.addClass("loading"),t.post(BP_Nouveau.ajaxurl,{action:"save_cover_position",position:p.attr("data-top")}).done(function(e){e.success&&e.data&&""!==e.data.content?(c.removeClass("loading"),c.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide(),c.closest("#header-cover-image:not(.has-position)").addClass("has-position"),p.css({top:e.data.content+"px"})):(c.removeClass("loading"),c.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide())}).fail(function(){c.removeClass("loading"),c.closest("#cover-image-container").find(".header-cover-reposition-wrap").hide()})}else t(e.currentTarget).hasClass("cover-image-cancel")&&((a=t(".header-cover-reposition-wrap img")).guillotine({width:0,height:0,init:{scale:1,y:0,w:0,h:0}}),a.guillotine("remove"),t(e.currentTarget).closest("#cover-image-container").find(".header-cover-reposition-wrap").hide(),t(e.currentTarget).closest("#cover-image-container").find(".header-cover-img").attr("data-top",""));e.preventDefault()},coverPhotoCropperAlert:function(e){e.preventDefault(),t("#cover-photo-alert").remove()},toggleMoreOption:function(e){t(e.target).hasClass("bb_more_options_action")||t(e.target).parent().hasClass("bb_more_options_action")?(e.preventDefault(),t(e.target).closest(".bb_more_options").find(".bb_more_options_list").hasClass("is_visible")?t(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible"):(t(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible"),t(e.target).closest(".bb_more_options").find(".bb_more_options_list").addClass("is_visible"))):t(".bb_more_options").find(".bb_more_options_list").removeClass("is_visible")},getVideoThumb:function(e,a){var i=new FileReader;if(i.onload=function(){var o=new Blob([i.result],{type:e.type}),r=URL.createObjectURL(o),n=document.createElement("video"),s=null;n.src=r;var d=setInterval(function(){if(n.readyState>0){s=n.duration.toFixed(2);var i=function(){o()&&(n.removeEventListener("timeupdate",i),n.pause())};n.addEventListener("loadeddata",function(){o()&&n.removeEventListener("timeupdate",i)});var o=function(){var i=document.createElement("canvas");i.width=n.videoWidth,i.height=n.videoHeight,i.getContext("2d").drawImage(n,0,0,i.width,i.height);var o=i.toDataURL(),s=o.length>1e5;if(s){var d=document.createElement("img");d.src=o,e.previewElement?(t(e.previewElement).find(a).find("img").length?t(e.previewElement).find(a).find("img").attr("src",o):t(e.previewElement).find(a).append(d),t(e.previewElement).closest(".dz-preview").addClass("dz-has-thumbnail")):t(a).find("img").length?t(a).find("img").attr("src",o):t(a).append(d),URL.revokeObjectURL(r)}return s};n.addEventListener("timeupdate",i),n.preload="metadata",n.src=r,n.muted=!0,n.playsInline=!0,null!=s&&(n.currentTime=Math.floor(Math.random()*Math.floor(s))),n.play(),clearInterval(d)}},500)},e.dataURL){var o=new XMLHttpRequest;o.open("GET",e.dataURL,!0),o.responseType="blob",o.onload=function(){if(200==this.status){var e=this.response;i.readAsArrayBuffer(e)}},o.send()}else i.readAsArrayBuffer(e)},bbWidgetMoreFollowing:function(e){var a=t(e.currentTarget).attr("href").split("#");if(a.length>1){var i=a.pop();if(i&&t('[data-bp-scope="'+i+'"]').length>0)return t('[data-bp-scope="'+i+'"] a').trigger("click"),!1}}},bp.Nouveau.start())}(bp,jQuery);