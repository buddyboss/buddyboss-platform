function bp_ps_clear_form_elements(e){var a=jQuery(e).closest("form"),t=new Event("change");a.find(":input").each(function(){switch(this.type){case"password":case"select-multiple":case"select-one":case"text":case"email":case"date":case"url":case"search":case"textarea":jQuery(this).val("");break;case"checkbox":case"radio":this.checked=!1,this.dispatchEvent(t)}}),jQuery.removeCookie("bp_ps_request",{path:"/"}),a.find(".submit").trigger("click")}jQuery(document).ready(function(i){function n(){var o,r=[];"1"==BP_SEARCH.enable_ajax_search&&(o=i(document).height(),i(BP_SEARCH.autocomplete_selector).each(function(){var e,a,t,n,s=i(this),c=s.find('input[name="s"], input[type=search]');0<c.length&&(e={},t=(a=c.offset()).top+c.outerHeight(),(n=o-t)<400&&a.top>n&&(e={collision:"flip flip"}),r.push(c),i(c).autocomplete({source:function(e,a){var t,n=e.term;n in BP_SEARCH.cache?a(BP_SEARCH.cache[n]):(t={action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,search_term:e.term,per_page:BP_SEARCH.per_page},a({value:'<div class="loading-msg"><span class="bb_global_search_spinner"></span>'+BP_SEARCH.loading_msg+"</div>"}),i.ajax({url:BP_SEARCH.ajaxurl,dataType:"json",data:t,success:function(e){BP_SEARCH.cache[n]=e,a(e)}}))},minLength:2,delay:500,select:function(e,a){var t=i(a.item.value).find("a").attr("href");return t&&(window.location=t),!1},focus:function(){return i(".ui-autocomplete li").removeClass("ui-state-hover"),i(".ui-autocomplete").find("li:has(a.ui-state-focus)").addClass("ui-state-hover"),!1},open:function(){i(".bp-search-ac").outerWidth(i(this).outerWidth())},position:e}).data("ui-autocomplete")._renderItem=function(e,a){return e.addClass("bp-search-ac"),0!=s.parents("header").length&&e.addClass("bp-search-ac-header"),""!=a.type_label?(i(e).data("current_cat",a.type),i("<li>").attr("class","bbls-"+a.type+"-type bbls-category").append("<div>"+a.value+"</div>").appendTo(e)):i("<li>").attr("class","bbls-"+a.type+"-type bbls-sub-item").append('<a class="x">'+a.value+"</a>").appendTo(e)})}),BP_SEARCH.forums_autocomplete&&i("#bbp-search-form, #bbp-search-index-form").each(function(){var e,a,t,n,s=i(this).find("#bbp_search");0<s.length&&(e={},t=(a=s.offset()).top+s.outerHeight(),(n=o-t)<400&&a.top>n&&(e={collision:"flip flip"}),i(s).autocomplete({source:function(e,a){var t,n=e.term;n in BP_SEARCH.cache?a(BP_SEARCH.cache[n]):(t={action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,search_term:e.term,forum_search_term:!0,per_page:15},a({value:'<div class="loading-msg"><span class="bb_global_search_spinner"></span><span>'+BP_SEARCH.loading_msg+"</span></div>"}),i.ajax({url:BP_SEARCH.ajaxurl,dataType:"json",data:t,success:function(e){BP_SEARCH.cache[n]=e,a(e)}}))},minLength:2,select:function(e,a){return window.location=i(a.item.value).find("a").attr("href"),!1},focus:function(){return i(".ui-autocomplete li").removeClass("ui-state-hover"),i(".ui-autocomplete").find("li:has(a.ui-state-focus)").addClass("ui-state-hover"),!1},open:function(){i(".bp-search-ac").outerWidth(i(this).outerWidth())},position:e}).data("ui-autocomplete")._renderItem=function(e,a){return e.addClass("bp-search-ac"),i("body.forum-archive").length&&e.addClass("bp-forum-search-ac-header"),i("#bbp_search").length&&e.addClass("bp-forum-search-ac-header"),i("body.bbp-search.forum-search").length&&e.addClass("bp-forum-search-ac-header"),""!=a.type_label?(i(e).data("current_cat",a.type),i("<li>").attr("class","bbls-"+a.type+"-type bbls-category").append('<span class="bb-cat-title">'+a.value+"</span>").appendTo(e)):i("<li>").attr("class","bbls-"+a.type+"-type bbls-sub-item").append('<a class="x">'+a.value+"</a>").appendTo(e)})}),window.addEventListener("scroll",function(){for(var e=r.length,a=0;a<e;a++)r[a].autocomplete("close")}))}BP_SEARCH.cache=[],n(),i([BP_SEARCH.autocomplete_selector,BP_SEARCH.form_selector].filter(Boolean).join(",")).each(function(){var e=i(this);i('input[name="bp_search"]',e).length||(i("<input>").attr({type:"hidden",name:"bp_search",value:"1"}).appendTo(e),i("<input>").attr({type:"hidden",name:"view",value:"content"}).appendTo(e))}),i(document).on("click",".bp-search-results-wrapper .item-list-tabs li a",function(e){e.preventDefault();var t=this;i(this).addClass("loading");var a=i.post(BP_SEARCH.ajaxurl,{action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,subset:i(this).parent().data("item"),s:BP_SEARCH.search_term,view:"content"});return a.done(function(e){var a;i(t).removeClass("loading"),""!=e&&((a=i(".bp-search-page")).after(e),a.remove()),n()}),a.fail(function(){i(t).removeClass("loading")}),!1}),i(document).on("click",".bp-search-results-wrapper .pagination-links a",function(e){e.preventDefault();var t=this;i(this).addClass("loading");var a={action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,subset:i(this).parent().data("item"),s:BP_SEARCH.search_term,view:"content",list:i(this).data("pagenumber")},n=i(".bp-search-results-wrapper .item-list-tabs li.active").data("item");a.subset=n;var s=i.post(BP_SEARCH.ajaxurl,a);return s.done(function(e){var a;i(t).removeClass("loading"),""!=e&&((a=i(".bp-search-page")).after(e),a.remove())}),s.fail(function(){i(t).removeClass("loading")}),!1}),i("body.bp-nouveau").on("click",".bp-search-page button.friendship-button, .bp-search-page button.group-button",function(){window.location=this.getAttribute("data-bp-nonce")})});