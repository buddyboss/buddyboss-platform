function bp_ps_clear_form_elements(e){var a=jQuery(e).closest("form"),t=new Event("change");a.find(":input").each(function(){switch(this.type){case"password":case"select-multiple":case"select-one":case"text":case"email":case"date":case"url":case"search":case"textarea":jQuery(this).val("");break;case"checkbox":case"radio":this.checked=!1,this.dispatchEvent(t)}}),jQuery.removeCookie("bp_ps_request",{path:"/"}),a.find(".submit").trigger("click")}jQuery(document).ready(function(e){function a(){var a=[];if("1"==BP_SEARCH.enable_ajax_search){var t=e(document).height();e(BP_SEARCH.autocomplete_selector).each(function(){var s=e(this),n=s.find('input[name="s"], input[type=search]');if(n.length>0){var c={},o=n.offset(),r=o.top+n.outerHeight(),i=t-r;i<400&&o.top>i&&(c={collision:"flip flip"}),a.push(n),e(n).autocomplete({source:function(a,t){var s=a.term;if(s in BP_SEARCH.cache)t(BP_SEARCH.cache[s]);else{var n={action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,search_term:a.term,per_page:BP_SEARCH.per_page};t({value:'<div class="loading-msg"><span class="bb_global_search_spinner"></span>'+BP_SEARCH.loading_msg+"</div>"}),e.ajax({url:BP_SEARCH.ajaxurl,dataType:"json",data:n,success:function(e){BP_SEARCH.cache[s]=e,t(e)}})}},minLength:2,delay:500,select:function(a,t){var s=e(t.item.value).find("a").attr("href");return s&&(window.location=s),!1},focus:function(){return e(".ui-autocomplete li").removeClass("ui-state-hover"),e(".ui-autocomplete").find("li:has(a.ui-state-focus)").addClass("ui-state-hover"),!1},open:function(){e(".bp-search-ac").outerWidth(e(this).outerWidth())},position:c}).data("ui-autocomplete")._renderItem=function(a,t){return a.addClass("bp-search-ac"),0!=s.parents("header").length&&a.addClass("bp-search-ac-header"),""!=t.type_label?(e(a).data("current_cat",t.type),e("<li>").attr("class","bbls-"+t.type+"-type bbls-category").append("<div>"+t.value+"</div>").appendTo(a)):e("<li>").attr("class","bbls-"+t.type+"-type bbls-sub-item").append('<a class="x">'+t.value+"</a>").appendTo(a)}}}),e("#bbp-search-form, #bbp-search-index-form").each(function(){var a=e(this).find("#bbp_search");if(a.length>0){var s={},n=a.offset(),c=n.top+a.outerHeight(),o=t-c;o<400&&n.top>o&&(s={collision:"flip flip"}),e(a).autocomplete({source:function(a,t){var s=a.term;if(s in BP_SEARCH.cache)t(BP_SEARCH.cache[s]);else{var n={action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,search_term:a.term,forum_search_term:!0,per_page:15};t({value:'<div class="loading-msg"><span class="bb_global_search_spinner"></span><span>'+BP_SEARCH.loading_msg+"</span></div>"}),e.ajax({url:BP_SEARCH.ajaxurl,dataType:"json",data:n,success:function(e){BP_SEARCH.cache[s]=e,t(e)}})}},minLength:2,select:function(a,t){return window.location=e(t.item.value).find("a").attr("href"),!1},focus:function(){return e(".ui-autocomplete li").removeClass("ui-state-hover"),e(".ui-autocomplete").find("li:has(a.ui-state-focus)").addClass("ui-state-hover"),!1},open:function(){e(".bp-search-ac").outerWidth(e(this).outerWidth())},position:s}).data("ui-autocomplete")._renderItem=function(a,t){return a.addClass("bp-search-ac"),e("body.forum-archive").length&&a.addClass("bp-forum-search-ac-header"),e("#bbp_search").length&&a.addClass("bp-forum-search-ac-header"),e("body.bbp-search.forum-search").length&&a.addClass("bp-forum-search-ac-header"),""!=t.type_label?(e(a).data("current_cat",t.type),e("<li>").attr("class","bbls-"+t.type+"-type bbls-category").append('<span class="bb-cat-title">'+t.value+"</span>").appendTo(a)):e("<li>").attr("class","bbls-"+t.type+"-type bbls-sub-item").append('<a class="x">'+t.value+"</a>").appendTo(a)}}}),window.addEventListener("scroll",function(){for(var e=a.length,t=0;t<e;t++)a[t].autocomplete("close")})}}BP_SEARCH.cache=[],a(),e([BP_SEARCH.autocomplete_selector,BP_SEARCH.form_selector].filter(Boolean).join(",")).each(function(){var a=e(this);e('input[name="bp_search"]',a).length||(e("<input>").attr({type:"hidden",name:"bp_search",value:"1"}).appendTo(a),e("<input>").attr({type:"hidden",name:"view",value:"content"}).appendTo(a))}),e(document).on("click",".bp-search-results-wrapper .item-list-tabs li a",function(t){t.preventDefault();var s=this;e(this).addClass("loading");var n=e.post(BP_SEARCH.ajaxurl,{action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,subset:e(this).parent().data("item"),s:BP_SEARCH.search_term,view:"content"});return n.done(function(t){if(e(s).removeClass("loading"),""!=t){var n=e(".bp-search-page");n.after(t),n.remove()}a()}),n.fail(function(){e(s).removeClass("loading")}),!1}),e(document).on("click",".bp-search-results-wrapper .pagination-links a",function(a){a.preventDefault();var t=this;e(this).addClass("loading");var s={action:BP_SEARCH.action,nonce:BP_SEARCH.nonce,subset:e(this).parent().data("item"),s:BP_SEARCH.search_term,view:"content",list:e(this).data("pagenumber")},n=e(".bp-search-results-wrapper .item-list-tabs li.active").data("item");s.subset=n;var c=e.post(BP_SEARCH.ajaxurl,s);return c.done(function(a){if(e(t).removeClass("loading"),""!=a){var s=e(".bp-search-page");s.after(a),s.remove()}}),c.fail(function(){e(t).removeClass("loading")}),!1}),e("body.bp-nouveau").on("click",".bp-search-page button.friendship-button, .bp-search-page button.group-button",function(){window.location=this.getAttribute("data-bp-nonce")})});